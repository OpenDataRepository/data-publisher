{% macro write(target, search_key, offset) %}
<script>
    var recaching = false;

    function loadDataRecord(datarecord_id, target) {
//        var target = "{{ target }}";
        var search_key = "{{ search_key }}";
        var offset = "{{ offset }}";

        var url = '';
        switch (target) {
            case 'view':
            case undefined:
            case '':
                url = '{{ path('odr_display_view', { 'datarecord_id': 0, 'search_key': '', 'offset': '' }) }}';
                break;
            case 'edit':
                url = '{{ path('odr_record_edit', { 'datarecord_id': 0 }) }}';
                break;            
        }

        url = url.substring(0, (url.length - 1));
        url += datarecord_id;
        if (search_key != '') {
            url += '/' + search_key;

            if (offset !== '')
                url += '/' + offset;
        }
//alert(url);

        if (recaching == false) {
            // This should end up forcing an AJAX load by way of the hashchange event in navigation.html.twig...
            UpdateURL(url);
        }
    }

</script>
{% endmacro %}

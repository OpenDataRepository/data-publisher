{% spaceless %}

<div class="pure-u-3-4" style="visibility: hidden;">
    <label id="saved" style="margin: 10px; float: right; color: black; font-size:1.25em;"><strong>SAVED</strong></label></br>
</div>

<form class="ODRDatatypePropertiesForm pure-form pure-form-aligned" {{ form_enctype(datatype_form) }} id="DatatypePropertiesForm_{{ datatype.id }}">
{% if datatree == null or datatree.getislink == false %}    {# don't display datatype-specific properties if a linked type #}
    {{ form_errors(datatype_form._token) }}
    {{ form_widget(datatype_form._token) }}

    <fieldset>

        <div class="pure-control-group">
            <label for="{{ datatype_form.short_name.vars.id }}">
                <strong>{{ datatype_form.short_name.vars.label }}</strong>
            </label>
            {{ form_errors(datatype_form.short_name) }}
            {{ form_widget(datatype_form.short_name, { 'attr': {'class': 'required ODRDatatypeShortName', 'data-error-type': 'inline' } }) }}
        </div>
        <div class="pure-control-group">
            <label for="{{ datatype_form.long_name.vars.id }}">
                <strong>{{ datatype_form.long_name.vars.label }}</strong>
            </label>
            {{ form_errors(datatype_form.long_name) }}
            {{ form_widget(datatype_form.long_name, { 'attr': {'class': 'required', 'data-error-type': 'inline' } }) }}
        </div>
        <div class="pure-control-group">
            <label for="{{ datatype_form.description.vars.id }}">
                <strong>{{ datatype_form.description.vars.label }}</strong>
            </label>
            {{ form_errors(datatype_form.description) }}
            {{ form_widget(datatype_form.description, { 'attr': {'class': 'required', 'data-error-type': 'inline', 'style': 'height:150px;' } }) }}
        </div>


        <div class="pure-control-group">
            <label for="{{ datatype_form.externalIdField.vars.id }}">
                <strong>{{ datatype_form.externalIdField.vars.label }}</strong>
            </label>
            {{ form_errors(datatype_form.externalIdField) }}
            {{ form_widget(datatype_form.externalIdField, { 'attr': {'data-error-type': 'inline' } }) }}
            <span style="color:black;">&nbsp;<i class="fa fa-lg fa-question-circle Cursor" title="The contents of the selected Datafield will be used to identify and update Datarecords during CSV/XML Importing.  Only Datafields marked as 'Unique' in DisplayTemplate are eligible for use."></i></span>
        </div>
        <div class="pure-control-group">
            <label for="{{ datatype_form.nameField.vars.id }}">
                <strong>{{ datatype_form.nameField.vars.label }}</strong>
            </label>
            {{ form_errors(datatype_form.nameField) }}
            {{ form_widget(datatype_form.nameField, { 'attr': {'data-error-type': 'inline' } }) }}
            <span style="color:black;">&nbsp;<i class="fa fa-lg fa-question-circle Cursor" title="The contents of the selected Datafield will be used as a logical 'name' to label the Datarecord in lists and various other places.{#  Only Datafields marked as 'Unique' in DisplayTemplate are eligible for use.#}"></i></span>
        </div>

        <div class="pure-control-group">
            <label for="{{ datatype_form.sortField.vars.id }}">
                <strong>{{ datatype_form.sortField.vars.label }}</strong>
            </label>
            {{ form_errors(datatype_form.sortField) }}
            {{ form_widget(datatype_form.sortField, { 'attr': {'data-error-type': 'inline' } }) }}
            <span style="color:black;">&nbsp;<i class="fa fa-lg fa-question-circle Cursor" title="The contents of the selected Datafield will determine the sorting order of the Datarecords of this Datatype."></i></span>
        </div>

        {% if is_top_level == true %}
        <div class="pure-control-group">
            <label for="{{ datatype_form.backgroundImageField.vars.id }}">
                <strong>{{ datatype_form.backgroundImageField.vars.label }}</strong>
            </label>
            {{ form_errors(datatype_form.backgroundImageField) }}
            {{ form_widget(datatype_form.backgroundImageField, { 'attr': {'data-error-type': 'inline' } }) }}
            <span style="color:black;">&nbsp;<i class="fa fa-lg fa-question-circle Cursor" title="This Datatype's search page will select and display a random public Image uploaded to the selected Datafield."></i></span>
        </div>

        <div class="pure-control-group">
            <label for="{{ datatype_form.searchSlug.vars.id }}">
                <strong>{{ datatype_form.searchSlug.vars.label }}</strong>
            </label>
            {{ form_errors(datatype_form.searchSlug) }}
            <span style="color:black; font-size:80%;">{{ site_baseurl ~ '/'}}</span>
            <span>{{ form_widget(datatype_form.searchSlug, { 'attr': {'style': 'width:auto;', 'maxlength': '32'} }) }}</span>
{#
            <span id="{{ datatype_form.searchSlug.vars.id }}_error" style="display: none; color:red;">
                <i class="fa fa-lg fa-exclamation-triangle"></i>&nbsp;A Datatype with this abbreviation already exists!
            </span>
            <input type="hidden" id="{{ datatype_form.searchSlug.vars.id }}_original" disabled="disabled" style="display: none;" value="{{ datatype_form.searchSlug.vars.value }}" />
#}
        </div>

        <div class="pure-control-group">
            <label for="{{ datatype_form.useShortResults.vars.id }}">
                <strong>{{ datatype_form.useShortResults.vars.label }}</strong>
            </label>
            {{ form_errors(datatype_form.useShortResults) }}
            {{ form_widget(datatype_form.useShortResults, { 'attr': {'style': 'width:auto'} }) }}
        </div>
        {% endif %}

        {% if is_top_level == true and can_view_permissions == true %}
        <div class="pure-control-group">
            <label>
                <strong>Datatype Permissions</strong>
            </label>
            <span>
                &nbsp;<a target="_blank" class="address" href="#{{ path( 'odr_datatype_permissions_list', {'datatype_id': datatype.id }) }}" style="color:black;" title="Show all user permissions for this Datatype..."><i class="fa fa-cog fa-lg"></i></a>
            </span>
        </div>
        {% endif %}

        {# render all hidden fields, and anything else that's necessary #}
        <div style="display: none">
            {{ form_rest(datatype_form) }}
        </div>

    </fieldset>
{% endif %}
</form>

{% if is_top_level == false and datatree != null %}   {# display datatree properties if not a top-level datatype #}
    {% include 'ODRAdminBundle:Displaytemplate:datatree_properties_form.html.twig' with {'datatree': datatree, 'datatree_form': datatree_form, 'force_multiple': force_multiple} %}
{% endif %}

{% if is_top_level == false and theme_datatype != null %}   {# display theme_datatype properties if not a top-level datatype #}
    {% include 'ODRAdminBundle:Theme:theme_datatype_properties_form.html.twig' with {'theme_datatype': theme_datatype, 'theme_datatype_form': theme_datatype_form} %}
{% endif %}

{% endspaceless %}

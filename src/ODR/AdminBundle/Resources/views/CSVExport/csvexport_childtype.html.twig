{% spaceless %}

{% set datatype = datatype_array[target_datatype_id] %}

<div class="ODRDataType pure-u-1 {% if is_top_level == 0 %} ODRAccordionWrapper ODRFormAccordion{% endif %}" id="DataType_{{ datatype.id }}">

    {% if is_top_level == 0 %}

        {# current datatype is a child/linked datatype #}
        <h3 class="ui-accordion-header ui-helper-reset ui-state-default ui-state-active ui-corner-top" role="tab" aria-expanded="true" aria-selected="true" tabindex="0">
            <span class="ui-icon ui-icon-triangle-1-s"></span>
            <a id="Datatype_{{ datatype.id }}_ShortName">{{ datatype.dataTypeMeta.shortName }}</a>
        </h3>

        {% if multiple_allowed == 1 %}
            <div class="ODRFieldArea accordion-content pure-u-1" id="FieldArea_{{ datatype.id }}">
                <input type="hidden" value="not_real" disabled/>
                <div class="{#ODRBlockedDatafield#} ODRFieldLabel pure-u-1">
                    This {% if is_link == 1 %}Linked{% else %}Child{% endif %} Datatype can't be exported, since more than one {% if is_link == 1 %}linked record{% else %}child record{% endif %} is allowed.
                </div>
            </div><!-- End of #FieldArea_{{ datatype.id }} -->

        {% else %}
            <div class="ODRFieldArea accordion-content pure-u-1" id="FieldArea_{{ datatype.id }}">
                {% include 'ODRAdminBundle:CSVExport:csvexport_fieldarea.html.twig' with {
                    'datatype_array': datatype_array,
                    'theme_array': theme_array,

                    'target_datatype_id': target_datatype_id,
                    'target_theme_id': target_theme_id,

                    'is_top_level': is_top_level
                } %}
            </div><!-- End of #FieldArea_{{ datatype.id }} -->

        {% endif %}

    {% else %}

        {# current datatype is top-level #}
        <div class="ODRFieldArea pure-u-1" id="FieldArea_{{ datatype.id }}">
            {% include 'ODRAdminBundle:CSVExport:csvexport_fieldarea.html.twig' with {
                'datatype_array': datatype_array,
                'theme_array': theme_array,

                'target_datatype_id': target_datatype_id,
                'target_theme_id': target_theme_id,

                'is_top_level': is_top_level
            } %}
        </div><!-- End of #FieldArea_{{ datatype.id }} -->

    {% endif %}

</div><!-- End of #DataType_{{ datatype.id }} -->

{% endspaceless %}

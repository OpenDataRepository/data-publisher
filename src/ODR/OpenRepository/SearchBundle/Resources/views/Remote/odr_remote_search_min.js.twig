!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.ODRRemoteSearch=e()}("undefined"!=typeof self?self:this,function(){function t(t){this.initialized=!1,this.opts=t}function e(t,e){if(!t)return;let n;if(void 0!==t.length){for(n=0;n<t.length;n++)if(!1===e.call(this,n,t[n]))return}else for(n in t)if(t.hasOwnProperty(n)&&!1===e.call(this,n,t[n]))return}return t.prototype={initialize:function(){let n=[];null!=this.opts.baseurl&&""!==this.opts.baseurl||n.push('"baseurl" must not be empty'),(null==this.opts.datatype_id||""===this.opts.datatype_id||isNaN(parseInt(this.opts.datatype_id)))&&n.push('"datatype_id" must not be numeric'),null!=this.opts.submit_button&&""!==this.opts.submit_button&&null!=document.getElementById(this.opts.submit_button)||n.push('"submit_button" must refer to an HTML element'),null==this.opts.mapping||0===this.opts.mapping.count?n.push('"mapping" must not be empty'):e(this.opts.mapping,function(t,e){null==document.getElementById(e)&&n.push('"mapping" for datafield '+t+' references an element with the id "'+e+'", but that HTML element does not exist')}),n.length>0?e(n,function(t,e){console.log("ODRRemoteSearch Error:",e)}):(this.initialized=!0,document.getElementById(this.opts.submit_button).addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.initialized&&t.triggerSearch(this.opts)}))}},t.triggerSearch=function(n){let i=n.baseurl,o=n.datatype_id,s=n.mapping,l='{"dt_id":"'+o+'"';e(s,function(t,e){let n=document.getElementById(e).value.trim().replaceAll('"','\\"');""!==n&&(l+=',"'+t+'":"'+n+'"')}),l+="}";let u=i+"#{{ path('odr_search_render', {'search_theme_id': 0, 'search_key': ''}) }}"+t.encodeSearchKey(l);window.open(u,"_blank")},t.encodeSearchKey=function(t){return btoa(t).replaceAll("=","").replaceAll("+","-").replaceAll("/","_")},t.each=e,t});
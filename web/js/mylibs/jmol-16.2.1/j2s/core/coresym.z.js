(function(ua,va,wa,xa,H,ya,X,W,ba,aa,O,v,za,ga,Aa,fa,M,y,ra,la,pa,Ba,Ca,Da,ma,sa,ta,Q,Ea,Fa,oa,Ga,Ha,Ia,Ja,qa,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,ab,bb,d,n){X("J.adapter.smarter");ba(["JS.Symmetry","JU.P3","$.SB"],"J.adapter.smarter.XtalSymmetry","java.util.Hashtable JU.BS $.Lst $.M3 $.M4 $.P3i $.PT $.V3 J.adapter.smarter.Atom JS.SpaceGroup $.SymmetryOperation $.UnitCell JU.BSUtil $.Logger $.SimpleUnitCell".split(" "),function(){var b=O(function(){this.acr=null;this.applySymmetryToBonds=
!1;this.baseSymmetry=this.asc=null;this.bondCount0=0;this.bondsFound=null;this.crystalReaderLatticeOpsOnly=this.checkNearAtoms=this.checkAll=this.centroidPacked=!1;this.disorderMap=null;this.disorderMapMax=0;this.doCentroidUnitCell=!1;this.doNormalize=!0;this.doPackUnitCell=!1;this.filterSymop=null;this.firstAtom=0;this.latticeCells=null;this.latticeOp=0;this.mTemp=this.maxXYZ0=this.minXYZ0=this.maxXYZ=this.minXYZ=this.mident=null;this.ndims=3;this.packingRange=this.nVib=this.noSymmetryCount=0;this.ptTemp=
this.ptOffset=null;this.rmaxz=this.rmaxy=this.rmaxx=this.rminz=this.rminy=this.rminx=0;this.symmetry=null;this.symmetryRange=0;this.unitCellTranslations=this.unitCellParams=this.trajectoryUnitCells=null;aa(this,arguments)},J.adapter.smarter,"XtalSymmetry",null);la(b,function(){this.bondsFound=new JU.SB;this.ptOffset=new JU.P3});ga(b,function(){});d(b,"addRotatedTensor",function(a,c,f,h,b){null==this.ptTemp&&(this.ptTemp=new JU.P3,this.mTemp=new JU.M3);return a.addTensor(this.acr.getInterface("JU.Tensor").setFromEigenVectors(b.rotateAxes(f,
c.eigenVectors,this.ptTemp,this.mTemp),c.eigenValues,c.isIsotropic?"iso":c.type,c.id,c),null,h)},"J.adapter.smarter.Atom,JU.Tensor,~N,~B,J.adapter.smarter.XtalSymmetry.FileSymmetry");d(b,"applySymmetryBio",function(a,c,f){var h=a.get("biomts"),b=h.size();null==this.mident&&(this.mident=new JU.M4,this.mident.setIdentity());this.acr.lstNCS=null;this.setLatticeCells();var e=null!=this.latticeCells&&0!=this.latticeCells[0]?M(3,0):null;if(null!=e)for(var g=0;3>g;g++)e[g]=this.latticeCells[g];this.latticeCells=
null;var e=this.acr.getFilterWithCase("BMCHAINS"),j=null==e?-1:2>e.length?0:JU.PT.parseInt(e.substring(1));-2147483648==j&&(j=-e.charAt(1).charCodeAt(0));var d=0<=f.indexOf("BYCHAIN")?1:0<=f.indexOf("BYSYMOP")?2:0;this.doNormalize=!1;var k=a.get("chains");(this.symmetry=new J.adapter.smarter.XtalSymmetry.FileSymmetry).setSpaceGroup(this.doNormalize);this.addSpaceGroupOperation("x,y,z",!1);e=a.get("name");this.setAtomSetSpaceGroupName(this.acr.sgName=e);this.applySymmetryToBonds=c;this.bondCount0=
this.asc.bondCount;this.firstAtom=this.asc.getLastAtomSetAtomIndex();var e=this.asc.ac,q=new java.util.Hashtable,p=0,r=this.asc.atoms;c=this.bondCount0>this.asc.bondIndex0&&c;switch(d){case 1:for(g=e;--g>=this.firstAtom;){var K=Integer.$valueOf(r[g].chainID),t=q.get(K);null==t&&(p++,q.put(K,t=new JU.BS));t.set(g)}this.asc.bsAtoms=new JU.BS;for(g=0;g<p;g++)this.asc.bsAtoms.set(e+g),c=new J.adapter.smarter.Atom,c.set(0,0,0),c.radius=16,this.asc.addAtom(c);for(var s=0,n,q=q.entrySet().iterator();q.hasNext()&&
((n=q.next())||1);){c=r[e+s++];t=n.getValue();for(g=t.nextSetBit(0);0<=g;g=t.nextSetBit(g+1))c.add(r[g]);c.scale(1/t.cardinality());c.atomName="Pt"+s;c.chainID=n.getKey().intValue()}this.firstAtom=e;e+=p;c=!1;break;case 2:this.asc.bsAtoms=new JU.BS;this.asc.bsAtoms.set(e);c=r[e]=new J.adapter.smarter.Atom;c.set(0,0,0);for(g=e;--g>=this.firstAtom;)c.add(r[g]);c.scale(1/(e-this.firstAtom));c.atomName="Pt";c.radius=16;this.asc.addAtom(c);this.firstAtom=e++;c=!1}p=a.get("asemblyIdAtoms");0<=f.indexOf("#<")&&
(b=Math.min(b,JU.PT.parseInt(f.substring(f.indexOf("#<")+2))-1),f=JU.PT.rep(f,"#<","_<"));g=0;for(q=this.firstAtom;q<e;q++)r[q].bsSymmetry=new JU.BS,a=r[q].chainID,a>g&&(g=a);a=this.asc.bsAtoms;t=c?M(this.asc.ac,0):null;for(s=null==k?1:0;s<b;s++){if(0<=f.indexOf("!#")){if(0<=f.indexOf("!#"+(s+1)+";"))continue}else if(0<=f.indexOf("#")&&0>f.indexOf("#"+(s+1)+";"))continue;var x=h.get(s),u=!x.equals(this.mident),R=null==k?null:k.get(s);if(null!=R&&null!=p){a=new JU.BS;for(q=p.entrySet().iterator();q.hasNext()&&
((n=q.next())||1);)0<=R.indexOf(":"+n.getKey()+";")&&a.or(n.getValue());null!=this.asc.bsAtoms&&a.and(this.asc.bsAtoms);R=null}for(var v=-1,B=!1,q=this.firstAtom;q<e;q++){if(null!=a)B=!a.get(q);else if(null!=R&&(K=r[q].chainID)!=v)B=0>R.indexOf(":"+this.acr.vwr.getChainIDStr(v=K)+";");if(!B)try{var z=r[q].atomSite,F;c&&(t[z]=this.asc.ac);F=this.asc.newCloneAtom(r[q]);F.bondingRadius=s;this.asc.atomSymbolicMap.put(""+F.atomSerial,F);null!=this.asc.bsAtoms&&this.asc.bsAtoms.set(F.index);F.atomSite=
z;u&&x.rotTrans(F);F.bsSymmetry=JU.BSUtil.newAndSetBit(s)}catch(N){if(fa(N,Exception))this.asc.errorMessage="appendAtomCollection error: "+N;else throw N;}}u&&this.symmetry.addBioMoleculeOperation(x,!1);if(c)for(x=this.asc.bondIndex0;x<this.bondCount0;x++)q=this.asc.bonds[x],this.asc.addNewBondWithOrder(t[r[q.atomIndex1].atomSite],t[r[q.atomIndex2].atomSite],q.order)}if(null!=k){null==this.asc.bsAtoms&&(this.asc.bsAtoms=JU.BSUtil.newBitSet2(0,this.asc.ac));this.asc.bsAtoms.clearBits(this.firstAtom,
e);if(0==d){if(-1!=j){K=(h=0!=j)?new JU.BS:null;r=this.asc.atoms;z=0;h&&(z=0>j?Math.max(-j,g+1):Math.max(g+j,65),K.setBits(0,z-1),K.setBits(91,97),K.setBits(123,200));d=1==this.asc.structureCount?this.asc.structures[0].bsAll:null;k=new java.util.Hashtable;F=new java.util.Hashtable;q=null==d?null:new java.util.Hashtable;p=null;g=e;for(t=this.asc.ac;g<t;g++)s=r[g].chainID,u=r[g].bsSymmetry.nextSetBit(0),j=this.acr.vwr.getChainIDStr(s),x=0==u?j:j+u,f=k.get(x),null==f&&(h&&0!=u&&(u=200>z?K.nextClearBit(z):
200,200>u&&(K.set(u),f=Integer.$valueOf(this.acr.vwr.getChainID(""+String.fromCharCode(u),!0)),z=u)),null==f&&(f=Integer.$valueOf(this.acr.vwr.getChainID(x,!0))),x!==j&&(F.put(f,Integer.$valueOf(s)),null!=d&&(null!=p&&(p[1]=g),q.put(f,p=M(-1,[g,t])))),k.put(x,f)),r[g].chainID=f.intValue();if(0<this.asc.structureCount){r=this.asc.structures;h=this.asc.structureCount;for(q=F.entrySet().iterator();q.hasNext()&&((n=q.next())||1);){f=n.getKey();f=f.intValue();j=n.getValue().intValue();for(g=0;g<h;g++)K=
r[g],null==K.bsAll&&(K.startChainID==K.endChainID?K.startChainID==j&&(K=K.clone(),K.startChainID=K.endChainID=f,this.asc.addStructure(K)):System.err.println("XtalSymmetry not processing biomt chain structure "+this.acr.vwr.getChainIDStr(j)+" to "+this.acr.vwr.getChainIDStr(f)))}}}n=this.asc.getAtomSetAuxiliaryInfoValue(-1,"PDB_CONECT_bonds");if(!c&&null!=n)for(g=n.size();0<=--g;)if(q=n.get(g),c=this.asc.getAtomFromName(""+q[0]),r=this.asc.getAtomFromName(""+q[1]),null!=c&&null!=r&&c.bondingRadius!=
r.bondingRadius&&(null==a||a.get(c.index)&&a.get(r.index))&&25<c.distanceSquared(r))n.removeItemAt(g),System.out.println("long interchain bond removed for @"+c.atomSerial+"-@"+r.atomSerial)}g=e;for(t=this.asc.ac;g<t;g++)this.asc.atoms[g].bondingRadius=NaN}this.noSymmetryCount=e-this.firstAtom;this.finalizeSymmetry(this.symmetry);this.setCurrentModelInfo(b,null,null);this.reset()},"java.util.Map,~B,~S");d(b,"getBaseSymmetry",function(){return null==this.baseSymmetry?this.symmetry:this.baseSymmetry});
d(b,"getOverallSpan",function(){return null==this.maxXYZ0?JU.V3.new3(this.maxXYZ.x-this.minXYZ.x,this.maxXYZ.y-this.minXYZ.y,this.maxXYZ.z-this.minXYZ.z):JU.V3.newVsub(this.maxXYZ0,this.minXYZ0)});d(b,"getSymmetry",function(){return null==this.symmetry?this.symmetry=new J.adapter.smarter.XtalSymmetry.FileSymmetry:this.symmetry});d(b,"isWithinCell",function(a,c,f,h,b,e,g,j,d){return c.x>f-d&&c.x<h+d&&(2>a||c.y>b-d&&c.y<e+d)&&(3>a||c.z>g-d&&c.z<j+d)},"~N,JU.P3,~N,~N,~N,~N,~N,~N,~N");d(b,"scaleFractionalVibs",
function(){for(var a=this.acr.unitCellParams,a=JU.P3.new3(1/a[0],1/a[1],1/a[2]),c=this.asc.getAtomSetAtomIndex(this.asc.iSet),f=this.asc.ac;--f>=c;){var h=this.asc.atoms[f].vib;null!=h&&h.scaleT(a)}});d(b,"set",function(a){this.acr=a;this.asc=a.asc;this.getSymmetry();return this},"J.adapter.smarter.AtomSetCollectionReader");d(b,"setLatticeParameter",function(a){this.symmetry.setSpaceGroup(this.doNormalize);this.symmetry.setLattice(a)},"~N");d(b,"setSpinVectors",function(){if(0<this.nVib||0>this.asc.iSet||
!this.acr.vibsFractional)return this.nVib;for(var a=this.asc.getAtomSetAtomIndex(this.asc.iSet),c=this.getBaseSymmetry(),f=this.asc.ac;--f>=a;){var h=this.asc.atoms[f].vib;null!=h&&(0<h.modDim?h.setMoment():(h=h.clone(),c.toCartesian(h,!0),this.asc.atoms[f].vib=h),this.nVib++)}return this.nVib});d(b,"addSpaceGroupOperation",function(a,c){this.symmetry.setSpaceGroup(this.doNormalize);c&&1==this.symmetry.getSpaceGroupOperationCount()&&this.setLatticeCells();return this.symmetry.addSpaceGroupOperation(a,
0)},"~S,~B");d(b,"applySymmetryFromReader",function(a){this.asc.setCoordinatesAreFractional(this.acr.iHaveFractionalCoordinates);this.setAtomSetSpaceGroupName(this.acr.sgName);this.symmetryRange=this.acr.symmetryRange;this.asc.setInfo("symmetryRange",Float.$valueOf(this.symmetryRange));if(this.acr.doConvertToFractional||this.acr.fileCoordinatesAreFractional){this.setLatticeCells();var c=!0;if(this.acr.ignoreFileSpaceGroupName||!this.acr.iHaveSymmetryOperators){if(!this.acr.merging||null==a)a=new J.adapter.smarter.XtalSymmetry.FileSymmetry;
c=a.createSpaceGroup(this.acr.desiredSpaceGroupIndex,0<=this.acr.sgName.indexOf("!")?"P1":this.acr.sgName,this.acr.unitCellParams,this.acr.modDim)}else this.acr.doPreSymmetry(),a=null;this.packingRange=this.acr.getPackingRangeValue(0);c?(null!=a&&this.getSymmetry().setSpaceGroupTo(a.getSpaceGroup()),this.applySymmetryLattice(),null!=a&&null==this.filterSymop&&this.setAtomSetSpaceGroupName(a.getSpaceGroupName())):this.setUnitCellSafely()}if(this.acr.iHaveFractionalCoordinates&&this.acr.merging&&null!=
a){for(var c=this.asc.atoms,f=this.asc.getLastAtomSetAtomIndex(),h=this.asc.ac;f<h;f++)a.toCartesian(c[f],!0);this.asc.setCoordinatesAreFractional(!1);this.acr.addVibrations=!1}return this.symmetry},"J.adapter.smarter.XtalSymmetry.FileSymmetry");d(b,"setSymmetry",function(a){return this.symmetry=a},"J.adapter.smarter.XtalSymmetry.FileSymmetry");d(b,"setTensors",function(){for(var a=this.asc.ac,c=this.asc.getLastAtomSetAtomIndex();c<a;c++){var f=this.asc.atoms[c];null!=f.anisoBorU&&(f.addTensor(this.symmetry.getTensor(this.acr.vwr,
f.anisoBorU),null,!1),Float.isNaN(f.bfactor)&&(f.bfactor=100*f.anisoBorU[7]),f.anisoBorU=null)}});d(b,"adjustRangeMinMax",function(a){var c=new JU.P3,f=new JU.P3,h=new JU.P3;this.acr.forcePacked&&(c.setT(a[1]),f.setT(a[2]),h.setT(a[3]),c.scale(this.packingRange),f.scale(this.packingRange),h.scale(this.packingRange));a[0].scaleAdd2(this.minXYZ.x,a[1],a[0]);a[0].scaleAdd2(this.minXYZ.y,a[2],a[0]);a[0].scaleAdd2(this.minXYZ.z,a[3],a[0]);a[0].sub(c);a[0].sub(f);a[0].sub(h);var b=JU.P3.newP(a[0]);this.symmetry.toFractional(b,
!0);this.setSymmetryMinMax(b);a[1].scale(this.maxXYZ.x-this.minXYZ.x);a[2].scale(this.maxXYZ.y-this.minXYZ.y);a[3].scale(this.maxXYZ.z-this.minXYZ.z);a[1].scaleAdd2(2,c,a[1]);a[2].scaleAdd2(2,f,a[2]);a[3].scaleAdd2(2,h,a[3]);for(c=0;3>c;c++)for(f=c+1;4>f;f++)b.add2(a[c],a[f]),0!=c&&b.add(a[0]),this.symmetry.toFractional(b,!1),this.setSymmetryMinMax(b);this.symmetry.toCartesian(b,!1);b.add(a[1]);this.symmetry.toFractional(b,!1);this.setSymmetryMinMax(b);this.minXYZ=JU.P3i.new3(H(Math.min(0,Math.floor(this.rminx+
0.001))),H(Math.min(0,Math.floor(this.rminy+0.001))),H(Math.min(0,Math.floor(this.rminz+0.001))));this.maxXYZ=JU.P3i.new3(H(Math.max(1,Math.ceil(this.rmaxx-0.001))),H(Math.max(1,Math.ceil(this.rmaxy-0.001))),H(Math.max(1,Math.ceil(this.rmaxz-0.001))))},"~A");d(b,"applyAllSymmetry",function(a,c){if(!(0==this.asc.ac||null!=c&&c.isEmpty())){var f=this.noSymmetryCount=0<this.asc.baseSymmetryAtomCount?this.asc.baseSymmetryAtomCount:null==c?this.asc.getLastAtomSetAtomCount():this.asc.ac-c.nextSetBit(this.asc.getLastAtomSetAtomIndex());
this.asc.setTensors();this.applySymmetryToBonds=this.acr.applySymmetryToBonds;this.doPackUnitCell=this.acr.doPackUnitCell&&!this.applySymmetryToBonds;this.bondCount0=this.asc.bondCount;this.ndims=JU.SimpleUnitCell.getDimensionFromParams(this.acr.unitCellParams);this.finalizeSymmetry(this.symmetry);var h=this.symmetry.getSpaceGroupOperationCount(),b=null==this.acr.thisBiomolecule?null:new JU.BS;this.checkNearAtoms=this.acr.checkNearAtoms||null!=b;JU.SimpleUnitCell.setMinMaxLatticeParameters(this.ndims,
this.minXYZ,this.maxXYZ,0);this.latticeOp=this.symmetry.getLatticeOp();this.crystalReaderLatticeOpsOnly=this.asc.crystalReaderLatticeOpsOnly&&0<=this.latticeOp;this.doCentroidUnitCell&&this.asc.setInfo("centroidMinMax",M(-1,[this.minXYZ.x,this.minXYZ.y,this.minXYZ.z,this.maxXYZ.x,this.maxXYZ.y,this.maxXYZ.z,this.centroidPacked?1:0]));if(this.doCentroidUnitCell||this.acr.doPackUnitCell||0!=this.symmetryRange&&1==this.maxXYZ.x-this.minXYZ.x&&1==this.maxXYZ.y-this.minXYZ.y&&1==this.maxXYZ.z-this.minXYZ.z)switch(this.minXYZ0=
JU.P3.new3(this.minXYZ.x,this.minXYZ.y,this.minXYZ.z),this.maxXYZ0=JU.P3.new3(this.maxXYZ.x,this.maxXYZ.y,this.maxXYZ.z),null!=a&&(a.setMinMax0(this.minXYZ0,this.maxXYZ0),this.minXYZ.set(v(this.minXYZ0.x),v(this.minXYZ0.y),v(this.minXYZ0.z)),this.maxXYZ.set(v(this.maxXYZ0.x),v(this.maxXYZ0.y),v(this.maxXYZ0.z))),this.ndims){case 3:this.minXYZ.z--,this.maxXYZ.z++;case 2:this.minXYZ.y--,this.maxXYZ.y++;case 1:this.minXYZ.x--,this.maxXYZ.x++}for(var e=(this.maxXYZ.x-this.minXYZ.x)*(this.maxXYZ.y-this.minXYZ.y)*
(this.maxXYZ.z-this.minXYZ.z),g=f*(this.crystalReaderLatticeOpsOnly?4:h),g=this.checkNearAtoms||null!=this.acr.thisBiomolecule?g*e:0<this.symmetryRange?g:1,j=Array(g),d=this.asc.atoms,k=0;k<f;k++)d[this.firstAtom+k].bsSymmetry=JU.BS.newN(h*(e+1));var q=0;this.unitCellTranslations=Array(e);var p=0,r=0,K=Math.abs(this.symmetryRange),t=0!=this.symmetryRange,s=0>this.symmetryRange,n=0<this.symmetryRange;t&&(this.rminx=this.rminy=this.rminz=3.4028235E38,this.rmaxx=this.rmaxy=this.rmaxz=-3.4028235E38);
var x=this.symmetry,u=x;this.checkAll=this.crystalReaderLatticeOpsOnly||1==this.asc.atomSetCount&&this.checkNearAtoms&&0<=this.latticeOp;var R=this.acr.lstNCS;if(null!=R&&0==R.get(0).m33){for(var H=x.getSpaceGroupOperationCount(),B=R.size(),k=B;0<=--k;){var z=R.get(k);z.m33=1;x.toFractionalM(z)}for(k=1;k<H;k++)for(var F=x.getSpaceGroupOperation(k),N=0;N<B;N++)z=JU.M4.newM4(R.get(N)),z.mul2(F,z),this.doNormalize&&0<this.noSymmetryCount&&JS.SymmetryOperation.normalizeOperationToCentroid(3,z,d,this.firstAtom,
this.noSymmetryCount),R.addLast(z)}k=null;R=x.getSpaceGroupOperation(0);this.doPackUnitCell&&(k=new JU.P3,this.ptOffset.set(0,0,0));H=this.bondCount0>this.asc.bondIndex0&&this.applySymmetryToBonds?M(f,0):null;e=M(e,0);for(B=this.minXYZ.x;B<this.maxXYZ.x;B++)for(z=this.minXYZ.y;z<this.maxXYZ.y;z++)for(F=this.minXYZ.z;F<this.maxXYZ.z;F++)if(this.unitCellTranslations[p]=JU.V3.new3(B,z,F),e[p++]=555+100*B+10*z+F,!(0!=B||0!=z||0!=F||0==j.length)){for(q=0;q<f;q++){r=d[this.firstAtom+q];null!=a&&(x=a.getAtomSymmetry(r,
this.symmetry),x!==u&&(0==x.getSpaceGroupOperationCount()&&this.finalizeSymmetry(u=x),R=x.getSpaceGroupOperation(0)));N=JU.P3.newP(r);R.rotTrans(N);x.toCartesian(N,!1);if(this.doPackUnitCell)if(x.toUnitCellRnd(N,this.ptOffset),k.setT(N),x.toFractional(k,!1),this.acr.fixFloatPt(k,1E5),null==c)r.setT(k);else if(1E-4>r.distance(k))c.set(r.index);else{c.clear(r.index);continue}null!=c&&r.bsSymmetry.clearAll();r.bsSymmetry.set(p*h);r.bsSymmetry.set(0);t&&this.setSymmetryMinMax(N);q<g&&(j[q]=N)}s&&(this.rminx-=
K,this.rminy-=K,this.rminz-=K,this.rmaxx+=K,this.rmaxy+=K,this.rmaxz+=K);r=q=this.symmetryAddAtoms(0,0,0,0,q,p*h,j,a,b,H)}n&&(this.rminx-=K,this.rminy-=K,this.rminz-=K,this.rmaxx+=K,this.rmaxy+=K,this.rmaxz+=K);p=0;for(B=this.minXYZ.x;B<this.maxXYZ.x;B++)for(z=this.minXYZ.y;z<this.maxXYZ.y;z++)for(F=this.minXYZ.z;F<this.maxXYZ.z;F++)if(p++,0!=B||0!=z||0!=F)q=this.symmetryAddAtoms(B,z,F,r,q,p*h,j,a,b,H);p*f==this.asc.ac-this.firstAtom&&this.duplicateAtomProperties(p);this.setCurrentModelInfo(f,x,e);
this.unitCellParams=null;this.reset()}},"J.adapter.smarter.MSInterface,JU.BS");d(b,"applyRangeSymmetry",function(a){var c=this.acr.fillRange;a=this.updateBSAtoms();this.acr.forcePacked=!0;this.doPackUnitCell=!1;for(var f=JU.P3i.new3(this.minXYZ.x,this.minXYZ.y,this.minXYZ.z),h=JU.P3i.new3(this.maxXYZ.x,this.maxXYZ.y,this.maxXYZ.z),b=Array(4),e=0;4>e;e++)b[e]=JU.P3.newP(c[e]);this.setUnitCellSafely();this.adjustRangeMinMax(b);c=new J.adapter.smarter.XtalSymmetry.FileSymmetry;c.getUnitCell(this.acr.fillRange,
!1,null);this.applyAllSymmetry(this.acr.ms,a);for(var b=new JU.P3,g=this.asc.atoms,e=this.asc.ac;--e>=this.firstAtom;)b.setT(g[e]),this.symmetry.toCartesian(b,!1),c.toFractional(b,!1),(this.acr.noPack?!this.removePacking(this.ndims,b,f.x,h.x,f.y,h.y,f.z,h.z,this.packingRange):!this.isWithinCell(this.ndims,b,f.x,h.x,f.y,h.y,f.z,h.z,this.packingRange))&&a.clear(e)},"JU.BS");d(b,"applySuperSymmetry",function(a,c,f,h,b,e,g){this.asc.setGlobalBoolean(7);var j=this.doPackUnitCell;this.doPackUnitCell=j;
this.applyAllSymmetry(this.acr.ms,null);this.doPackUnitCell=j;for(var j=this.asc.atoms,d=this.asc.ac,k=f;k<d;k++)this.symmetry.toCartesian(j[k],!0),c.set(k);this.asc.setCurrentModelInfo("unitcell_conventional",this.symmetry.getV0abc("a,b,c",null));c=e[0];k=e[1];e=e[2];this.symmetry=new J.adapter.smarter.XtalSymmetry.FileSymmetry;this.setUnitCell(y(-1,[0,0,0,0,0,0,c.x,c.y,c.z,k.x,k.y,k.z,e.x,e.y,e.z,0,0,0,0,0,0,NaN,NaN,NaN,NaN,NaN,g]),null,null);a=null==h||null==a?"P1":"cell="+a;this.setAtomSetSpaceGroupName(a);
this.symmetry.setSpaceGroupName(a);this.symmetry.setSpaceGroup(this.doNormalize);this.symmetry.addSpaceGroupOperation("x,y,z",0);null!=b&&0==b.length()&&(b=null);null!=b&&this.symmetry.toFractional(b,!0);for(k=f;k<d;k++)this.symmetry.toFractional(j[k],!0),null!=b&&j[k].sub(b);this.asc.haveAnisou=!1;this.asc.setCurrentModelInfo("matUnitCellOrientation",null)},"~S,JU.BS,~N,~A,JU.P3,~A,~N");d(b,"applySymmetryLattice",function(){if(this.asc.coordinatesAreFractional&&null!=this.symmetry.getSpaceGroup()){var a=
this.latticeCells[0],c=this.latticeCells[1],f=Math.abs(this.latticeCells[2]),h=this.latticeCells[3];this.firstAtom=this.asc.getLastAtomSetAtomIndex();var b=this.asc.bsAtoms;null!=b&&(this.updateBSAtoms(),this.firstAtom=b.nextSetBit(this.firstAtom));this.rminx=this.rminy=this.rminz=3.4028235E38;this.rmaxx=this.rmaxy=this.rmaxz=-3.4028235E38;null==this.acr.latticeType&&(this.acr.latticeType=""+this.symmetry.getLatticeType());this.acr.isPrimitive&&(this.asc.setCurrentModelInfo("isprimitive",Boolean.TRUE),
(!"P".equals(this.acr.latticeType)||null!=this.acr.primitiveToCrystal)&&this.asc.setCurrentModelInfo("unitcell_conventional",this.symmetry.getConventionalUnitCell(this.acr.latticeType,this.acr.primitiveToCrystal)));this.setUnitCellSafely();this.asc.setCurrentModelInfo("f2c",this.symmetry.getUnitCellF2C());this.asc.setCurrentModelInfo("f2cTitle",this.symmetry.getSpaceGroupTitle());this.asc.setCurrentModelInfo("f2cParams",this.symmetry.getUnitCellParams());if(null!=this.acr.latticeType&&(this.asc.setCurrentModelInfo("latticeType",
this.acr.latticeType),"string"==typeof this.acr.fillRange)){var e=this.setLatticeRange(this.acr.latticeType,this.acr.fillRange);null==e?(this.acr.appendLoadNote(this.acr.fillRange+" symmetry could not be implemented"),this.acr.fillRange=null):this.acr.fillRange=e}this.baseSymmetry=this.symmetry;if(null!=this.acr.fillRange)this.setMinMax(this.ndims,h,a,c,f),this.applyRangeSymmetry(b);else{var e=null,g=1E-6;this.nVib=0;var j=this.acr.strSupercell,d=null!=j&&0<=j.indexOf(","),k=null,q=null,p=Array(3);
d&&(k=new JU.M4,null==this.mident&&(this.mident=new JU.M4),this.setUnitCellSafely(),e=this.symmetry.getV0abc(j,k),k.transpose33(),null!=e&&!k.equals(this.mident)&&(this.setMinMax(this.ndims,h,a,c,f),q=JU.P3.newP(e[0]),p[0]=JU.V3.newV(e[1]),p[1]=JU.V3.newV(e[2]),p[2]=JU.V3.newV(e[3]),this.adjustRangeMinMax(e)));d=this.asc.getLastAtomSetAtomIndex();null!=b&&(d=b.nextSetBit(d));3.4028235E38==this.rminx?e=null:(b=this.updateBSAtoms(),g=this.symmetry.getPrecision(),this.applySuperSymmetry(j,b,d,e,q,p,
g));this.setMinMax(this.ndims,h,a,c,f);if(null==e){this.applyAllSymmetry(this.acr.ms,b);if(!this.acr.noPack&&(!this.applySymmetryToBonds||!this.acr.doPackUnitCell))return;this.setMinMax(this.ndims,h,a,c,f)}(this.acr.forcePacked||this.acr.doPackUnitCell||this.acr.noPack)&&this.trimToUnitCell(d);this.updateSupercellAtomSites(k,b,g)}}});d(b,"duplicateAtomProperties",function(a){var c=this.asc.getAtomSetAuxiliaryInfoValue(-1,"atomProperties");if(null!=c)for(var f,h=c.entrySet().iterator();h.hasNext()&&
((f=h.next())||1);){var b=f.getKey(),e=f.getValue();if("string"==typeof e){for(var g=e,j=new JU.SB,e=a;0<=--e;)j.append(g);c.put(b,j.toString())}else{b=e;g=y(b.length*a,0);for(e=a;0<=--e;)System.arraycopy(b,0,g,e*b.length,b.length)}}},"~N");d(b,"finalizeSymmetry",function(a){var c=this.asc.getAtomSetAuxiliaryInfoValue(-1,"spaceGroup");a.setFinalOperations(this.ndims,c,this.asc.atoms,this.firstAtom,this.noSymmetryCount,this.doNormalize,this.filterSymop);(null!=this.filterSymop||null==c||c.equals("unspecified!"))&&
this.setAtomSetSpaceGroupName(a.getSpaceGroupName());null==this.unitCellParams&&(a.fixUnitCell(this.acr.unitCellParams)&&this.acr.appendLoadNote("Unit cell parameters were adjusted to match space group!"),this.setUnitCellSafely())},"J.adapter.smarter.XtalSymmetry.FileSymmetry");d(b,"removePacking",function(a,c,f,h,b,e,g,j,d){return c.x>f-d&&c.x<h-d&&(2>a||c.y>b-d&&c.y<e-d)&&(3>a||c.z>g-d&&c.z<j-d)},"~N,JU.P3,~N,~N,~N,~N,~N,~N,~N");d(b,"reset",function(){this.asc.coordinatesAreFractional=!1;this.asc.setCurrentModelInfo("hasSymmetry",
Boolean.TRUE);this.asc.setGlobalBoolean(1)});d(b,"setAtomSetSpaceGroupName",function(a){this.symmetry.setSpaceGroupName(a);this.asc.setCurrentModelInfo("spaceGroup",a+"")},"~S");d(b,"setCurrentModelInfo",function(a,c,f){null==c?(this.asc.setCurrentModelInfo("presymmetryAtomCount",Integer.$valueOf(this.noSymmetryCount)),this.asc.setCurrentModelInfo("biosymmetryCount",Integer.$valueOf(a)),this.asc.setCurrentModelInfo("biosymmetry",this.symmetry)):(this.asc.setCurrentModelInfo("presymmetryAtomCount",
Integer.$valueOf(a)),this.asc.setCurrentModelInfo("latticeDesignation",c.getLatticeDesignation()),this.asc.setCurrentModelInfo("unitCellRange",f),this.asc.setCurrentModelInfo("unitCellTranslations",this.unitCellTranslations),this.acr.isSUPERCELL&&this.asc.setCurrentModelInfo("supercell",this.acr.strSupercell));this.asc.setCurrentModelInfo("presymmetryAtomIndex",Integer.$valueOf(this.firstAtom));a=this.symmetry.getSpaceGroupOperationCount();if(0<a){c=Array(a);for(f=0;f<a;f++)c[f]=""+this.symmetry.getSpaceGroupXyz(f,
this.doNormalize);this.asc.setCurrentModelInfo("symmetryOperations",c);this.asc.setCurrentModelInfo("symmetryOps",this.symmetry.getSymmetryOperations())}this.asc.setCurrentModelInfo("symmetryCount",Integer.$valueOf(a));this.asc.setCurrentModelInfo("latticeType",null==this.acr.latticeType?"P":this.acr.latticeType);this.asc.setCurrentModelInfo("intlTableNo",this.symmetry.getIntTableNumber());this.asc.setCurrentModelInfo("intlTableNoFull",this.symmetry.getIntTableNumberFull());this.asc.setCurrentModelInfo("spaceGroupIndex",
Integer.$valueOf(this.symmetry.getSpaceGroupIndex()));this.asc.setCurrentModelInfo("spaceGroupTitle",this.symmetry.getSpaceGroupTitle());if(null==this.acr.sgName||0<=this.acr.sgName.indexOf("?")||0<=this.acr.sgName.indexOf("!"))this.setAtomSetSpaceGroupName(this.acr.sgName=this.symmetry.getSpaceGroupName())},"~N,J.adapter.smarter.XtalSymmetry.FileSymmetry,~A");d(b,"setCurrentModelUCInfo",function(a,c,f){null!=a&&this.asc.setCurrentModelInfo("unitCellParams",a);null!=c&&this.asc.setCurrentModelInfo("unitCellOffset",
c);null!=f&&this.asc.setCurrentModelInfo("matUnitCellOrientation",f)},"~A,JU.P3,JU.M3");d(b,"setLatticeCells",function(){this.latticeCells=this.acr.latticeCells;var a=555>=this.latticeCells[0]&&555<=this.latticeCells[1]&&(0==this.latticeCells[2]||1==this.latticeCells[2]||-1==this.latticeCells[2]);this.doNormalize=0!=this.latticeCells[0]&&(!a||1==this.latticeCells[2]);this.applySymmetryToBonds=this.acr.applySymmetryToBonds;this.doPackUnitCell=this.acr.doPackUnitCell&&!this.applySymmetryToBonds;this.doCentroidUnitCell=
this.acr.doCentroidUnitCell;this.centroidPacked=this.acr.centroidPacked;this.filterSymop=this.acr.filterSymop});d(b,"setLatticeRange",function(a,c){var f=null,h="R".equals(a);c.equals("conventional")?f=this.symmetry.getConventionalUnitCell(a,this.acr.primitiveToCrystal):c.equals("primitive")?(f=this.symmetry.getUnitCellVectors(),this.symmetry.toFromPrimitive(!0,a.charAt(0),f,this.acr.primitiveToCrystal)):h&&c.equals("rhombohedral")?c=1==this.symmetry.getUnitCellInfoType(7)?"2/3a+1/3b+1/3c,-1/3a+1/3b+1/3c,-1/3a-2/3b+1/3c":
null:h&&c.equals("trigonal")?c=1==this.symmetry.getUnitCellInfoType(8)?"a-b,b-c,a+b+c":null:(0>c.indexOf(",")||0>c.indexOf("a")||0>c.indexOf("b")||c.indexOf("c"),c=null);if(null!=c&&null==f&&null==(f=this.symmetry.getV0abc(c,null)))c=null;if(null==c)return null;this.acr.addJmolScript("unitcell "+JU.PT.esc(c));return f},"~S,~S");d(b,"setMinMax",function(a,c,f,h,b){this.minXYZ=new JU.P3i;this.maxXYZ=JU.P3i.new3(f,h,b);JU.SimpleUnitCell.setMinMaxLatticeParameters(a,this.minXYZ,this.maxXYZ,c)},"~N,~N,~N,~N,~N");
d(b,"setSymmetryMinMax",function(a){this.rminx>a.x&&(this.rminx=a.x);this.rminy>a.y&&(this.rminy=a.y);this.rminz>a.z&&(this.rminz=a.z);this.rmaxx<a.x&&(this.rmaxx=a.x);this.rmaxy<a.y&&(this.rmaxy=a.y);this.rmaxz<a.z&&(this.rmaxz=a.z)},"JU.P3");d(b,"setUnitCell",function(a,c,f){this.unitCellParams=y(a.length,0);for(var h=0;h<a.length;h++)this.unitCellParams[h]=a[h];this.asc.haveUnitCell=!0;this.asc.isTrajectory&&(null==this.trajectoryUnitCells&&(this.trajectoryUnitCells=new JU.Lst,this.asc.setInfo("unitCells",
this.trajectoryUnitCells)),this.trajectoryUnitCells.addLast(this.unitCellParams));this.asc.setGlobalBoolean(2);this.getSymmetry().setUnitCellFromParams(this.unitCellParams,!1,this.unitCellParams[26]);null!=f&&this.symmetry.setOffsetPt(f);null!=c&&this.symmetry.initializeOrientation(c);this.setCurrentModelUCInfo(this.unitCellParams,f,c)},"~A,JU.M3,JU.P3");d(b,"setUnitCellSafely",function(){null==this.unitCellParams&&this.setUnitCell(this.acr.unitCellParams,this.acr.matUnitCellOrientation,this.acr.unitCellOffset)});
d(b,"symmetryAddAtoms",function(a,c,f,h,b,e,g,j,d,k){var q=0==h,p=null!=k;this.doPackUnitCell&&this.ptOffset.set(a,c,f);var r=this.symmetryRange*this.symmetryRange,K=0>this.symmetryRange,t=0<this.symmetryRange,s=q&&t,t=(new Boolean(t&!q)).valueOf(),n=this.symmetry.getSpaceGroupOperationCount(),x=this.acr.lstNCS,u=null==x?0:x.size(),v=n+u,u=H(u/n),y=this.checkNearAtoms&&(1<v||this.doPackUnitCell),B=K||t,z=y||B,F=null!=d,N=y||s,w=this.acr.isMolecular?null:this.asc.bsAtoms,A=this.symmetry;K&&(h=this.noSymmetryCount);
var K=this.firstAtom+this.noSymmetryCount,D=0>this.asc.firstAtomToBond?K:this.asc.firstAtomToBond,C=new JU.P3,S=null,ca=F?0.01:1E-4,W="\x00",M=null==w?this.firstAtom:w.nextSetBit(this.firstAtom),P=0;a:for(;P<v;P++)if(!(q&&0==P||this.crystalReaderLatticeOpsOnly&&0<P&&0!=P%this.latticeOp||null!=d&&d.get(P))){for(var Z=this.firstAtom+(y?b:t?h:0),da=P>=n?0:0==this.asc.vibScale?A.getSpinOp(P):this.asc.vibScale,V=Math.max(this.firstAtom,null==w?0:w.nextSetBit(0)),Q=z,ha=P>=n?H((P-n)/u):P,ia=ha+e;V<K;V++){var T=
this.asc.atoms[V];if(null==w||w.get(V)){null==j?A.newSpaceGroupPoint(T,P,P>=n?x.get(P-n):null,a,c,f,C):(A=j.getAtomSymmetry(T,this.symmetry),A.newSpaceGroupPoint(T,P,null,a,c,f,C),S=A.getSpaceGroupOperationCode(P),null!=S&&(W=S.charAt(0),A=j.getSymmetryFromCode(S),0==A.getSpaceGroupOperationCount()&&this.finalizeSymmetry(A)));this.acr.fixFloatPt(C,1E5);var ea=JU.P3.newP(C);A.toCartesian(ea,!1);if(this.doPackUnitCell&&(A.toUnitCellRnd(ea,this.ptOffset),C.setT(ea),A.toFractional(C,!1),this.acr.fixFloatPt(C,
1E5),!this.isWithinCell(this.ndims,C,this.minXYZ0.x,this.maxXYZ0.x,this.minXYZ0.y,this.maxXYZ0.y,this.minXYZ0.z,this.maxXYZ0.z,this.packingRange)))continue;s&&this.setSymmetryMinMax(ea);var G=null;if(Q){if(B&&(ea.x<this.rminx||ea.y<this.rminy||ea.z<this.rminz||ea.x>this.rmaxx||ea.y>this.rmaxy||ea.z>this.rmaxz))continue;for(var I=3.4028235E38,aa=this.checkAll?this.asc.ac:Z,U=T.atomName,$=null==S?T.altLoc:W,Y=M;Y<aa;Y++)if(null==w||w.get(Y)){var ja=g[Y-this.firstAtom];if(null!=ja){ja=ea.distanceSquared(ja);
if(y&&ja<ca){if(F){d.set(P);continue a}G=this.asc.atoms[Y];if((null==G.atomName||G.atomName.equals(U))&&G.altLoc==$)break;G=null}t&&(Y<h&&ja<I)&&(I=ja)}}if(t&&I>r)continue}F&&(Q=!1);Y=T.atomSite;if(null!=G)p&&(k[Y]=G.index),G.bsSymmetry.set(ia),G.bsSymmetry.set(ha);else{p&&(k[Y]=this.asc.ac);G=T.copyTo(C,this.asc);null!=this.asc.bsAtoms&&this.asc.bsAtoms.set(G.index);0!=da&&null!=G.vib&&(A.getSpaceGroupOperation(P).rotate(G.vib),G.vib.scale(da));if(G.isNegDisorder){null==this.disorderMap&&(this.disorderMap=
new java.util.Hashtable);var O=Integer.$valueOf(1E3*P+G.altLoc.charCodeAt(0)),I=this.disorderMap.get(O);if(null==I){if(0==this.disorderMapMax||90==this.disorderMapMax)this.disorderMapMax=64;this.disorderMap.put(O,I=new Character(String.fromCharCode(++this.disorderMapMax)))}G.altLoc=I.charValue()}G.atomSite=Y;null!=S&&(G.altLoc=W);G.bsSymmetry=JU.BSUtil.newAndSetBit(ia);G.bsSymmetry.set(ha);N&&(g[b++]=ea);T=T.tensors;if(null!=T){G.tensors=null;for(Y=T.size();0<=--Y;)ea=T.get(Y),null!=ea&&(1==n?G.addTensor(ea.copyTensor(),
null,!1):this.addRotatedTensor(G,ea,P,!1,A))}}}}if(p){Z=this.asc.bonds;da=this.asc.atoms;for(Q=this.asc.bondIndex0;Q<this.bondCount0;Q++)if(ha=Z[Q],G=da[ha.atomIndex1],V=da[ha.atomIndex2],!(null==G||null==V||V.atomSetIndex<G.atomSetIndex))if(ia=k[G.atomSite],T=k[V.atomSite],ia>T&&(V=ia,ia=T,T=V),ia!=T&&(ia>=D||T>=D)&&0>this.bondsFound.indexOf(O="-"+ia+","+T))this.bondsFound.append(O),this.asc.addNewBondWithOrder(ia,T,ha.order)}}return b},"~N,~N,~N,~N,~N,~N,~A,J.adapter.smarter.MSInterface,JU.BS,~A");
d(b,"trimToUnitCell",function(a){var c=this.asc.atoms,f=this.updateBSAtoms();if(this.acr.noPack)for(a=f.nextSetBit(a);0<=a;a=f.nextSetBit(a+1))this.removePacking(this.ndims,c[a],this.minXYZ.x,this.maxXYZ.x,this.minXYZ.y,this.maxXYZ.y,this.minXYZ.z,this.maxXYZ.z,this.packingRange)||f.clear(a);else for(a=f.nextSetBit(a);0<=a;a=f.nextSetBit(a+1))this.isWithinCell(this.ndims,c[a],this.minXYZ.x,this.maxXYZ.x,this.minXYZ.y,this.maxXYZ.y,this.minXYZ.z,this.maxXYZ.z,this.packingRange)||f.clear(a)},"~N");
d(b,"updateBSAtoms",function(){var a=this.asc.bsAtoms;null==a&&(a=this.asc.bsAtoms=JU.BSUtil.newBitSet2(0,this.asc.ac));0>a.nextSetBit(this.firstAtom)&&a.setBits(this.firstAtom,this.asc.ac);return a});d(b,"updateSupercellAtomSites",function(a,c,f){for(var h=c.cardinality(),h=Array(h),b=0,e=f*f,g=c.nextSetBit(0);0<=g;g=c.nextSetBit(g+1)){var d=this.asc.atoms[g],m=new J.adapter.smarter.Atom;m.setT(d);null!=a&&(a.rotTrans(m),JU.SimpleUnitCell.unitizeDimRnd(3,m,f));m.atomSerial=d.atomSite;m.atomSite=
d.atomSite;this.symmetry.unitize(m);for(var k=!1,q=0;q<b;q++){var p=h[q];if(m.atomSerial==p.atomSerial&&m.distanceSquared(p)<e){k=!0;d.atomSite=p.atomSite;break}}k||(d.atomSite=m.atomSite=b,h[b++]=m)}},"JU.M4,JU.BS,~N");d(b,"newFileSymmetry",function(){return new J.adapter.smarter.XtalSymmetry.FileSymmetry});b=ra(J.adapter.smarter.XtalSymmetry,"FileSymmetry",JS.Symmetry);ga(b,function(){pa(this,J.adapter.smarter.XtalSymmetry.FileSymmetry,[])});d(b,"addLatticeVectors",function(a){return this.spaceGroup.addLatticeVectors(a)},
"JU.Lst");d(b,"addSubSystemOp",function(a,c,f,h){this.spaceGroup.isSSG=!0;c=JS.SymmetryOperation.getXYZFromRsVs(c,f,!1);f=this.spaceGroup.addSymmetry(c,-1,!0);this.spaceGroup.operations[f].setSigma(a,h);return c},"~S,JU.Matrix,JU.Matrix,JU.Matrix");d(b,"checkDistance",function(a,c,f,h,b,e,g,d){return this.unitCell.checkDistance(a,c,f,h,b,e,g,d)},"JU.P3,JU.P3,~N,~N,~N,~N,~N,JU.P3");d(b,"createSpaceGroup",function(a,c,f,h){this.spaceGroup=JS.SpaceGroup.createSpaceGroup(a,c,f,h);null!=this.spaceGroup&&
JU.Logger.debugging&&JU.Logger.debug("using generated space group "+this.spaceGroup.dumpInfo());return null!=this.spaceGroup},"~N,~S,~O,~N");d(b,"fcoord",function(a){return JS.SymmetryOperation.fcoord(a)},"JU.T3");d(b,"getMatrixFromString",function(a,c){JS.SymmetryOperation.getMatrixFromString(null,a,c,!1,!0,!1)},"~S,~A");d(b,"getSpaceGroupOperationCode",function(a){return this.spaceGroup.operations[a].subsystemCode},"~N");d(b,"getTensor",function(a,c){if(null==c)return null;null==this.unitCell&&
(this.unitCell=JS.UnitCell.fromParams(y(-1,[1,1,1,90,90,90]),!0,1E-4));return this.unitCell.getTensor(a,c)},"JV.Viewer,~A");d(b,"setPrecision",function(a){this.unitCell.setPrecision(a)},"~N");d(b,"toFractionalM",function(a){this.$isBio||this.unitCell.toFractionalM(a)},"JU.M4");d(b,"toUnitCellRnd",function(a,c){this.unitCell.toUnitCellRnd(a,c)},"JU.T3,JU.T3");d(b,"twelfthify",function(a){this.unitCell.twelfthify(a)},"JU.P3");d(b,"getConventionalUnitCell",function(a,c){return null==this.unitCell||null==
a?null:this.unitCell.getConventionalUnitCell(a,c)},"~S,JU.M3");d(b,"getSpaceGroupIndex",function(){return this.spaceGroup.getIndex()});d(b,"getUnitCellF2C",function(){return this.unitCell.getF2C()})});X("JS");ba(["J.api.SymmetryInterface"],"JS.Symmetry","java.util.Hashtable JU.BS $.JSJSONParser $.Lst $.M4 $.P3 $.PT $.Rdr J.api.Interface J.bspt.Bspt JS.PointGroup $.SpaceGroup $.SymmetryInfo $.SymmetryOperation $.UnitCell JU.Escape $.Logger $.SimpleUnitCell JV.FileManager".split(" "),function(){var b=
O(function(){this.unitCell=this.spaceGroup=null;this.$isBio=!1;this.desc=this.symmetryInfo=this.cip=this.pointGroup=null;aa(this,arguments)},JS,"Symmetry",null,J.api.SymmetryInterface);n(b,"isBio",function(){return this.$isBio});n(b,"setPointGroup",function(a,c,f,h,b,e,g,d,m,k){this.pointGroup=JS.PointGroup.getPointGroup(null==c?null:c.pointGroup,f,h,b,e,g,d,m,k,a.getBoolean(603979956),a.getScalePixelsPerAngstrom(!1));return this},"JV.Viewer,J.api.SymmetryInterface,JU.T3,~A,JU.BS,~B,~N,~N,~N,~B");
n(b,"getPointGroupName",function(){return this.pointGroup.getName()});n(b,"getPointGroupInfo",function(a,c,f,h,b,e){return null==c&&!f&&null!=this.pointGroup.textInfo?this.pointGroup.textInfo:null==c&&this.pointGroup.isDrawType(h,b,e)?this.pointGroup.drawInfo:f&&null!=this.pointGroup.info?this.pointGroup.info:this.pointGroup.getInfo(a,c,f,h,b,e)},"~N,~S,~B,~S,~N,~N");n(b,"setSpaceGroup",function(a){null==this.spaceGroup&&(this.spaceGroup=JS.SpaceGroup.getNull(!0,a,!1))},"~B");n(b,"addSpaceGroupOperation",
function(a,c){return this.spaceGroup.addSymmetry(a,c,!1)},"~S,~N");n(b,"addBioMoleculeOperation",function(a,c){this.$isBio=this.spaceGroup.isBio=!0;return this.spaceGroup.addSymmetry((c?"!":"")+"[[bio"+a,0,!1)},"JU.M4,~B");n(b,"setLattice",function(a){this.spaceGroup.setLatticeParam(a)},"~N");n(b,"getSpaceGroup",function(){return this.spaceGroup});n(b,"getSpaceGroupInfoObj",function(a,c,f,h){return JS.SpaceGroup.getInfo(this.spaceGroup,a,c,f,h)},"~S,~A,~B,~B");n(b,"getLatticeDesignation",function(){return this.spaceGroup.getLatticeDesignation()});
n(b,"setFinalOperations",function(a,c,f,h,b,e,g){if(null!=c&&(c.startsWith("bio")||0<=c.indexOf(" *(")))this.spaceGroup.name=c;if(null!=g){var d=new JU.Lst;d.addLast(this.spaceGroup.operations[0]);for(var m=1;m<this.spaceGroup.operationCount;m++)g.contains(" "+(m+1)+" ")&&d.addLast(this.spaceGroup.operations[m]);this.spaceGroup=JS.SpaceGroup.createSpaceGroup(-1,c+" *("+g.trim()+")",d,-1)}this.spaceGroup.setFinalOperationsForAtoms(a,f,h,b,e)},"~N,~S,~A,~N,~N,~B,~S");n(b,"getSpaceGroupOperation",function(a){return null==
this.spaceGroup||null==this.spaceGroup.operations||a>=this.spaceGroup.operations.length?null:null==this.spaceGroup.finalOperations?this.spaceGroup.operations[a]:this.spaceGroup.finalOperations[a]},"~N");n(b,"getSpaceGroupXyz",function(a,c){return this.spaceGroup.getXyz(a,c)},"~N,~B");n(b,"newSpaceGroupPoint",function(a,c,f,h,b,e,g){null==f&&null==this.spaceGroup.finalOperations&&(f=this.spaceGroup.operations[c],f.isFinalized||f.doFinalize());JS.SymmetryOperation.rotateAndTranslatePoint(null==f?this.spaceGroup.finalOperations[c]:
f,a,h,b,e,g)},"JU.P3,~N,JU.M4,~N,~N,~N,JU.P3");n(b,"rotateAxes",function(a,c,f,h){return 0==a?c:this.spaceGroup.finalOperations[a].rotateAxes(c,this.unitCell,f,h)},"~N,~A,JU.P3,JU.M3");n(b,"getSpinOp",function(a){return this.spaceGroup.operations[a].getMagneticOp()},"~N");n(b,"getLatticeOp",function(){return this.spaceGroup.latticeOp});n(b,"getLatticeCentering",function(){return JS.SymmetryOperation.getLatticeCentering(this.getSymmetryOperations())});n(b,"getOperationRsVs",function(a){return(null==
this.spaceGroup.finalOperations?this.spaceGroup.operations:this.spaceGroup.finalOperations)[a].rsvs},"~N");n(b,"getSiteMultiplicity",function(a){return this.spaceGroup.getSiteMultiplicity(a,this.unitCell)},"JU.P3");n(b,"getSpaceGroupName",function(){return null!=this.symmetryInfo?this.symmetryInfo.sgName:null!=this.spaceGroup?this.spaceGroup.getName():null!=this.unitCell&&0<this.unitCell.name.length?"cell="+this.unitCell.name:""});n(b,"getSpaceGroupTitle",function(){if(null!=this.symmetryInfo)return this.symmetryInfo.getSpaceGroupTitle();
var a=this.getSpaceGroupName();return a.startsWith("cell=")?a:null!=this.spaceGroup?this.spaceGroup.asString():null!=this.unitCell&&0<this.unitCell.name.length?"cell="+this.unitCell.name:""});n(b,"getSpaceGroupNameType",function(a){return null==this.spaceGroup?null:this.spaceGroup.getNameType(a,this)},"~S");n(b,"setSpaceGroupName",function(a){null!=this.spaceGroup&&this.spaceGroup.setName(a)},"~S");n(b,"getLatticeType",function(){return null!=this.symmetryInfo?this.symmetryInfo.latticeType:null==
this.spaceGroup?"P":this.spaceGroup.latticeType});n(b,"getIntTableNumber",function(){return null!=this.symmetryInfo?this.symmetryInfo.intlTableNo:null==this.spaceGroup?null:this.spaceGroup.intlTableNumber});n(b,"getIntTableNumberFull",function(){return null!=this.symmetryInfo?this.symmetryInfo.intlTableNoFull:null==this.spaceGroup?null:null!=this.spaceGroup.intlTableNumberFull?this.spaceGroup.intlTableNumberFull:this.spaceGroup.intlTableNumber});n(b,"getCoordinatesAreFractional",function(){return null==
this.symmetryInfo||this.symmetryInfo.coordinatesAreFractional});n(b,"getCellRange",function(){return null==this.symmetryInfo?null:this.symmetryInfo.cellRange});n(b,"getSymmetryInfoStr",function(){if(null!=this.symmetryInfo)return this.symmetryInfo.infoStr;if(null==this.spaceGroup)return"";(this.symmetryInfo=new JS.SymmetryInfo).setSymmetryInfo(null,this.getUnitCellParams(),this.spaceGroup);return this.symmetryInfo.infoStr});n(b,"getSpaceGroupOperationCount",function(){return null!=this.symmetryInfo&&
null!=this.symmetryInfo.symmetryOperations?this.symmetryInfo.symmetryOperations.length:null!=this.spaceGroup&&null!=this.spaceGroup.finalOperations?this.spaceGroup.finalOperations.length:0});n(b,"getSymmetryOperations",function(){if(null!=this.symmetryInfo)return this.symmetryInfo.symmetryOperations;null==this.spaceGroup&&(this.spaceGroup=JS.SpaceGroup.getNull(!0,!1,!0));this.spaceGroup.setFinalOperations();return this.spaceGroup.finalOperations});n(b,"getAdditionalOperationsCount",function(){return null!=
this.symmetryInfo&&null!=this.symmetryInfo.symmetryOperations&&null!=this.symmetryInfo.getAdditionalOperations()?this.symmetryInfo.additionalOperations.length:null!=this.spaceGroup&&null!=this.spaceGroup.finalOperations?this.spaceGroup.getAdditionalOperationsCount():0});n(b,"getAdditionalOperations",function(){if(null!=this.symmetryInfo)return this.symmetryInfo.getAdditionalOperations();this.getSymmetryOperations();return this.spaceGroup.getAdditionalOperations()});n(b,"isSimple",function(){return null==
this.spaceGroup&&(null==this.symmetryInfo||null==this.symmetryInfo.symmetryOperations)});n(b,"haveUnitCell",function(){return null!=this.unitCell});n(b,"setUnitCellFromParams",function(a,c,f){null==a&&(a=y(-1,[1,1,1,90,90,90]));this.unitCell=JS.UnitCell.fromParams(a,c,f);this.unitCell.setPrecision(f);return this},"~A,~B,~N");n(b,"unitCellEquals",function(a){return a.unitCell.isSameAs(this.unitCell.getF2C())},"J.api.SymmetryInterface");n(b,"isSymmetryCell",function(a){var c=null==this.symmetryInfo?
this.unitCell.getF2C():this.symmetryInfo.spaceGroupF2C;a=a.unitCell.isSameAs(c);null!=this.symmetryInfo&&this.symmetryInfo.setIsActiveCell(a)&&this.setUnitCellFromParams(this.symmetryInfo.spaceGroupF2CParams,!1,NaN);return a},"J.api.SymmetryInterface");n(b,"getUnitCellState",function(){return null==this.unitCell?"":this.unitCell.getState()});n(b,"getMoreInfo",function(){return this.unitCell.moreInfo});n(b,"initializeOrientation",function(a){this.unitCell.initOrientation(a)},"JU.M3");n(b,"unitize",
function(a){this.unitCell.unitize(a)},"JU.T3");n(b,"toUnitCell",function(a,c){this.unitCell.toUnitCell(a,c)},"JU.T3,JU.T3");n(b,"toSupercell",function(a){return this.unitCell.toSupercell(a)},"JU.P3");n(b,"toFractional",function(a,c){this.$isBio||this.unitCell.toFractional(a,c)},"JU.T3,~B");n(b,"toCartesian",function(a,c){this.$isBio||this.unitCell.toCartesian(a,c)},"JU.T3,~B");n(b,"getUnitCellParams",function(){return this.unitCell.getUnitCellParams()});n(b,"getUnitCellAsArray",function(a){return this.unitCell.getUnitCellAsArray(a)},
"~B");n(b,"getUnitCellVerticesNoOffset",function(){return this.unitCell.getVertices()});n(b,"getCartesianOffset",function(){return this.unitCell.getCartesianOffset()});n(b,"getFractionalOffset",function(){return this.unitCell.getFractionalOffset()});n(b,"setOffsetPt",function(a){this.unitCell.setOffset(a)},"JU.T3");n(b,"setOffset",function(a){var c=new JU.P3;JU.SimpleUnitCell.ijkToPoint3f(a,c,0,0);this.unitCell.setOffset(c)},"~N");n(b,"getUnitCellMultiplier",function(){return this.unitCell.getUnitCellMultiplier()});
n(b,"getUnitCellMultiplied",function(){var a=this.unitCell.getUnitCellMultiplied();if(a===this.unitCell)return this;var c=new JS.Symmetry;c.unitCell=a;return c});n(b,"getCanonicalCopy",function(a,c){return this.unitCell.getCanonicalCopy(a,c)},"~N,~B");n(b,"getUnitCellInfoType",function(a){return this.unitCell.getInfo(a)},"~N");n(b,"getUnitCellInfo",function(a){return this.unitCell.dumpInfo(!1,a)},"~B");n(b,"isSlab",function(){return this.unitCell.isSlab()});n(b,"isPolymer",function(){return this.unitCell.isPolymer()});
d(b,"getUnitCellVectors",function(){return this.unitCell.getUnitCellVectors()});n(b,"getUnitCell",function(a,c,f){if(null==a)return null;this.unitCell=JS.UnitCell.fromOABC(a,c);null!=f&&(this.unitCell.name=f);return this},"~A,~B,~S");n(b,"isSupercell",function(){return this.unitCell.isSupercell()});n(b,"notInCentroid",function(a,c,f){try{var h=new JU.BS,b=c.nextSetBit(0),e=a.getMolecules(),g=e.length,d=a.at,m=e[g-1].firstAtomIndex==a.am[d[b].mi].firstAtomIndex,k=new JU.P3,q=1==f[6];a=g;a:for(;0<=
--a&&c.get(e[a].firstAtomIndex);){var p=e[a].atomList;k.set(0,0,0);for(var b=0,r=p.nextSetBit(0);0<=r;r=p.nextSetBit(r+1))if(m||q)if(k.setT(d[r]),this.isNotCentroid(k,1,f,q))m&&h.set(r);else{if(!m)continue a}else k.add(d[r]),b++;(q||0<b&&this.isNotCentroid(k,b,f,!1))&&h.or(p)}return h}catch(n){if(fa(n,Exception))return null;throw n;}},"JM.ModelSet,JU.BS,~A");d(b,"isNotCentroid",function(a,c,f,h){a.scale(1/c);this.toFractional(a,!1);return h?a.x+5E-6<=f[0]||a.x-5E-6>f[3]||a.y+5E-6<=f[1]||a.y-5E-6>
f[4]||a.z+5E-6<=f[2]||a.z-5E-6>f[5]:a.x+5E-6<=f[0]||a.x+5E-5>f[3]||a.y+5E-6<=f[1]||a.y+5E-5>f[4]||a.z+5E-6<=f[2]||a.z+5E-5>f[5]},"JU.P3,~N,~A,~B");d(b,"getDesc",function(a){return null==a?null==JS.Symmetry.nullDesc?JS.Symmetry.nullDesc=J.api.Interface.getInterface("JS.SymmetryDesc",null,"modelkit"):JS.Symmetry.nullDesc:(null==this.desc?this.desc=J.api.Interface.getInterface("JS.SymmetryDesc",a.vwr,"eval"):this.desc).set(a)},"JM.ModelSet");n(b,"getSymmetryInfoAtom",function(a,c,f,h,b,e,g,d,m,k,q,p,
r){return this.getDesc(a).getSymopInfo(c,f,h,b,e,g,d,m,k,q,p,r)},"JM.ModelSet,~N,~S,~N,JU.P3,JU.P3,JU.P3,~S,~N,~N,~N,~N,~A");n(b,"getSpaceGroupInfo",function(a,c,f,h,b){var e=null==c;if(null==c){var g=a.getModelAuxiliaryInfo(a.vwr.am.cmi);null!=g&&(c=g.get("spaceGroup"))}g=null;null!=b&&(g=(new JS.Symmetry).setUnitCellFromParams(b,!1,NaN));return this.getDesc(a).getSpaceGroupInfo(this,f,c,0,null,null,null,0,-1,h,e,0,g,null)},"JM.ModelSet,~S,~N,~B,~A");n(b,"getV0abc",function(a,c){return W(a,Array)?
a:JS.UnitCell.getMatrixAndUnitCell(this.unitCell,a,c)},"~O,JU.M4");n(b,"getQuaternionRotation",function(a){return null==this.unitCell?null:this.unitCell.getQuaternionRotation(a)},"~S");n(b,"getFractionalOrigin",function(){return this.unitCell.getFractionalOrigin()});n(b,"getState",function(a,c,f){var h=null!=a.getInfo(c,"spaceGroupAssigned"),b=this.getFractionalOffset(),e=!1;if(null!=b&&(0!=b.x||0!=b.y||0!=b.z))f.append("; set unitcell ").append(JU.Escape.eP(b)),e=!0;b=this.getUnitCellMultiplier();
null!=b&&(f.append("; set unitcell ").append(JU.SimpleUnitCell.escapeMultiplier(b)),e=!0);b=a.getInfo(c,"spaceGroup");h&&null!=b&&(f.append("\n UNITCELL "+JU.Escape.e(a.getUnitCell(c).getUnitCellVectors())),f.append("\n MODELKIT SPACEGROUP "+JU.PT.esc(b)),f.append("\n UNITCELL "+JU.Escape.e(a.getUnitCell(c).getUnitCellVectors())),e=!0);return e},"JM.ModelSet,~N,JU.SB");n(b,"getIterator",function(a,c,f,h){return J.api.Interface.getInterface("JS.UnitCellIterator",a,"script").set(this,c,a.ms.at,f,h)},
"JV.Viewer,JM.Atom,JU.BS,~N");n(b,"toFromPrimitive",function(a,c,f,h){null==this.unitCell&&(this.unitCell=JS.UnitCell.fromOABC(f,!1));return this.unitCell.toFromPrimitive(a,c,f,h)},"~B,~S,~A,JU.M3");n(b,"generateCrystalClass",function(a){if(null==this.symmetryInfo||!this.symmetryInfo.isActive)return null;var c=this.getSymmetryOperations(),f=new JU.Lst,h=null==a,b=0,e=0,g=0;h?(b=2.718281828459045,e=3.141592653589793,g=Math.log10(2E3),a=JU.P3.new3(b+1,e+2,g+3)):a=JU.P3.newP(a);if(null==c||null==this.unitCell)f.addLast(a);
else{this.unitCell.toFractional(a,!0);var d=null,m=null;h&&(d=JU.P3.new3(e+4,g+5,b+6),this.unitCell.toFractional(d,!0),m=JU.P3.new3(g+7,b+8,e+9),this.unitCell.toFractional(m,!0));var e=new J.bspt.Bspt(3,0),g=e.allocateCubeIterator(),b=new JU.P3,k=c.length;a:for(;0<=--k;){c[k].rotate2(a,b);g.initialize(b,0.001,!1);if(g.hasMoreElements())continue a;var q=JU.P3.newP(b);f.addLast(q);e.addTuple(q);h&&(null!=m&&(c[k].rotate2(m,b),f.addLast(JU.P3.newP(b))),null!=d&&(c[k].rotate2(d,b),f.addLast(JU.P3.newP(b))))}for(c=
f.size();0<=--c;)b=f.get(c),h&&b.scale(0.5),this.unitCell.toCartesian(b,!0)}return f},"JU.P3");n(b,"calculateCIPChiralityForAtoms",function(a,c){a.setCursor(3);var f=this.getCIPChirality(a),h=a.getBoolean(603979960)?"CIPData":"CIPDataTracker",h=J.api.Interface.getInterface("JS."+h,a,"script").set(a,c);h.setRule6Full(a.getBoolean(603979823));f.getChiralityForAtoms(h);a.setCursor(0)},"JV.Viewer,JU.BS");n(b,"calculateCIPChiralityForSmiles",function(a,c){a.setCursor(3);var f=this.getCIPChirality(a),h=
J.api.Interface.getInterface("JS.CIPDataSmiles",a,"script").setAtomsForSmiles(a,c);f.getChiralityForAtoms(h);a.setCursor(0);return h.getSmilesChiralityArray()},"JV.Viewer,~S");d(b,"getCIPChirality",function(a){return null==this.cip?this.cip=J.api.Interface.getInterface("JS.CIPChirality",a,"script"):this.cip},"JV.Viewer");n(b,"getUnitCellInfoMap",function(){return null==this.unitCell?null:this.unitCell.getInfo()});n(b,"setUnitCell",function(a){this.unitCell=JS.UnitCell.cloneUnitCell(a.unitCell)},"J.api.SymmetryInterface");
n(b,"findSpaceGroup",function(a,c,f,h,b,e,g,d){return J.api.Interface.getInterface("JS.SpaceGroupFinder",a,"eval").findSpaceGroup(a,c,f,h,b,this,e,g,d)},"JV.Viewer,JU.BS,~S,~A,JU.T3,~B,~B,~B");n(b,"setSpaceGroupTo",function(a){this.symmetryInfo=null;this.spaceGroup=W(a,"JS.SpaceGroup")?a:JS.SpaceGroup.getSpaceGroupFromITAName(a.toString())},"~O");n(b,"removeDuplicates",function(a,c,f){var h=this.unitCell,b=a.at;a=a.occupancies;for(var e=null!=a,g=Array(c.length()),d=c.nextSetBit(0);0<=d;d=c.nextSetBit(d+
1)){var m=g[d]=JU.P3.newP(b[d]);h.toFractional(m,!1);f?h.unitizeRnd(m):h.unitize(m)}for(d=c.nextSetBit(0);0<=d;d=c.nextSetBit(d+1)){f=b[d];m=g[d];f=f.getAtomicAndIsotopeNumber();for(var h=e?a[d]:0,k=c.nextSetBit(d+1);0<=k;k=c.nextSetBit(k+1))f!=b[k].getAtomicAndIsotopeNumber()||e&&h!=a[k]||1.96E-6>m.distanceSquared(g[k])&&c.clear(k)}return c},"JM.ModelSet,JU.BS,~B");n(b,"getEquivPoints",function(a,c,f){var h=this.getSymmetryOperations();return null==h||null==this.unitCell?null:this.unitCell.getEquivPoints(c,
f,h,null==a?new JU.Lst:a,0,0)},"JU.Lst,JU.P3,~S");n(b,"getEquivPointList",function(a,c,f){var h=this.getSymmetryOperations(),b=0<=f.indexOf("newpt"),e=0<=f.indexOf("zapped"),g=a.size(),d=0<=f.indexOf("tofractional");if(0>f.indexOf("fromfractional"))for(var m=0;m<a.size();m++)this.toFractional(a.get(m),!1);f+=",fromfractional,tofractional";var k=0<c?0:g,q=c==g,p=0<c?c:g;q&&(c--,p--);e&&(p=0);var r=0<c?a.get(c):null;if(null!=h||null!=this.unitCell)for(m=c;m<g;m++)this.unitCell.getEquivPoints(a.get(m),
f,h,a,k,p);!e&&(a.size()==c||a.get(c)!==r||q||b)&&g--;for(m=g-c;0<=--m;)a.removeItemAt(c);if(!d)for(m=a.size();--m>=c;)this.toCartesian(a.get(m),!1)},"JU.Lst,~N,~S");n(b,"getInvariantSymops",function(a,c){var f=this.getSymmetryOperations();if(null==f)return M(0,0);for(var h=new JU.BS,b=new JU.P3,e=new JU.P3,g=f.length,d=1;d<g;d++)b.setT(a),this.unitCell.toFractional(b,!1),this.unitCell.unitize(b),e.setT(b),f[d].rotTrans(b),this.unitCell.unitize(b),1.96E-6>e.distanceSquared(b)&&h.set(d);f=M(h.cardinality(),
0);if(null!=c&&f.length!=c.length)return null;b=0;for(d=1;d<g;d++)if(h.get(d)){if(null!=c&&c[b]!=d+1)return null;f[b++]=d+1}return f},"JU.P3,~A");n(b,"getWyckoffPosition",function(a,c,f){if(null==this.unitCell)return"";var h=this.spaceGroup;null==h&&null!=this.symmetryInfo&&(h=JS.SpaceGroup.determineSpaceGroupN(this.symmetryInfo.sgName),null==h&&(h=JS.SpaceGroup.getSpaceGroupFromITAName(this.symmetryInfo.intlTableNoFull)));if(null==h||null==h.intlTableNumber)return"?";null==c?c=JU.P3.new3(0.45999998,
0.38333333,0.2875):(c=JU.P3.newP(c),this.unitCell.toFractional(c,!1),this.unitCell.unitize(c));null==JS.Symmetry.wyckoffFinder&&(JS.Symmetry.wyckoffFinder=J.api.Interface.getInterface("JS.WyckoffFinder",null,"symmetry"));try{var b=JS.Symmetry.wyckoffFinder.getWyckoffFinder(a,h.intlTableNumberFull),e=null==f?-1:f.equalsIgnoreCase("coord")?-2:f.equalsIgnoreCase("coords")?-3:f.endsWith("*")?f.charAt(0).charCodeAt(0):0;if(0!=e)return b.getStringInfo(this.unitCell,c,e);if(null==b.findPositionFor(c,f))return null;
this.unitCell.toCartesian(c,!1);return c}catch(d){if(fa(d,Exception))return d.printStackTrace(),null==f?"?":null;throw d;}},"JV.Viewer,JU.P3,~S");n(b,"getTransform",function(a,c,f){return this.getDesc(null).getTransform(this.unitCell,this.getSymmetryOperations(),a,c,f)},"JU.P3,JU.P3,~B");n(b,"isWithinUnitCell",function(a,c,f,h){return this.unitCell.isWithinUnitCell(c,f,h,a)},"JU.P3,~N,~N,~N");n(b,"checkPeriodic",function(a){return this.unitCell.checkPeriodic(a)},"JU.P3");n(b,"convertOperation",function(a,
c){if(null==c){var f=y(16,0);JS.SymmetryOperation.getMatrixFromString(null,a,f,!0,!1,!0);f[3]/=12;f[7]/=12;f[11]/=12;return JU.M4.newA16(f)}return JS.SymmetryOperation.getXYZFromMatrixFrac(c,!1,!1,!1,!0)},"~S,JU.M4");n(b,"getSpaceGroupJSON",function(a,c,f,h){var b=c.equalsIgnoreCase("settings"),e=b&&-2147483648==h,d=!b?c:e?this.getSpaceGroupName():""+h;try{var j,m=null,k,q;if(b)if(q=!0,e)if(j=JU.PT.parseInt(this.getIntTableNumber()),null==this.spaceGroup){var p=this.symmetryInfo.getDerivedSpaceGroup();
if(null==p)return new java.util.Hashtable;f=p.intlTableNumberFull}else f=this.getIntTableNumberFull();else j=h;else{var r=f.indexOf("(");if(k=f.endsWith(")")&&0<r)m=f.substring(r+1,f.length-1),f=f.substring(0,r);j=f.equalsIgnoreCase("ALL")?0:JU.PT.parseInt(f);q=-2147483648!=j;r=f.indexOf(".");!k&&(q&&0==h&&0<r)&&(h=JU.PT.parseInt(f.substring(r+1)),f=f.substring(0,r))}if(q&&(230<j||0>j))throw new ArrayIndexOutOfBoundsException(j);if(b||c.equalsIgnoreCase("ITA")){if(0==j)return null==JS.Symmetry.allDataITA&&
(JS.Symmetry.allDataITA=this.getResource(a,"sg/json/ita_all.json")),JS.Symmetry.allDataITA;null==JS.Symmetry.itaData&&(JS.Symmetry.itaData=Array(230));var n=JS.Symmetry.itaData[j-1];null==n&&(JS.Symmetry.itaData[j-1]=n=this.getResource(a,"sg/json/ita_"+j+".json"));if(null!=n){if(0==h)return n;var t=n.get("its");if(null!=t){if(b&&!e)return t;for(var s=q?h:t.size();0<=--s;){var v=t.get(s);if(s==h-1||f.equals(v.get("itaFull"))||null!=m&&m.equals(v.get("tm")))return v}}}}else if(c.equalsIgnoreCase("AFLOW")&&
null==m){null==JS.Symmetry.aflowStructures&&(JS.Symmetry.aflowStructures=this.getResource(a,"sg/json/aflow_structures.json"));if(0==j)return JS.Symmetry.aflowStructures;System.out.println(f+" ? "+h);var x=JS.Symmetry.aflowStructures.get(""+f);if(h<=x.size())return 0==h?x:x.get(h-1)}throw new IllegalArgumentException(d);}catch(u){if(fa(u,Exception))return u.printStackTrace(),u.getMessage();throw u;}},"JV.Viewer,~S,~S,~N");d(b,"getResource",function(a,c){try{var f=JV.FileManager.getBufferedReaderForResource(a,
this,"JS/",c),h=Array(1);if(JU.Rdr.readAllAsString(f,2147483647,!1,h,0))return(new JU.JSJSONParser).parse(h[0],!0)}catch(b){System.err.println(b.getMessage())}return null},"JV.Viewer,~S");n(b,"getCellWeight",function(a){return this.unitCell.getCellWeight(a)},"JU.P3");n(b,"getPrecision",function(){return null==this.unitCell?NaN:this.unitCell.getPrecision()});n(b,"fixUnitCell",function(a){return JS.UnitCell.createCompatibleUnitCell(this.spaceGroup,a,null,!0)},"~A");d(b,"setCartesianOffset",function(a){this.unitCell.setCartesianOffset(a)},
"JU.T3");d(b,"setSymmetryInfoFromFile",function(a,c,f){var b=a.getModelAuxiliaryInfo(c);this.symmetryInfo=new JS.SymmetryInfo;f=this.symmetryInfo.setSymmetryInfo(b,f,null);null!=f&&(this.setUnitCellFromParams(f,b.containsKey("jmolData"),NaN),this.unitCell.moreInfo=b.get("moreUnitCellInfo"),b.put("infoUnitCell",this.getUnitCellAsArray(!1)),this.setOffsetPt(b.get("unitCellOffset")),b=b.get("matUnitCellOrientation"),null!=b&&this.initializeOrientation(b),null!=this.symmetryInfo.strSUPERCELL&&(b=this.unitCell.getUnitCellVectors(),
b[0]=new JU.P3,a.setModelCagePts(c,b,"conventional")),JU.Logger.debugging&&JU.Logger.debug("symmetryInfos["+c+"]:\n"+this.unitCell.dumpInfo(!0,!0)))},"JM.ModelSet,~N,~A");b.nullDesc=null;b.aflowStructures=null;b.itaData=null;b.allDataITA=null;b.wyckoffFinder=null});X("JS");ba(["JU.M3","$.V3"],"JS.PointGroup","java.util.Hashtable JU.Lst $.P3 $.PT $.Quat $.SB J.bspt.Bspt JU.BSUtil $.Escape $.Logger $.Point3fi".split(" "),function(){var b=O(function(){this.isAtoms=!1;this.iter=this.textInfo=this.info=
this.drawInfo=null;this.drawType="";this.drawIndex=0;this.scale=NaN;this.axes=this.nAxes=null;this.radius=this.nAtoms=0;this.distanceTolerance=0.25;this.distanceTolerance2=0;this.linearTolerance=8;this.cosTolerance=0.99;this.name="C_1?";this.principalPlane=this.principalAxis=null;this.convention=0;this.vTemp=null;this.centerAtomIndex=-1;this.haveInversionCenter=!1;this.bsAtoms=this.atomMap=this.elements=this.points=this.center=null;this.$isLinear=this.localEnvOnly=this.haveVibration=!1;this.sppa=
0;this.maxAtoms=250;this.maxElement=0;this.eCounts=null;this.nOps=0;sa("JS.PointGroup.Operation")||JS.PointGroup.$PointGroup$Operation$();aa(this,arguments)},JS,"PointGroup",null);la(b,function(){this.nAxes=M(JS.PointGroup.maxAxis,0);this.axes=Array(JS.PointGroup.maxAxis);this.vTemp=new JU.V3});ga(b,function(a){this.convention=a?1:0},"~B");d(b,"getName",function(){return this.getConventionalName(this.name)});d(b,"getHermannMauguinName",function(){return JS.PointGroup.getHMfromSFName(this.name)});
d(b,"getConventionalName",function(a){return 1==this.convention?JS.PointGroup.getHMfromSFName(a):a},"~S");b.getPointGroup=d(b,"getPointGroup",function(a,c,f,b,d,e,g,j,m,k,q){k=new JS.PointGroup(k);0>=e&&(e=0.01);0>=g&&(g=0.5);0>=j&&(j=250);k.distanceTolerance=e;k.distanceTolerance2=e*e;k.linearTolerance=g;k.maxAtoms=j;k.isAtoms=null!=b;k.bsAtoms=k.isAtoms?b:JU.BSUtil.newBitSet2(0,f.length);k.haveVibration=d;k.center=c;k.localEnvOnly=m;k.sppa=q;JU.Logger.debugging&&(a=null);return k.set(a,f)?k:a},
"JS.PointGroup,JU.T3,~A,JU.BS,~B,~N,~N,~N,~B,~B,~N");d(b,"isEqual",function(a){if(null==a||(this.convention!=a.convention||this.linearTolerance!=a.linearTolerance||this.distanceTolerance!=a.distanceTolerance||this.nAtoms!=a.nAtoms||this.localEnvOnly!=a.localEnvOnly||this.haveVibration!=a.haveVibration||null==this.bsAtoms?null!=a.bsAtoms:!this.bsAtoms.equals(a.bsAtoms)))return!1;for(var c=0;c<this.nAtoms;c++)if(this.elements[c]!=a.elements[c]||!this.points[c].equals(a.points[c]))return!1;return!0},
"JS.PointGroup");d(b,"set",function(a,c){this.cosTolerance=Math.cos(3.141592653589793*(this.linearTolerance/180));if(!this.getPointsAndElements(c))return JU.Logger.error("Too many atoms for point group calculation"),this.name="point group not determined -- ac > "+this.maxAtoms+" -- select fewer atoms and try again.",!0;this.getElementCounts();if(this.haveVibration){for(var f=Array(this.points.length),b=this.points.length;0<=--b;){f[b]=JU.P3.newP(this.points[b]);var d=this.points[b].getVibrationVector();
null!=d&&f[b].add(d)}this.points=f}if(this.isEqual(a))return!1;try{this.findInversionCenter();if(this.$isLinear=this.isLinear(this.points))return this.name=this.haveInversionCenter?"D(infinity)h":"C(infinity)v",this.vTemp.sub2(this.points[1],this.points[0]),this.addAxis(16,this.vTemp),this.principalAxis=this.axes[16][0],this.haveInversionCenter&&(this.axes[0]=Array(1),this.principalPlane=this.axes[0][this.nAxes[0]++]=ma(JS.PointGroup.Operation,this,null,this.vTemp)),!0;this.axes[0]=Array(15);f=0;
this.findCAxes();f=this.findPlanes();this.findAdditionalAxes(f);var e=this.getHighestOrder();if(1<this.nAxes[17])this.name=1<this.nAxes[19]?this.haveInversionCenter?"Ih":"I":1<this.nAxes[18]?this.haveInversionCenter?"Oh":"O":0<f?this.haveInversionCenter?"Th":"Td":"T";else if(2>e){if(1==f)return this.name="Cs",!0;if(this.haveInversionCenter)return this.name="Ci",!0;this.name="C1"}else 1==e%2&&0<this.nAxes[16]||0==e%2&&1<this.nAxes[16]?(this.principalAxis=this.setPrincipalAxis(e,f),0==f?this.name=14>
e?"S"+e:"D"+(e-14):(e=14>e?H(e/2):e-14,this.name=f==e?"D"+e+"d":"D"+e+"h")):0==f?(this.principalAxis=this.axes[e][0],this.name=14>e?"S"+e:"C"+(e-14)):f==e-14?(this.principalAxis=this.axes[e][0],this.name="C"+f+"v"):(this.principalAxis=this.axes[14>e?e+14:e][0],this.principalPlane=this.axes[0][0],this.name="C"+(14>e?e/2:e-14)+"h")}catch(g){if(fa(g,Exception))this.name="??";else throw g;}finally{JU.Logger.info("Point group found: "+this.name)}return!0},"JS.PointGroup,~A");d(b,"setPrincipalAxis",function(a,
c){var f=this.setPrincipalPlane(a,c);if(0==c&&14>a||1==this.nAxes[a])return this.axes[a][0];if(null==f)return null;for(var b=0;b<this.nAxes[16];b++)if(this.isParallel(f.normalOrAxis,this.axes[16][b].normalOrAxis))return 0!=b&&(f=this.axes[16][0],this.axes[16][0]=this.axes[16][b],this.axes[16][b]=f),this.axes[16][0];return null},"~N,~N");d(b,"setPrincipalPlane",function(a,c){if(1==c)return this.principalPlane=this.axes[0][0];if(0==c||c==a-14)return null;for(var f=0;f<c;f++)for(var b=0,d=0;b<c;b++)if(this.isPerpendicular(this.axes[0][f].normalOrAxis,
this.axes[0][b].normalOrAxis)&&2<++d)return 0!=f&&(b=this.axes[0][0],this.axes[0][0]=this.axes[0][f],this.axes[0][f]=b),this.principalPlane=this.axes[0][0];return null},"~N,~N");d(b,"getPointsAndElements",function(a){var c=this.bsAtoms.cardinality();if(this.isAtoms&&c>this.maxAtoms)return!1;this.points=Array(c);this.elements=M(c,0);if(0==c)return!0;for(var f=0,c=this.bsAtoms.nextSetBit(0);0<=c;c=this.bsAtoms.nextSetBit(c+1)){var b=a[c];W(b,"JU.Node")&&(f=Math.max(f,b.i))}this.atomMap=M(f+1,0);this.nAtoms=
0;if(f=null==this.center)this.center=new JU.P3;for(var d=new J.bspt.Bspt(3,0),c=this.bsAtoms.nextSetBit(0);0<=c;c=this.bsAtoms.nextSetBit(c+1),this.nAtoms++){b=a[c];if(W(b,"JU.Node")){var e=this.localEnvOnly?1:1+Math.max(3,b.getCovalentBondCount());this.elements[this.nAtoms]=b.getElementNumber()*e;this.atomMap[b.i]=this.nAtoms+1}else e=new JU.Point3fi,e.setT(b),e.i=-1-this.nAtoms,W(b,"JU.Point3fi")&&(this.elements[this.nAtoms]=Math.max(0,b.sD)),b=e;d.addTuple(b);f&&this.center.add(b);this.points[this.nAtoms]=
b}this.iter=d.allocateCubeIterator();f&&this.center.scale(1/this.nAtoms);for(c=this.nAtoms;0<=--c;)a=this.center.distanceSquared(this.points[c]),this.isAtoms&&a<this.distanceTolerance2&&(this.centerAtomIndex=c),this.radius=Math.max(this.radius,a);this.radius=Math.sqrt(this.radius);1.5>this.radius&&0.15<this.distanceTolerance&&(this.distanceTolerance=this.radius/10,this.distanceTolerance2=this.distanceTolerance*this.distanceTolerance,System.out.println("PointGroup calculation adjusting distanceTolerance to "+
this.distanceTolerance));return!0},"~A");d(b,"findInversionCenter",function(){if(this.haveInversionCenter=this.checkOperation(null,this.center,-1))this.axes[1]=Array(1),this.axes[1][0]=ma(JS.PointGroup.Operation,this,null)});d(b,"checkOperation",function(a,c,f){var b=new JU.P3,d=0;f=14>f;var e=this.points.length,g=e;a:for(;0<=--g&&d<e;)if(g!=this.centerAtomIndex){var j=this.points[g],m=this.elements[g];null!=a?(b.sub2(j,c),a.transform2(b,b).add(c)):b.setT(j);f&&(this.vTemp.sub2(c,b),b.scaleAdd2(2,
this.vTemp,b));if((null!=a||f)&&b.distanceSquared(j)<this.distanceTolerance2)d++;else{for(this.iter.initialize(b,this.distanceTolerance,!1);this.iter.hasMoreElements();){var k=this.iter.nextElement();if(k!==j){var q=this.getPointIndex(k.i);if(!(0<=this.centerAtomIndex&&q==this.centerAtomIndex||q>=this.elements.length||this.elements[q]!=m)&&b.distanceSquared(k)<this.distanceTolerance2){d++;continue a}}}return!1}}return!0},"JU.Quat,JU.T3,~N");d(b,"getPointIndex",function(a){return(0>a?-a:this.atomMap[a])-
1},"~N");d(b,"isLinear",function(a){var c=null;if(2>a.length)return!1;for(var f=a.length;0<=--f;)if(f!=this.centerAtomIndex)if(null==c)c=new JU.V3,c.sub2(a[f],this.center),c.normalize(),this.vTemp.setT(c);else if(this.vTemp.sub2(a[f],this.center),this.vTemp.normalize(),!this.isParallel(c,this.vTemp))return!1;return!0},"~A");d(b,"isParallel",function(a,c){return Math.abs(a.dot(c))>=this.cosTolerance},"JU.V3,JU.V3");d(b,"isPerpendicular",function(a,c){return Math.abs(a.dot(c))<=1-this.cosTolerance},
"JU.V3,JU.V3");d(b,"getElementCounts",function(){for(var a=this.points.length;0<=--a;){var c=this.elements[a];c>this.maxElement&&(this.maxElement=c)}this.eCounts=M(++this.maxElement,0);for(a=this.points.length;0<=--a;)this.eCounts[this.elements[a]]++});d(b,"findCAxes",function(){for(var a=new JU.V3,c=new JU.V3,f=new JU.V3,b=this.points.length;0<=--b;)if(b!=this.centerAtomIndex)for(var d=this.points[b],e=this.elements[b],g=this.points.length;--g>b;){var j=this.points[g];if(this.elements[g]==e)if(a.sub2(d,
this.center),c.sub2(j,this.center),a.normalize(),c.normalize(),this.isParallel(a,c))this.getAllAxes(a);else{this.nAxes[16]<JS.PointGroup.axesMaxN[16]&&(f.ave(d,j),f.sub(this.center),this.getAllAxes(f));var j=6.283185307179586/a.angle(c),m=H(Math.floor(j+0.01));if(0.02>=j-m&&!((m+=14)>=JS.PointGroup.maxAxis)&&this.nAxes[m]<JS.PointGroup.axesMaxN[m])f.cross(a,c),this.checkAxisOrder(m,f,this.center)}}d=Array(2*this.nAxes[16]);for(b=0;b<d.length;b++)d[b]=new JU.V3;for(b=g=0;b<this.nAxes[16];b++)d[g++].setT(this.axes[16][b].normalOrAxis),
d[g].setT(this.axes[16][b].normalOrAxis),d[g++].scale(-1);for(b=d.length;2<=--b;)for(g=b;1<=--g;)for(e=g;0<=--e;)f.add2(d[b],d[g]),f.add(d[e]),1>f.length()||this.checkAxisOrder(17,f,this.center);g=2147483647;d=-1;for(b=0;b<this.maxElement;b++)this.eCounts[b]<g&&2<this.eCounts[b]&&(g=this.eCounts[b],d=b);b=0;a:for(;b<this.points.length-2;b++)if(this.elements[b]==d)for(g=b+1;g<this.points.length-1;g++)if(this.elements[g]==d)for(e=g+1;e<this.points.length;e++)if(this.elements[e]==d&&(a.sub2(this.points[b],
this.points[g]),c.sub2(this.points[b],this.points[e]),a.normalize(),c.normalize(),f.cross(a,c),this.getAllAxes(f),a.add2(this.points[b],this.points[g]),a.add(this.points[e]),a.normalize(),this.isParallel(a,f)||this.getAllAxes(a),this.nAxes[19]==JS.PointGroup.axesMaxN[19]))break a;d=Array(this.maxElement);for(b=this.points.length;0<=--b;){e=this.elements[b];if(null==d[e])d[e]=new JU.V3;else if(this.haveInversionCenter)continue;d[e].add(this.points[b])}if(!this.haveInversionCenter)for(b=0;b<this.maxElement;b++)null!=
d[b]&&d[b].scale(1/this.eCounts[b]);for(b=0;b<this.maxElement;b++)if(null!=d[b])for(g=0;g<this.maxElement;g++)b==g||null==d[g]||(this.haveInversionCenter?a.cross(d[b],d[g]):a.sub2(d[b],d[g]),this.checkAxisOrder(16,a,this.center));return this.getHighestOrder()});d(b,"getAllAxes",function(a){for(var c=16;c<JS.PointGroup.maxAxis;c++)this.nAxes[c]<JS.PointGroup.axesMaxN[c]&&this.checkAxisOrder(c,a,this.center)},"JU.V3");d(b,"getHighestOrder",function(){for(var a=0,a=14;1<--a&&0==this.nAxes[a];);if(1<
a)return a+14<JS.PointGroup.maxAxis&&0<this.nAxes[a+14]?a+14:a;for(a=JS.PointGroup.maxAxis;1<--a&&0==this.nAxes[a];);return a});d(b,"checkAxisOrder",function(a,c,f){switch(a){case 22:if(0<this.nAxes[17])return!1;case 20:case 18:if(0<this.nAxes[19])return!1;break;case 17:if(0<this.nAxes[22])return!1;break;case 19:if(0<this.nAxes[18]||0<this.nAxes[20]||0<this.nAxes[22])return!1}c.normalize();if(this.haveAxis(a,c))return!1;var b=JS.PointGroup.getQuaternion(c,a);if(!this.checkOperation(b,f,a))return!1;
this.addAxis(a,c);switch(a){case 16:this.checkAxisOrder(4,c,f);break;case 17:this.checkAxisOrder(3,c,f);this.haveInversionCenter&&this.addAxis(6,c);break;case 18:this.addAxis(16,c);this.checkAxisOrder(4,c,f);this.checkAxisOrder(8,c,f);break;case 19:this.checkAxisOrder(5,c,f);this.haveInversionCenter&&this.addAxis(10,c);break;case 20:this.addAxis(16,c);this.addAxis(17,c);this.checkAxisOrder(3,c,f);this.checkAxisOrder(6,c,f);this.checkAxisOrder(12,c,f);break;case 22:this.addAxis(16,c),this.addAxis(18,
c)}return!0},"~N,JU.V3,JU.T3");d(b,"addAxis",function(a,c){this.haveAxis(a,c)||(null==this.axes[a]&&(this.axes[a]=Array(JS.PointGroup.axesMaxN[a])),this.axes[a][this.nAxes[a]++]=ma(JS.PointGroup.Operation,this,null,c,a))},"~N,JU.V3");d(b,"haveAxis",function(a,c){if(this.nAxes[a]==JS.PointGroup.axesMaxN[a])return!0;if(0<this.nAxes[a])for(var f=this.nAxes[a];0<=--f;)if(this.isParallel(c,this.axes[a][f].normalOrAxis))return!0;return!1},"~N,JU.V3");d(b,"findPlanes",function(){for(var a=new JU.P3,c=new JU.V3,
f=new JU.V3,b=new JU.V3,d=0,e=1<this.getHighestOrder(),g=this.points.length;0<=--g;)if(g!=this.centerAtomIndex)for(var j=this.points[g],m=this.elements[g],k=this.points.length;--k>g;)if(!(e&&this.elements[k]!=m)&&(d=this.points[k],a.add2(j,d),a.scale(0.5),c.sub2(j,this.center),f.sub2(d,this.center),c.normalize(),f.normalize(),this.isParallel(c,f)||(b.cross(c,f),b.normalize(),this.getPlane(b)),b.sub2(d,j),b.normalize(),d=this.getPlane(b),d==JS.PointGroup.axesMaxN[0]))return d;if(e)for(g=16;g<JS.PointGroup.maxAxis;g++)for(k=
0;k<this.nAxes[g];k++)d=this.getPlane(this.axes[g][k].normalOrAxis);return d});d(b,"getPlane",function(a){!this.haveAxis(0,a)&&this.checkOperation(JU.Quat.newVA(a,180),this.center,-1)&&(this.axes[0][this.nAxes[0]++]=ma(JS.PointGroup.Operation,this,null,a));return this.nAxes[0]},"JU.V3");d(b,"findAdditionalAxes",function(a){var c=this.axes[0],f=0;if(1<a&&(f=a+14)<JS.PointGroup.maxAxis&&0==this.nAxes[f])this.vTemp.cross(c[0].normalOrAxis,c[1].normalOrAxis),!this.checkAxisOrder(f,this.vTemp,this.center)&&
2<a&&(this.vTemp.cross(c[1].normalOrAxis,c[2].normalOrAxis),this.checkAxisOrder(f-1,this.vTemp,this.center));if(0==this.nAxes[16]&&2<a)for(f=0;f<a-1;f++)for(var b=f+1;b<a;b++)this.vTemp.add2(c[1].normalOrAxis,c[2].normalOrAxis),this.checkAxisOrder(16,this.vTemp,this.center)},"~N");b.getQuaternion=d(b,"getQuaternion",function(a,c){return JU.Quat.newVA(a,(14>c?180:0)+(0==c?0:H(360/(c%14))))},"JU.V3,~N");d(b,"getInfo",function(a,c,f,b,d,e){var g=null!=c;this.info=f?new java.util.Hashtable:null;var j=
new JU.V3,m;0==e&&(e=1);this.scale=e;for(var k=M(4,2,0),q=1;q<JS.PointGroup.maxAxis;q++)for(var p=this.nAxes[q];0<=--p;)k[this.axes[q][p].type][0]++;var r=(new JU.SB).append("# ").appendI(this.nAtoms).append(" atoms\n"),n=this.getConventionalName(this.name);if(g){c="draw "+c;this.drawType=b=(f=null!=b&&0<b.length)?b:"";this.drawIndex=d;var t=b.equalsIgnoreCase(this.getConventionalName("Cn")),s=b.equalsIgnoreCase(this.getConventionalName("Sn"));r.append("set perspectivedepth off;\n");var v="_"+a+"_";
f||r.append(c+"pg0").append(v).append("* delete;draw pgva").append(v).append("* delete;draw pgvp").append(v).append("* delete;");if(!f||b.equalsIgnoreCase("Ci"))r.append(c+"pg0").append(v).append(this.haveInversionCenter?"inv ":" ").append(JU.Escape.eP(this.center)).append(this.haveInversionCenter?'"i";\n':";\n");for(var x=0.1,q=2;q<JS.PointGroup.maxAxis;q++)if(14==q&&(x=0.1),0!=this.nAxes[q]){a=!this.$isLinear?this.axes[q][0].getLabel(!1):"C_infinity";var g=!this.$isLinear?this.axes[q][0].getLabel(!0):
"C_infinity",x=x+0.25,u=1.05*e*this.radius+80*x/this.sppa,p=14<=q;if(!f||b.equalsIgnoreCase(g)||t&&p||s&&!p)for(p=0;p<this.nAxes[q];p++)if(!(0<d&&p+1!=d)){m=this.axes[q][p];j.add2(m.normalOrAxis,this.center);r.append(c+"pgva").append(v).append(a).append("_").appendI(p+1).append(" width 0.05 scale ").appendF(2==m.type?-u:u).append(" ").append(JU.Escape.eP(j));j.scaleAdd2(-2,m.normalOrAxis,j);var R=!this.$isLinear&&null!=this.principalAxis&&m.index==this.principalAxis.index;r.append(JU.Escape.eP(j)).append('"').append(g).append("").append('" color ').append(R?
"red":2==m.type?"blue":"orange").append(";\n")}}if(!f||b.equalsIgnoreCase(this.getConventionalName("Cs")))for(p=0;p<this.nAxes[0];p++)0<d&&p+1!=d||(m=this.axes[0][p],r.append(c+"pgvp").append(v).appendI(p+1).append("disk scale ").appendF(2*e*this.radius).append(" CIRCLE PLANE ").append(JU.Escape.eP(this.center)),j.add2(m.normalOrAxis,this.center),r.append(JU.Escape.eP(j)).append(" color translucent yellow;\n"),j.add2(m.normalOrAxis,this.center),r.append(c+"pgvp").append(v).appendI(p+1).append("ring width 0.05 scale ").appendF(2*
e*this.radius).append(" arc ").append(JU.Escape.eP(j)),j.scaleAdd2(-2,m.normalOrAxis,j),r.append(JU.Escape.eP(j)),j.add3(0.011,0.012,0.013),r.append(JU.Escape.eP(j)).append("{0 360 0.5} color ").append(null!=this.principalPlane&&m.index==this.principalPlane.index?"red":"blue").append(";\n"));r.append("# name=").append(n);r.append(", n"+this.getConventionalName("Ci")+"=").appendI(this.haveInversionCenter?1:0);r.append(", n"+this.getConventionalName("Cs")+"=").appendI(this.nAxes[0]);r.append(", n"+
this.getConventionalName("Cn")+"=").appendI(k[1][0]);r.append(", n"+this.getConventionalName("Sn")+"=").appendI(k[2][0]);r.append(": ");for(q=JS.PointGroup.maxAxis;2<=--q;)0<this.nAxes[q]&&(k=this.getConventionalName((14>q?"S":"C")+q%14),r.append(" n").append(k),r.append("=").appendI(this.nAxes[q]));r.append(";\n");r.append("print '"+n+"';\n");this.drawInfo=r.toString();JU.Logger.debugging&&JU.Logger.info(this.drawInfo);return this.drawInfo}p=0;c=1;b=0;q=this.haveInversionCenter?this.getConventionalName("Ci"):
"center";this.haveInversionCenter&&(c++,b++);f?null!=this.center&&(this.info.put(q,this.center),this.haveInversionCenter&&this.info.put("center",this.center),this.info.put(q,this.center)):r.append("\n\n").append(n).append("\t").append(q).append("\t").append(JU.Escape.eP(this.center));for(q=JS.PointGroup.maxAxis;0<=--q;)if(0<this.nAxes[q]){p=JS.PointGroup.nUnique[q];g=this.axes[q][0].getLabel(!0);a=this.axes[q][0].getLabel(!1);f?this.info.put("n"+a,Integer.$valueOf(this.nAxes[q])):r.append("\n\n").append(n).append("\tn").append(g).append("\t").appendI(this.nAxes[q]).append("\t").appendI(p);
p*=this.nAxes[q];c+=p;b+=this.nAxes[q];k[this.axes[q][0].type][1]+=p;g=f?new JU.Lst:null;d=f?new JU.Lst:null;for(p=0;p<this.nAxes[q];p++)e=this.axes[q][p],f?(g.addLast(e.normalOrAxis),d.addLast(e.getM3())):r.append("\n").append(n).append("\t").append(a).append("_").appendI(p+1).append("\t").appendO(e.normalOrAxis);f&&(this.info.put(a,g),this.info.put(a+"_m",d))}if(!f)return r.append("\n"),r.append("\n").append(n).append("\ttype\tnElements\tnUnique"),r.append("\n").append(n).append("\t"+this.getConventionalName("E")+
"\t  1\t  1"),p=this.haveInversionCenter?1:0,r.append("\n").append(n).append("\t"+this.getConventionalName("Ci")+"\t  ").appendI(p).append("\t  ").appendI(p),r.append("\n").append(n).append("\t"+this.getConventionalName("Cs")+"\t"),JU.PT.rightJustify(r,"    ",this.nAxes[0]+"\t"),JU.PT.rightJustify(r,"    ",this.nAxes[0]+"\n"),r.append(n).append("\t"+this.getConventionalName("Cn")+"\t"),JU.PT.rightJustify(r,"    ",k[1][0]+"\t"),JU.PT.rightJustify(r,"    ",k[1][1]+"\n"),r.append(n).append("\t"+this.getConventionalName("Sn")+
"\t"),JU.PT.rightJustify(r,"    ",k[2][0]+"\t"),JU.PT.rightJustify(r,"    ",k[2][1]+"\n"),r.append(n).append("\t\tTOTAL\t"),JU.PT.rightJustify(r,"    ",c+"\n"),this.textInfo=r.toString();this.info.put("name",this.name);this.info.put("hmName",this.getHermannMauguinName());this.info.put("nAtoms",Integer.$valueOf(this.nAtoms));this.info.put("nTotal",Integer.$valueOf(c));this.info.put("nElements",Integer.$valueOf(b));this.info.put("nCi",Integer.$valueOf(this.haveInversionCenter?1:0));this.haveInversionCenter&&
this.info.put("Ci_m",JU.M3.newM3(JS.PointGroup.mInv));this.info.put("nCs",Integer.$valueOf(this.nAxes[0]));this.info.put("nCn",Integer.$valueOf(k[1][0]));this.info.put("nSn",Integer.$valueOf(k[2][0]));this.info.put("distanceTolerance",Float.$valueOf(this.distanceTolerance));this.info.put("linearTolerance",Float.$valueOf(this.linearTolerance));this.info.put("points",this.points);this.info.put("detail",r.toString().$replace("\n",";"));null!=this.principalAxis&&0<this.principalAxis.index&&this.info.put("principalAxis",
this.principalAxis.normalOrAxis);null!=this.principalPlane&&0<this.principalPlane.index&&this.info.put("principalPlane",this.principalPlane.normalOrAxis);return this.info},"~N,~S,~B,~S,~N,~N");d(b,"isDrawType",function(a,c,f){return null!=this.drawInfo&&this.drawType.equals(null==a?"":a)&&this.drawIndex==c&&this.scale==f},"~S,~N,~N");b.getHMfromSFName=d(b,"getHMfromSFName",function(a){if(null==JS.PointGroup.htSFToHM){JS.PointGroup.htSFToHM=new java.util.Hashtable;var c=JS.PointGroup.SF2HM;JS.PointGroup.addNames("E",
"1");JS.PointGroup.addNames("Ci","-1");JS.PointGroup.addNames("Cn","n");JS.PointGroup.addNames("Sn","-n");for(var f=0;f<c.length;f++){var b=c[f].$plit(","),d=b[0];if(2==b.length)JS.PointGroup.addNames(d,b[1]);else{for(var e=d.substring(0,1),d=d.substring(2,d.length),g=1;13>g;g++){var j=b[g];0<j.length&&(JS.PointGroup.addNames(e+g+d,j),System.out.println(e+g+d+"\t"+j))}14==b.length&&JS.PointGroup.addNames(e+"\u221e"+d,b[13])}}}c=JS.PointGroup.htSFToHM.get(a);return null==c?a:c},"~S");b.addNames=d(b,
"addNames",function(a,c){JS.PointGroup.htSFToHM.put(a,c);JS.PointGroup.htSFToHM.put(c,a)},"~S,~S");b.$PointGroup$Operation$=function(){var a=O(function(){ta(this,arguments);this.index=this.order=this.type=0;this.normalOrAxis=null;this.typeOrder=0;this.mat=null;aa(this,arguments)},JS.PointGroup,"Operation",null);ga(a,function(){this.index=++this.b$["JS.PointGroup"].nOps;this.type=3;this.typeOrder=this.order=1;JU.Logger.debugging&&JU.Logger.debug("new operation -- "+JS.PointGroup.typeNames[this.type])});
ga(a,function(a,f){this.index=++this.b$["JS.PointGroup"].nOps;this.type=14>f?2:1;this.typeOrder=f;this.order=f%14;this.normalOrAxis=JU.Quat.newVA(a,180).getNormal();JU.Logger.debugging&&JU.Logger.debug("new operation -- "+(this.order==f?"S":"C")+this.order+" "+this.normalOrAxis)},"JU.V3,~N");ga(a,function(a){null!=a&&(this.index=++this.b$["JS.PointGroup"].nOps,this.type=0,this.normalOrAxis=JU.Quat.newVA(a,180).getNormal(),JU.Logger.debugging&&JU.Logger.debug("new operation -- plane "+this.normalOrAxis))},
"JU.V3");d(a,"getLabel",function(a){var f;switch(this.type){case 0:f="Cs";break;case 2:f="S"+this.order;break;default:f="C"+this.order}return a?this.b$["JS.PointGroup"].getConventionalName(f):f},"~B");d(a,"getM3",function(){if(null!=this.mat)return this.mat;var a=JU.M3.newM3(JS.PointGroup.getQuaternion(this.normalOrAxis,this.typeOrder).getMatrix());(0==this.type||2==this.type)&&a.mul(JS.PointGroup.mInv);this.cleanMatrix(a);return this.mat=a});d(a,"cleanMatrix",function(a){for(var f=0;3>f;f++)for(var b=
0;3>b;b++)a.setElement(f,b,this.approx0(a.getElement(f,b)))},"JU.M3");d(a,"approx0",function(a){return 1E-15<a||-1E-15>a?a:0},"~N");n(a,"toString",function(){return this.getLabel(!1)+" "+this.normalOrAxis})};b.axesMaxN=M(-1,[15,0,0,1,3,1,10,0,1,0,6,0,1,0,0,0,15,10,6,6,10,0,1]);b.nUnique=M(-1,[1,0,0,2,2,4,2,0,4,0,4,0,4,0,0,0,1,2,2,4,2,0,4]);b.maxAxis=JS.PointGroup.axesMaxN.length;b.typeNames=Q(-1,["plane","proper axis","improper axis","center of inversion"]);b.mInv=JU.M3.newA9(y(-1,[-1,0,0,0,-1,0,
0,0,-1]));b.SF2HM="Cn,1,2,3,4,5,6,7,8,9,10,11,12|Cnv,m,2m,3m,4mm,5m,6mm,7m,8mm,9m,10mm,11m,12mm,\u221em|Sn,,-1,-6,-4,(-10),-3,(-14),-8,(-18),-5,(-22),(-12)|Cnh,m,2/m,-6,4/m,-10,6/m,-14,8/m,-18,10/m,-22,12/m|Dn,,222,32,422,52,622,72,822,92,(10)22,(11)2,(12)22|Dnd,,-42m,-3m,-82m,-5m,(-12)2m,-7m,(-16)2m,-9m,(-20)2m,(-11)m,(-24)2m|Dnh,,mmm,-6m2,4/mmm,(-10)m2,6/mmm,(-14)m2,8/mmm,(-18)m2,10/mmm,(-22)m2,12/mmm,\u221e/mm|Ci,-1|Cs,m|T,23|Th,m-3|Td,-43m|O,432|Oh,m-3m".$plit("\\|");b.htSFToHM=null});X("JS");
ba(["java.util.Hashtable"],"JS.SpaceGroup","java.util.Arrays JU.AU $.Lst $.M4 $.P3 $.PT $.SB JS.HallInfo $.HallTranslation $.SymmetryOperation JU.Logger".split(" "),function(){var b=O(function(){this.xyzList=this.allOperations=this.finalOperations=this.operations=null;this.index=0;this.derivedIndex=-1;this.isSSG=!1;this.name="unknown!";this.hmSymbolAbbrShort=this.hmSymbolAlternative=this.hmSymbolAbbr=this.hmSymbolExt=this.hmSymbolFull=this.hmSymbol=this.crystalClass=this.hallSymbol=null;this.axisChoice=
this.uniqueAxis=this.ambiguityType="\x00";this.hallInfo=this.intlTableNumberExt=this.intlTableNumberFull=this.intlTableNumber=null;this.operationCount=this.latticeParameter=0;this.latticeOp=-1;this.modDim=0;this.doNormalize=!0;this.isBilbao=this.isBio=!1;this.latticeType="P";this.info=this.nHallOperators=null;aa(this,arguments)},JS,"SpaceGroup",null,Cloneable);ga(b,function(a,c,f){++JS.SpaceGroup.sgIndex;0>a&&(a=JS.SpaceGroup.sgIndex);this.index=a;this.init(f&&null==c);f&&null!=c&&this.buildSpaceGroup(c)},
"~N,~S,~B");d(b,"cloneInfoTo",function(a){try{var c=this.clone();c.operations=a.operations;c.finalOperations=a.finalOperations;c.xyzList=a.xyzList;return c}catch(f){if(fa(f,"CloneNotSupportedException"))return null;throw f;}},"JS.SpaceGroup");d(b,"getIndex",function(){return 0<=this.derivedIndex?this.derivedIndex:this.index});b.getNull=d(b,"getNull",function(a,c,f){JS.SpaceGroup.getSpaceGroups();a=new JS.SpaceGroup(-1,null,a);a.doNormalize=c;f&&a.setFinalOperations();return a},"~B,~B,~B");d(b,"init",
function(a){this.xyzList=new java.util.Hashtable;this.operationCount=0;a&&this.addSymmetry("x,y,z",0,!1)},"~B");b.createSpaceGroup=d(b,"createSpaceGroup",function(a,c,f,b){var d=null;0<=a?d=JS.SpaceGroup.getSpaceGroups()[a]:(d=W(f,"JU.Lst")?JS.SpaceGroup.createSGFromList(c,f):JS.SpaceGroup.determineSpaceGroupNA(c,f),null==d&&(d=JS.SpaceGroup.createSpaceGroupN(0>=b?c:"x1,x2,x3,x4,x5,x6,x7,x8,x9".substring(0,3*b+8))));null!=d&&d.generateAllOperators(null);return d},"~N,~S,~O,~N");b.createSGFromList=
d(b,"createSGFromList",function(a,c){var f=new JS.SpaceGroup(-1,"0;0;--;--;--",!0);f.doNormalize=!1;f.name=a;for(var b=c.size(),d=0;d<b;d++){var e=c.get(d);if(W(e,"JS.SymmetryOperation")){var g=f.addOp(e,e.xyz,!1);f.operations[g].setTimeReversal(e.timeReversal)}else f.addSymmetrySM("xyz matrix:"+e,e)}b=f.getDerivedSpaceGroup();null!=b&&(f=b);return f},"~S,JU.Lst");d(b,"addSymmetry",function(a,c,f){a=a.toLowerCase();return 0>a.indexOf("[[")&&0>a.indexOf("x4")&&0>a.indexOf(";")&&(0>a.indexOf("x")||
0>a.indexOf("y")||0>a.indexOf("z"))?-1:this.addOperation(a,c,f)},"~S,~N,~B");d(b,"setFinalOperations",function(){this.setFinalOperationsForAtoms(3,null,0,0,!1)});d(b,"setFinalOperationsForAtoms",function(a,c,f,b,d){if(null==this.hallInfo&&0!=this.latticeParameter){var e=new JS.HallInfo(JS.HallTranslation.getHallLatticeEquivalent(this.latticeParameter));this.generateAllOperators(e)}this.finalOperations=null;this.isBio=0<=this.name.indexOf("bio");this.index>=JS.SpaceGroup.getSpaceGroups().length&&(!this.isBio&&
0>this.name.indexOf("SSG:")&&0>this.name.indexOf("[subsystem"))&&(e=this.getDerivedSpaceGroup(),null!=e&&(this.name=e.getName(),this.latticeType=e.latticeType,this.intlTableNumber=e.intlTableNumber,this.intlTableNumberExt=e.intlTableNumberExt,this.intlTableNumberFull=e.intlTableNumberFull,this.hallSymbol=e.hallSymbol,this.hmSymbolFull=e.hmSymbolFull,this.derivedIndex=e.index));0==this.operationCount&&this.addOperation("x,y,z",1,!1);this.finalOperations=Array(this.operationCount);var e=null,g=d&&0<
b&&null!=c;if(g){e=this.finalOperations[0]=new JS.SymmetryOperation(this.operations[0],0,!0);null==e.sigma&&JS.SymmetryOperation.normalizeOperationToCentroid(a,e,c,f,b);var j=c[f],m=JU.P3.newP(j);e.rotTrans(m);if(1E-4<m.distance(j))for(var k=0;k<b;k++)j=c[f+k],m.setT(j),e.rotTrans(m),j.setT(m);d||(e=null)}for(k=0;k<this.operationCount;k++){if(0<k||null==e)e=this.finalOperations[k]=new JS.SymmetryOperation(this.operations[k],0,d);g&&null==e.sigma&&JS.SymmetryOperation.normalizeOperationToCentroid(a,
e,c,f,b);e.getCentering()}},"~N,~A,~N,~N,~B");d(b,"getOperationCount",function(){null==this.finalOperations&&this.setFinalOperations();return this.finalOperations.length});d(b,"getOperation",function(a){return this.finalOperations[a]},"~N");d(b,"getAdditionalOperationsCount",function(){null==this.finalOperations&&this.setFinalOperations();null==this.allOperations&&(this.allOperations=JS.SymmetryOperation.getAdditionalOperations(this.finalOperations));return this.allOperations.length-this.getOperationCount()});
d(b,"getAdditionalOperations",function(){this.getAdditionalOperationsCount();return this.allOperations});d(b,"getAllOperation",function(a){return this.allOperations[a]},"~N");d(b,"getXyz",function(a,c){return null==this.finalOperations?this.operations[a].getXyz(c):this.finalOperations[a].getXyz(c)},"~N,~B");b.getInfo=d(b,"getInfo",function(a,c,f,b,d){try{if(null!=a&&a.index>=JS.SpaceGroup.SG.length){var e=JS.SpaceGroup.findSpaceGroup(a.operationCount,a.getCanonicalSeitzList());null!=e&&(a=e)}if(null!=
f){if(null==a){0<=c.indexOf("[")&&(c=c.substring(0,c.indexOf("[")).trim());if(c.equals("unspecified!"))return"no space group identified in file";a=JS.SpaceGroup.determineSpaceGroupNA(c,f)}}else{if(c.equalsIgnoreCase("ALL"))return JS.SpaceGroup.dumpAll(b);if(c.equalsIgnoreCase("MAP"))return JS.SpaceGroup.dumpAll(!0);if(c.equalsIgnoreCase("ALLSEITZ"))return JS.SpaceGroup.dumpAllSeitz();a=JS.SpaceGroup.determineSpaceGroupN(c)}if(null==a){var g=JS.SpaceGroup.createSpaceGroupN(c);null!=g&&(g=JS.SpaceGroup.findSpaceGroup(g.operationCount,
g.getCanonicalSeitzList()));null!=g&&(a=g)}if(null!=a){if(b)return a.dumpInfoObj();for(var j=new JU.SB;null!=a;){j.append(a.dumpInfo());if(a.index>=JS.SpaceGroup.SG.length||!d)break;a=JS.SpaceGroup.determineSpaceGroupNS(c,a)}return j.toString()}return b?null:"?"}catch(m){if(fa(m,Exception))return"?";throw m;}},"JS.SpaceGroup,~S,~A,~B,~B");d(b,"dumpInfo",function(){var a=this.dumpCanonicalSeitzList();if(W(a,"JS.SpaceGroup"))return a.dumpInfo();a=(new JU.SB).append("\nHermann-Mauguin symbol: ");null==
this.hmSymbol||null==this.hmSymbolExt?a.append("?"):a.append(this.hmSymbol).append(0<this.hmSymbolExt.length?":"+this.hmSymbolExt:"");null!=this.intlTableNumber&&a.append("\ninternational table number: ").append(this.intlTableNumber).append(0<this.intlTableNumberExt.length?":"+this.intlTableNumberExt:"").append("\ncrystal class: "+this.crystalClass);a.append("\n\n").append(null==this.hallInfo?"Hall symbol unknown":this.hallInfo.dumpInfo());a.append("\n\n").appendI(this.operationCount).append(" operators").append(null!=
this.hallInfo&&!this.hallInfo.hallSymbol.equals("--")?" from Hall symbol "+this.hallInfo.hallSymbol+"  #"+this.intlTableNumberFull:"").append(": ");for(var c=0;c<this.operationCount;c++)a.append("\n").append(this.operations[c].xyz);return a.toString()});d(b,"dumpInfoObj",function(){var a=this.dumpCanonicalSeitzList();if(W(a,"JS.SpaceGroup"))return a.dumpInfoObj();a=new java.util.Hashtable;a.put("HermannMauguinSymbol",null==this.hmSymbol||null==this.hmSymbolExt?"?":this.hmSymbol+(0<this.hmSymbolExt.length?
":"+this.hmSymbolExt:""));null!=this.intlTableNumber&&(a.put("ita",Integer.$valueOf(JU.PT.parseInt(this.intlTableNumber))),a.put("itaFull",this.intlTableNumberFull),a.put("crystalClass",this.crystalClass),a.put("operationCount",Integer.$valueOf(this.operationCount)));for(var c=new JU.Lst,f=0;f<this.operationCount;f++)c.addLast(this.operations[f].xyz);a.put("operationsXYZ",c);a.put("HallSymbol",null==this.hallInfo?"?":this.hallInfo.hallSymbol);return a});d(b,"getName",function(){return this.name});
d(b,"getLatticeDesignation",function(){return JS.HallTranslation.getLatticeDesignation(this.latticeParameter)});d(b,"setLatticeParam",function(a){this.latticeParameter=a;10<a&&(this.latticeParameter=-JS.HallTranslation.getLatticeIndex(JS.HallTranslation.getLatticeCode(a)))},"~N");d(b,"dumpCanonicalSeitzList",function(){null!=this.nHallOperators&&(null==this.hallInfo&&(this.hallInfo=new JS.HallInfo(this.hallSymbol)),this.generateAllOperators(null));var a=this.getCanonicalSeitzList();if(this.index>=
JS.SpaceGroup.SG.length){var c=JS.SpaceGroup.findSpaceGroup(this.operationCount,a);if(null!=c)return c.getCanonicalSeitzList()}return(0<=this.index&&this.index<JS.SpaceGroup.SG.length?this.hallSymbol+" = ":"")+a});d(b,"getDerivedSpaceGroup",function(){if(0<=this.index&&this.index<JS.SpaceGroup.SG.length||0<this.modDim||null==this.operations||0==this.operations.length||0!=this.operations[0].timeReversal)return this;null!=this.finalOperations&&this.setFinalOperations();var a=this.getCanonicalSeitzList();
return null==a?null:JS.SpaceGroup.findSpaceGroup(this.operationCount,a)});d(b,"getCanonicalSeitzList",function(){return JS.SpaceGroup.getCanonicalSeitzForOperations(this.operations,this.operationCount)});b.getCanonicalSeitzForOperations=d(b,"getCanonicalSeitzForOperations",function(a,c){for(var f=Array(c),b=0;b<c;b++)f[b]=JS.SymmetryOperation.dumpSeitz(a[b],!0);java.util.Arrays.sort(f,0,c);for(var d=(new JU.SB).append("\n["),b=0;b<c;b++)d.append(f[b].$replace("\t"," ").$replace("\n"," ")).append("; ");
d.append("]");return d.toString()},"~A,~N");b.findSpaceGroup=d(b,"findSpaceGroup",function(a,c){JS.SpaceGroup.getSpaceGroups();var f=JS.SpaceGroup.htByOpCount.get(Integer.$valueOf(a));if(null!=f)for(var b=0,d=f.size();b<d;b++){var e=f.get(b);if(0<=JS.SpaceGroup.getCanonicalSeitz(e.index).indexOf(c))return JS.SpaceGroup.SG[e.index]}return null},"~N,~S");b.dumpAll=d(b,"dumpAll",function(a){JS.SpaceGroup.getSpaceGroups();if(a){var c=new JU.Lst;for(a=0;a<JS.SpaceGroup.SG.length;a++)c.addLast(JS.SpaceGroup.SG[a].dumpInfoObj());
return c}c=new JU.SB;for(a=0;a<JS.SpaceGroup.SG.length;a++)c.append("\n----------------------\n"+JS.SpaceGroup.SG[a].dumpInfo());return c.toString()},"~B");b.dumpAllSeitz=d(b,"dumpAllSeitz",function(){JS.SpaceGroup.getSpaceGroups();for(var a=new JU.SB,c=0;c<JS.SpaceGroup.SG.length;c++)a.append("\n").appendO(JS.SpaceGroup.getCanonicalSeitz(c));return a.toString()});b.getCanonicalSeitz=d(b,"getCanonicalSeitz",function(a){null==JS.SpaceGroup.canonicalSeitzList&&(JS.SpaceGroup.canonicalSeitzList=Array(JS.SpaceGroup.SG.length));
var c=JS.SpaceGroup.canonicalSeitzList[a];return null==c?JS.SpaceGroup.canonicalSeitzList[a]=JS.SpaceGroup.SG[a].dumpCanonicalSeitzList().toString():c},"~N");d(b,"setLattice",function(a,c){this.latticeParameter=JS.HallTranslation.getLatticeIndex(a);c||(this.latticeParameter=-this.latticeParameter)},"~S,~B");b.createSpaceGroupN=d(b,"createSpaceGroupN",function(a){JS.SpaceGroup.getSpaceGroups();a=a.trim();var c=JS.SpaceGroup.determineSpaceGroupN(a),f;null==c&&(f=new JS.HallInfo(a),0<f.nRotations?(c=
new JS.SpaceGroup(-1,"0;0;--;--;"+a,!0),c.hallInfo=f,c.hallSymbol=f.hallSymbol):0<=a.indexOf(",")&&(c=new JS.SpaceGroup(-1,"0;0;--;--;--",!0),c.doNormalize=!1,c.generateOperatorsFromXyzInfo(a)));null!=c&&c.generateAllOperators(null);return c},"~S");d(b,"addOperation",function(a,c,f){if(null==a||3>a.length)return this.init(!1),-1;a=JU.PT.rep(a," ","");var b="="==a.charAt(0);b&&(a=a.substring(1));var d=this.checkXYZlist(a);if(0<=d)return d;if(a.startsWith("x1,x2,x3,x4")&&0==this.modDim)this.xyzList.clear(),
this.operationCount=0,this.modDim=JU.PT.parseInt(a.substring(a.lastIndexOf("x")+1))-3;else if(0<=a.indexOf("m")&&(a=JU.PT.rep(a,"+m","m"),a.equals("x,y,z,m")||a.equals("x,y,z(mx,my,mz)")))this.xyzList.clear(),this.operationCount=0;c=new JS.SymmetryOperation(null,c,this.doNormalize);if(!c.setMatrixFromXYZ(a,this.modDim,f))return JU.Logger.error("couldn't interpret symmetry operation: "+a),-1;"!"==a.charAt(0)&&(a=a.substring(a.lastIndexOf("!")+1));return this.addOp(c,a,b)},"~S,~N,~B");d(b,"checkXYZlist",
function(a){return this.xyzList.containsKey(a)?this.xyzList.get(a).intValue():-1},"~S");d(b,"addOp",function(a,c,f){var b=a.xyz;if(!f){f=this.checkXYZlist(b);if(0<=f)return f;0>this.latticeOp&&(f=JU.PT.replaceAllCharacters(0<this.modDim?JS.SymmetryOperation.replaceXn(b,this.modDim+3):b,"+123/",""),this.xyzList.containsKey(f+"!")?this.latticeOp=this.operationCount:this.xyzList.put(f+"!",Integer.$valueOf(this.operationCount)));this.xyzList.put(b,Integer.$valueOf(this.operationCount))}b.equals(c)||this.xyzList.put(c,
Integer.$valueOf(this.operationCount));null==this.operations&&(this.operations=Array(4));this.operationCount==this.operations.length&&(this.operations=JU.AU.arrayCopyObject(this.operations,2*this.operationCount));this.operations[this.operationCount++]=a;a.number=this.operationCount;0!=a.timeReversal&&(this.operations[0].timeReversal=1);JU.Logger.debugging&&JU.Logger.debug("\naddOperation "+this.operationCount+a.dumpInfo());return this.operationCount-1},"JS.SymmetryOperation,~S,~B");d(b,"generateOperatorsFromXyzInfo",
function(a){this.init(!0);a=JU.PT.split(a.toLowerCase(),";");for(var c=0;c<a.length;c++)this.addSymmetry(a[c],0,!1)},"~S");d(b,"generateAllOperators",function(a){if(null==a){if(0<this.operationCount)return;a=this.hallInfo;this.operations=Array(4);if(null==this.hallInfo||0==this.hallInfo.nRotations)a=this.hallInfo=new JS.HallInfo(this.hallSymbol);this.setLattice(this.hallInfo.latticeCode,this.hallInfo.isCentrosymmetric);this.init(!0)}switch(a.latticeCode.charCodeAt(0)){case 0:case 83:case 84:case 80:this.latticeType=
"P";break;default:this.latticeType=a.latticeCode}for(var c=new JU.M4,f=new JU.M4,b=Array(7),d=0;7>d;d++)b[d]=new JU.M4;this.operationCount=1;for(d=0;d<a.nRotations;d++){var e=a.rotationTerms[d];c.setM4(e.seitzMatrix12ths);e=e.order;b[0].setIdentity();for(var g=this.operationCount,j=1;j<=e;j++){var m=b[j];m.mul2(c,b[0]);b[0].setM4(m);for(var k=0;k<g;k++){f.mul2(m,this.operations[k]);f.m03=(v(f.m03)+12)%12;f.m13=(v(f.m13)+12)%12;f.m23=(v(f.m23)+12)%12;var q=JS.SymmetryOperation.getXYZFromMatrix(f,!0,
!0,!1);this.addSymmetrySM("!nohalf!"+q,f)}}}null!=this.nHallOperators&&this.operationCount!=this.nHallOperators.intValue()&&JU.Logger.error("Operator mismatch "+this.operationCount+" for "+this)},"JS.HallInfo");d(b,"addSymmetrySM",function(a,c){var f=this.addOperation(a,0,!1);0<=f&&this.operations[f].setM4(c);return f},"~S,JU.M4");b.determineSpaceGroupN=d(b,"determineSpaceGroupN",function(a){return JS.SpaceGroup.determineSpaceGroup(a,0,0,0,0,0,0,-1)},"~S");b.determineSpaceGroupNS=d(b,"determineSpaceGroupNS",
function(a,c){return JS.SpaceGroup.determineSpaceGroup(a,0,0,0,0,0,0,c.index)},"~S,JS.SpaceGroup");b.determineSpaceGroupNA=d(b,"determineSpaceGroupNA",function(a,c){return null==c?JS.SpaceGroup.determineSpaceGroup(a,0,0,0,0,0,0,-1):JS.SpaceGroup.determineSpaceGroup(a,c[0],c[1],c[2],c[3],c[4],c[5],-1)},"~S,~A");b.determineSpaceGroup=d(b,"determineSpaceGroup",function(a,c,f,b,d,e,g,j){a=JS.SpaceGroup.determineSpaceGroupIndex(a,c,f,b,d,e,g,j);return 0<=a?JS.SpaceGroup.SG[a]:null},"~S,~N,~N,~N,~N,~N,~N,~N");
b.isXYZList=d(b,"isXYZList",function(a){return 0<=a.indexOf(",")&&0>a.indexOf("(")},"~S");b.determineSpaceGroupIndex=d(b,"determineSpaceGroupIndex",function(a,c,f,b,d,e,g,j){if(JS.SpaceGroup.isXYZList(a))return-1;JS.SpaceGroup.getSpaceGroups();0>j&&(j=JS.SpaceGroup.SG.length);a=a.trim().toLowerCase();var m=!1;a.startsWith("bilbao:")&&(m=!0,a=a.substring(7));var k=a.indexOf("hall:");0<k&&(a=a.substring(k));var q=a.startsWith("hall:")?5:a.startsWith("hm:")?3:0;switch(q){case 3:case 5:a=a.substring(q);
break;case 0:a.contains("[")&&(q=5,a=a.substring(0,a.indexOf("[")).trim())}var k=a,p,r=!1;a=a.$replace("_"," ");2<=a.length&&(p=0==a.indexOf("-")?2:1,p<a.length&&" "!=a.charAt(p)&&(a=a.substring(0,p)+" "+a.substring(p)),a=JS.SpaceGroup.toCap(a,2));var n="";if(0<(p=a.indexOf(":")))n=a.substring(p+1),a=a.substring(0,p).trim(),r=!0;5!=q&&(!r&&JU.PT.isOneOf(a,JS.SpaceGroup.ambiguousNames))&&(n="?",r=!0);var t=JU.PT.replaceAllCharacters(a," ()",""),s;if(3!=q&&!r)for(p=j;0<=--p;)if(JS.SpaceGroup.SG[p].hallSymbol.equalsIgnoreCase(a))return p;
if(5!=q){if(3!=q)for(p=j;0<=--p;)if(JS.SpaceGroup.SG[p].intlTableNumberFull.equalsIgnoreCase(k))return p;for(p=j;0<=--p;)if(JS.SpaceGroup.SG[p].hmSymbolFull.equalsIgnoreCase(k))return p;for(p=j;0<=--p;)if(null!=(s=JS.SpaceGroup.SG[p]).hmSymbolAlternative&&s.hmSymbolAlternative.equalsIgnoreCase(k))return p;if(r){for(p=j;0<=--p;)if((s=JS.SpaceGroup.SG[p]).hmSymbolAbbr.equalsIgnoreCase(t)&&s.intlTableNumberExt.equalsIgnoreCase(n))return p;for(p=j;0<=--p;)if((s=JS.SpaceGroup.SG[p]).hmSymbolAbbrShort.equalsIgnoreCase(t)&&
s.intlTableNumberExt.equalsIgnoreCase(n))return p}a=JS.SpaceGroup.determineUniqueAxis(c,f,b,d,e,g);if(!r||"?"==n.charAt(0))for(p=0;p<j;p++)if(((s=JS.SpaceGroup.SG[p]).hmSymbolAbbr.equalsIgnoreCase(t)||s.hmSymbolAbbrShort.equalsIgnoreCase(t)||s.intlTableNumber.equals(t))&&(!m||s.isBilbao))switch(s.ambiguityType.charCodeAt(0)){case 0:return p;case 97:if(s.uniqueAxis==a||"\x00"==a)return p;break;case 111:if(0==n.length){if(s.hmSymbolExt.equals("2"))return p}else if(s.hmSymbolExt.equalsIgnoreCase(n))return p;
break;case 116:if(0==n.length){if("h"==s.axisChoice)return p}else if((s.axisChoice+"").equalsIgnoreCase(n))return p}}if(0==n.length)for(p=0;p<j;p++)if((s=JS.SpaceGroup.SG[p]).intlTableNumber.equals(k)&&(!m||s.isBilbao))return p;return-1},"~S,~N,~N,~N,~N,~N,~N,~N");d(b,"setIntlTableNumberFull",function(a){this.intlTableNumberFull=a;a=JU.PT.split(a,":");this.intlTableNumber=a[0];this.intlTableNumberExt=1==a.length?"":a[1];this.ambiguityType="\x00";0<this.intlTableNumberExt.length&&(a=this.intlTableNumberExt.charAt(0),
this.intlTableNumberExt.equals("h")||this.intlTableNumberExt.equals("r")?(this.ambiguityType="t",this.axisChoice=this.intlTableNumberExt.charAt(0)):"1"==a||"2"==a?this.ambiguityType="o":2>=this.intlTableNumberExt.length||3==this.intlTableNumberExt.length&&"-"==a?(this.ambiguityType="a",this.uniqueAxis=this.intlTableNumberExt.charAt("-"==a?1:0)):this.intlTableNumberExt.contains("-")&&(this.ambiguityType="-"))},"~S");b.determineUniqueAxis=d(b,"determineUniqueAxis",function(a,c,f,b,d,e){return a==c?
c==f?"\x00":"c":c==f?"a":f==a?"b":b==d?d==e?"\x00":"c":d==e?"a":e==b?"b":"\x00"},"~N,~N,~N,~N,~N,~N");d(b,"buildSpaceGroup",function(a){a=JU.PT.split(a.toLowerCase(),";");this.intlTableNumberFull=a[0].trim();this.isBilbao=6>a.length&&!this.intlTableNumberFull.equals("0");this.setIntlTableNumberFull(this.intlTableNumberFull);if(!a[1].equals("0")){this.nHallOperators=Integer.$valueOf(a[1]);var c=JS.SpaceGroup.htByOpCount.get(this.nHallOperators);null==c&&JS.SpaceGroup.htByOpCount.put(this.nHallOperators,
c=new JU.Lst);c.addLast(this)}this.crystalClass=JS.SpaceGroup.toCap(JU.PT.split(a[2],"^")[0],1);this.setHMSymbol(a[3]);this.hallSymbol=a[4];1<this.hallSymbol.length&&(this.hallSymbol=JS.SpaceGroup.toCap(this.hallSymbol,2));a=this.intlTableNumber+this.hallSymbol;"0"!=this.intlTableNumber.charAt(0)&&JS.SpaceGroup.lastInfo.equals(a)&&(JS.SpaceGroup.ambiguousNames+=this.hmSymbol+";");JS.SpaceGroup.lastInfo=a;this.name=this.hallSymbol+" ["+this.hmSymbolFull+"] #"+this.intlTableNumber},"~S");d(b,"setHMSymbol",
function(a){this.hmSymbolFull=JS.SpaceGroup.toCap(a,1);this.latticeType=this.hmSymbolFull.charAt(0);a=JU.PT.split(this.hmSymbolFull,":");this.hmSymbol=a[0];this.hmSymbolExt=1==a.length?"":a[1];a=this.hmSymbol.indexOf(" -3");1<=a&&0<="admn".indexOf(this.hmSymbol.charAt(a-1))&&(this.hmSymbolAlternative=(this.hmSymbol.substring(0,a)+" 3"+this.hmSymbol.substring(a+3)).toLowerCase());this.hmSymbolAbbr=JU.PT.rep(this.hmSymbol," ","");this.hmSymbolAbbrShort=JU.PT.rep(this.hmSymbol," 1","");this.hmSymbolAbbrShort=
JU.PT.rep(this.hmSymbolAbbrShort," ","")},"~S");b.toCap=d(b,"toCap",function(a,c){return a.substring(0,c).toUpperCase()+a.substring(c)},"~S,~N");d(b,"toString",function(){return this.asString()});d(b,"asString",function(){return null==this.intlTableNumberFull?this.name:this.intlTableNumberFull+" HM:"+this.hmSymbolFull+" Hall:"+this.hallSymbol});b.getSpaceGroups=d(b,"getSpaceGroups",function(){return null==JS.SpaceGroup.SG?JS.SpaceGroup.SG=JS.SpaceGroup.createSpaceGroups():JS.SpaceGroup.SG});b.createSpaceGroups=
d(b,"createSpaceGroups",function(){var a=JS.SpaceGroup.STR_SG.length;JS.SpaceGroup.nameToGroup=new java.util.Hashtable;for(var c=Array(a),b=0;b<a;b++)c[b]=new JS.SpaceGroup(b,JS.SpaceGroup.STR_SG[b],!0),JS.SpaceGroup.nameToGroup.put(c[b].intlTableNumberFull,c[b]);JS.SpaceGroup.STR_SG=null;return c});d(b,"addLatticeVectors",function(a){if(0<=this.latticeOp||0==a.size())return!1;for(var c=this.latticeOp=this.operationCount,b=a.get(0).length==this.modDim+4,d=-2,l=0;l<a.size();l++){var e=a.get(l);b&&
(d=v(e[this.modDim+3]),e=JU.AU.arrayCopyF(e,this.modDim+3));if(e.length>this.modDim+3)return!1;for(var g=0;g<c;g++){var j=new JS.SymmetryOperation(null,0,!0);j.modDim=this.modDim;var m=this.operations[g];j.divisor=m.divisor;j.linearRotTrans=JU.AU.arrayCopyF(m.linearRotTrans,-1);j.setFromMatrix(e,!1);-2!=d&&j.setTimeReversal(m.timeReversal*d);j.xyzOriginal=j.xyz;this.addOp(j,j.xyz,!0)}}return!0},"JU.Lst");d(b,"getSiteMultiplicity",function(a,c){for(var b=this.finalOperations.length,d=new JU.Lst,l=
b;0<=--l;){var e=JU.P3.newP(a);this.finalOperations[l].rotTrans(e);c.unitize(e);for(var g=d.size();0<=--g;){var j=d.get(g);if(1.96E-6>e.distanceSquared(j)){e=null;break}}null!=e&&d.addLast(e)}return H(b/d.size())},"JU.P3,JS.UnitCell");d(b,"setName",function(a){this.name=a;null!=a&&a.startsWith("HM:")&&this.setHMSymbol(a.substring(3))},"~S");d(b,"getNameType",function(a,c){var b=null,b=a.equals("HM")?this.hmSymbol:a.equals("ITA")?this.intlTableNumber:a.equals("Hall")?this.hallSymbol:"?";if(null!=b)return b;
null==this.info&&(this.info=JS.SpaceGroup.getInfo(this,this.hmSymbol,c.getUnitCellParams(),!0,!1));if("string"==typeof this.info)return null;b=this.info.get(a.equals("Hall")?"HallSymbol":a.equals("ITA")?"ita":"HermannMauguinSymbol");return null==b?null:b.toString()},"~S,J.api.SymmetryInterface");b.getSpaceGroupFromITAName=d(b,"getSpaceGroupFromITAName",function(a){JS.SpaceGroup.getSpaceGroups();for(var c=JS.SpaceGroup.SG.length,b=0;b<c;b++)if(a.equals(JS.SpaceGroup.SG[b].intlTableNumberFull))return JS.SpaceGroup.SG[b];
for(b=0;b<c;b++)if(a.equals(JS.SpaceGroup.SG[b].intlTableNumber))return JS.SpaceGroup.SG[b];return null},"~S");d(b,"checkHallOperators",function(){null!=this.nHallOperators&&this.nHallOperators.intValue()!=this.operationCount&&this.generateAllOperators(this.hallInfo)});b.getSpaceGroupFromIndex=d(b,"getSpaceGroupFromIndex",function(a){return null!=JS.SpaceGroup.SG&&0<=a&&a<JS.SpaceGroup.SG.length?JS.SpaceGroup.SG[a]:null},"~N");b.canonicalSeitzList=null;b.sgIndex=-1;b.ambiguousNames="";b.lastInfo=
"";b.SG=null;b.htByOpCount=new java.util.Hashtable;b.nameToGroup=null;b.STR_SG=Q(-1,'1;1;c1^1;p 1;p 1,2;2;ci^1;p -1;-p 1,3:b;2;c2^1;p 1 2 1;p 2y,3:b;2;c2^1;p 2;p 2y,3:c;2;c2^1;p 1 1 2;p 2,3:a;2;c2^1;p 2 1 1;p 2x,4:b;2;c2^2;p 1 21 1;p 2yb,4:b;2;c2^2;p 21;p 2yb,4:b*;2;c2^2;p 1 21 1*;p 2y1,4:c;2;c2^2;p 1 1 21;p 2c,4:c*;2;c2^2;p 1 1 21*;p 21,4:a;2;c2^2;p 21 1 1;p 2xa,4:a*;2;c2^2;p 21 1 1*;p 2x1,5:b1;4;c2^3;c 1 2 1;c 2y,5:b1;4;c2^3;c 2;c 2y,5:b2;4;c2^3;a 1 2 1;a 2y,5:b3;4;c2^3;i 1 2 1;i 2y,5:c1;4;c2^3;a 1 1 2;a 2,5:c2;4;c2^3;b 1 1 2;b 2,5:c3;4;c2^3;i 1 1 2;i 2,5:a1;4;c2^3;b 2 1 1;b 2x,5:a2;4;c2^3;c 2 1 1;c 2x,5:a3;4;c2^3;i 2 1 1;i 2x,6:b;2;cs^1;p 1 m 1;p -2y,6:b;2;cs^1;p m;p -2y,6:c;2;cs^1;p 1 1 m;p -2,6:a;2;cs^1;p m 1 1;p -2x,7:b1;2;cs^2;p 1 c 1;p -2yc,7:b1;2;cs^2;p c;p -2yc,7:b2;2;cs^2;p 1 n 1;p -2yac,7:b2;2;cs^2;p n;p -2yac,7:b3;2;cs^2;p 1 a 1;p -2ya,7:b3;2;cs^2;p a;p -2ya,7:c1;2;cs^2;p 1 1 a;p -2a,7:c2;2;cs^2;p 1 1 n;p -2ab,7:c3;2;cs^2;p 1 1 b;p -2b,7:a1;2;cs^2;p b 1 1;p -2xb,7:a2;2;cs^2;p n 1 1;p -2xbc,7:a3;2;cs^2;p c 1 1;p -2xc,8:b1;4;cs^3;c 1 m 1;c -2y,8:b1;4;cs^3;c m;c -2y,8:b2;4;cs^3;a 1 m 1;a -2y,8:b3;4;cs^3;i 1 m 1;i -2y,8:b3;4;cs^3;i m;i -2y,8:c1;4;cs^3;a 1 1 m;a -2,8:c2;4;cs^3;b 1 1 m;b -2,8:c3;4;cs^3;i 1 1 m;i -2,8:a1;4;cs^3;b m 1 1;b -2x,8:a2;4;cs^3;c m 1 1;c -2x,8:a3;4;cs^3;i m 1 1;i -2x,9:b1;4;cs^4;c 1 c 1;c -2yc,9:b1;4;cs^4;c c;c -2yc,9:b2;4;cs^4;a 1 n 1;a -2yab,9:b3;4;cs^4;i 1 a 1;i -2ya,9:-b1;4;cs^4;a 1 a 1;a -2ya,9:-b2;4;cs^4;c 1 n 1;c -2yac,9:-b3;4;cs^4;i 1 c 1;i -2yc,9:c1;4;cs^4;a 1 1 a;a -2a,9:c2;4;cs^4;b 1 1 n;b -2ab,9:c3;4;cs^4;i 1 1 b;i -2b,9:-c1;4;cs^4;b 1 1 b;b -2b,9:-c2;4;cs^4;a 1 1 n;a -2ab,9:-c3;4;cs^4;i 1 1 a;i -2a,9:a1;4;cs^4;b b 1 1;b -2xb,9:a2;4;cs^4;c n 1 1;c -2xac,9:a3;4;cs^4;i c 1 1;i -2xc,9:-a1;4;cs^4;c c 1 1;c -2xc,9:-a2;4;cs^4;b n 1 1;b -2xab,9:-a3;4;cs^4;i b 1 1;i -2xb,10:b;4;c2h^1;p 1 2/m 1;-p 2y,10:b;4;c2h^1;p 2/m;-p 2y,10:c;4;c2h^1;p 1 1 2/m;-p 2,10:a;4;c2h^1;p 2/m 1 1;-p 2x,11:b;4;c2h^2;p 1 21/m 1;-p 2yb,11:b;4;c2h^2;p 21/m;-p 2yb,11:b*;4;c2h^2;p 1 21/m 1*;-p 2y1,11:c;4;c2h^2;p 1 1 21/m;-p 2c,11:c*;4;c2h^2;p 1 1 21/m*;-p 21,11:a;4;c2h^2;p 21/m 1 1;-p 2xa,11:a*;4;c2h^2;p 21/m 1 1*;-p 2x1,12:b1;8;c2h^3;c 1 2/m 1;-c 2y,12:b1;8;c2h^3;c 2/m;-c 2y,12:b2;8;c2h^3;a 1 2/m 1;-a 2y,12:b3;8;c2h^3;i 1 2/m 1;-i 2y,12:b3;8;c2h^3;i 2/m;-i 2y,12:c1;8;c2h^3;a 1 1 2/m;-a 2,12:c2;8;c2h^3;b 1 1 2/m;-b 2,12:c3;8;c2h^3;i 1 1 2/m;-i 2,12:a1;8;c2h^3;b 2/m 1 1;-b 2x,12:a2;8;c2h^3;c 2/m 1 1;-c 2x,12:a3;8;c2h^3;i 2/m 1 1;-i 2x,13:b1;4;c2h^4;p 1 2/c 1;-p 2yc,13:b1;4;c2h^4;p 2/c;-p 2yc,13:b2;4;c2h^4;p 1 2/n 1;-p 2yac,13:b2;4;c2h^4;p 2/n;-p 2yac,13:b3;4;c2h^4;p 1 2/a 1;-p 2ya,13:b3;4;c2h^4;p 2/a;-p 2ya,13:c1;4;c2h^4;p 1 1 2/a;-p 2a,13:c2;4;c2h^4;p 1 1 2/n;-p 2ab,13:c3;4;c2h^4;p 1 1 2/b;-p 2b,13:a1;4;c2h^4;p 2/b 1 1;-p 2xb,13:a2;4;c2h^4;p 2/n 1 1;-p 2xbc,13:a3;4;c2h^4;p 2/c 1 1;-p 2xc,14:b1;4;c2h^5;p 1 21/c 1;-p 2ybc,14:b1;4;c2h^5;p 21/c;-p 2ybc,14:b2;4;c2h^5;p 1 21/n 1;-p 2yn,14:b2;4;c2h^5;p 21/n;-p 2yn,14:b3;4;c2h^5;p 1 21/a 1;-p 2yab,14:b3;4;c2h^5;p 21/a;-p 2yab,14:c1;4;c2h^5;p 1 1 21/a;-p 2ac,14:c2;4;c2h^5;p 1 1 21/n;-p 2n,14:c3;4;c2h^5;p 1 1 21/b;-p 2bc,14:a1;4;c2h^5;p 21/b 1 1;-p 2xab,14:a2;4;c2h^5;p 21/n 1 1;-p 2xn,14:a3;4;c2h^5;p 21/c 1 1;-p 2xac,15:b1;8;c2h^6;c 1 2/c 1;-c 2yc,15:b1;8;c2h^6;c 2/c;-c 2yc,15:b2;8;c2h^6;a 1 2/n 1;-a 2yab,15:b3;8;c2h^6;i 1 2/a 1;-i 2ya,15:b3;8;c2h^6;i 2/a;-i 2ya,15:-b1;8;c2h^6;a 1 2/a 1;-a 2ya,15:-b2;8;c2h^6;c 1 2/n 1;-c 2yac,15:-b2;8;c2h^6;c 2/n;-c 2yac,15:-b3;8;c2h^6;i 1 2/c 1;-i 2yc,15:-b3;8;c2h^6;i 2/c;-i 2yc,15:c1;8;c2h^6;a 1 1 2/a;-a 2a,15:c2;8;c2h^6;b 1 1 2/n;-b 2ab,15:c3;8;c2h^6;i 1 1 2/b;-i 2b,15:-c1;8;c2h^6;b 1 1 2/b;-b 2b,15:-c2;8;c2h^6;a 1 1 2/n;-a 2ab,15:-c3;8;c2h^6;i 1 1 2/a;-i 2a,15:a1;8;c2h^6;b 2/b 1 1;-b 2xb,15:a2;8;c2h^6;c 2/n 1 1;-c 2xac,15:a3;8;c2h^6;i 2/c 1 1;-i 2xc,15:-a1;8;c2h^6;c 2/c 1 1;-c 2xc,15:-a2;8;c2h^6;b 2/n 1 1;-b 2xab,15:-a3;8;c2h^6;i 2/b 1 1;-i 2xb,16;4;d2^1;p 2 2 2;p 2 2,17;4;d2^2;p 2 2 21;p 2c 2,17*;4;d2^2;p 2 2 21*;p 21 2,17:cab;4;d2^2;p 21 2 2;p 2a 2a,17:bca;4;d2^2;p 2 21 2;p 2 2b,18;4;d2^3;p 21 21 2;p 2 2ab,18:cab;4;d2^3;p 2 21 21;p 2bc 2,18:bca;4;d2^3;p 21 2 21;p 2ac 2ac,19;4;d2^4;p 21 21 21;p 2ac 2ab,20;8;d2^5;c 2 2 21;c 2c 2,20*;8;d2^5;c 2 2 21*;c 21 2,20:cab;8;d2^5;a 21 2 2;a 2a 2a,20:cab*;8;d2^5;a 21 2 2*;a 2a 21,20:bca;8;d2^5;b 2 21 2;b 2 2b,21;8;d2^6;c 2 2 2;c 2 2,21:cab;8;d2^6;a 2 2 2;a 2 2,21:bca;8;d2^6;b 2 2 2;b 2 2,22;16;d2^7;f 2 2 2;f 2 2,23;8;d2^8;i 2 2 2;i 2 2,24;8;d2^9;i 21 21 21;i 2b 2c,25;4;c2v^1;p m m 2;p 2 -2,25:cab;4;c2v^1;p 2 m m;p -2 2,25:bca;4;c2v^1;p m 2 m;p -2 -2,26;4;c2v^2;p m c 21;p 2c -2,26*;4;c2v^2;p m c 21*;p 21 -2,26:ba-c;4;c2v^2;p c m 21;p 2c -2c,26:ba-c*;4;c2v^2;p c m 21*;p 21 -2c,26:cab;4;c2v^2;p 21 m a;p -2a 2a,26:-cba;4;c2v^2;p 21 a m;p -2 2a,26:bca;4;c2v^2;p b 21 m;p -2 -2b,26:a-cb;4;c2v^2;p m 21 b;p -2b -2,27;4;c2v^3;p c c 2;p 2 -2c,27:cab;4;c2v^3;p 2 a a;p -2a 2,27:bca;4;c2v^3;p b 2 b;p -2b -2b,28;4;c2v^4;p m a 2;p 2 -2a,28*;4;c2v^4;p m a 2*;p 2 -21,28:ba-c;4;c2v^4;p b m 2;p 2 -2b,28:cab;4;c2v^4;p 2 m b;p -2b 2,28:-cba;4;c2v^4;p 2 c m;p -2c 2,28:-cba*;4;c2v^4;p 2 c m*;p -21 2,28:bca;4;c2v^4;p c 2 m;p -2c -2c,28:a-cb;4;c2v^4;p m 2 a;p -2a -2a,29;4;c2v^5;p c a 21;p 2c -2ac,29:ba-c;4;c2v^5;p b c 21;p 2c -2b,29:cab;4;c2v^5;p 21 a b;p -2b 2a,29:-cba;4;c2v^5;p 21 c a;p -2ac 2a,29:bca;4;c2v^5;p c 21 b;p -2bc -2c,29:a-cb;4;c2v^5;p b 21 a;p -2a -2ab,30;4;c2v^6;p n c 2;p 2 -2bc,30:ba-c;4;c2v^6;p c n 2;p 2 -2ac,30:cab;4;c2v^6;p 2 n a;p -2ac 2,30:-cba;4;c2v^6;p 2 a n;p -2ab 2,30:bca;4;c2v^6;p b 2 n;p -2ab -2ab,30:a-cb;4;c2v^6;p n 2 b;p -2bc -2bc,31;4;c2v^7;p m n 21;p 2ac -2,31:ba-c;4;c2v^7;p n m 21;p 2bc -2bc,31:cab;4;c2v^7;p 21 m n;p -2ab 2ab,31:-cba;4;c2v^7;p 21 n m;p -2 2ac,31:bca;4;c2v^7;p n 21 m;p -2 -2bc,31:a-cb;4;c2v^7;p m 21 n;p -2ab -2,32;4;c2v^8;p b a 2;p 2 -2ab,32:cab;4;c2v^8;p 2 c b;p -2bc 2,32:bca;4;c2v^8;p c 2 a;p -2ac -2ac,33;4;c2v^9;p n a 21;p 2c -2n,33*;4;c2v^9;p n a 21*;p 21 -2n,33:ba-c;4;c2v^9;p b n 21;p 2c -2ab,33:ba-c*;4;c2v^9;p b n 21*;p 21 -2ab,33:cab;4;c2v^9;p 21 n b;p -2bc 2a,33:cab*;4;c2v^9;p 21 n b*;p -2bc 21,33:-cba;4;c2v^9;p 21 c n;p -2n 2a,33:-cba*;4;c2v^9;p 21 c n*;p -2n 21,33:bca;4;c2v^9;p c 21 n;p -2n -2ac,33:a-cb;4;c2v^9;p n 21 a;p -2ac -2n,34;4;c2v^10;p n n 2;p 2 -2n,34:cab;4;c2v^10;p 2 n n;p -2n 2,34:bca;4;c2v^10;p n 2 n;p -2n -2n,35;8;c2v^11;c m m 2;c 2 -2,35:cab;8;c2v^11;a 2 m m;a -2 2,35:bca;8;c2v^11;b m 2 m;b -2 -2,36;8;c2v^12;c m c 21;c 2c -2,36*;8;c2v^12;c m c 21*;c 21 -2,36:ba-c;8;c2v^12;c c m 21;c 2c -2c,36:ba-c*;8;c2v^12;c c m 21*;c 21 -2c,36:cab;8;c2v^12;a 21 m a;a -2a 2a,36:cab*;8;c2v^12;a 21 m a*;a -2a 21,36:-cba;8;c2v^12;a 21 a m;a -2 2a,36:-cba*;8;c2v^12;a 21 a m*;a -2 21,36:bca;8;c2v^12;b b 21 m;b -2 -2b,36:a-cb;8;c2v^12;b m 21 b;b -2b -2,37;8;c2v^13;c c c 2;c 2 -2c,37:cab;8;c2v^13;a 2 a a;a -2a 2,37:bca;8;c2v^13;b b 2 b;b -2b -2b,38;8;c2v^14;a m m 2;a 2 -2,38:ba-c;8;c2v^14;b m m 2;b 2 -2,38:cab;8;c2v^14;b 2 m m;b -2 2,38:-cba;8;c2v^14;c 2 m m;c -2 2,38:bca;8;c2v^14;c m 2 m;c -2 -2,38:a-cb;8;c2v^14;a m 2 m;a -2 -2,39;8;c2v^15;a e m 2;a 2 -2b,39;8;c2v^15;a b m 2;a 2 -2b,39:ba-c;8;c2v^15;b m a 2;b 2 -2a,39:cab;8;c2v^15;b 2 c m;b -2a 2,39:-cba;8;c2v^15;c 2 m b;c -2a 2,39:bca;8;c2v^15;c m 2 a;c -2a -2a,39:a-cb;8;c2v^15;a c 2 m;a -2b -2b,40;8;c2v^16;a m a 2;a 2 -2a,40:ba-c;8;c2v^16;b b m 2;b 2 -2b,40:cab;8;c2v^16;b 2 m b;b -2b 2,40:-cba;8;c2v^16;c 2 c m;c -2c 2,40:bca;8;c2v^16;c c 2 m;c -2c -2c,40:a-cb;8;c2v^16;a m 2 a;a -2a -2a,41;8;c2v^17;a e a 2;a 2 -2ab,41;8;c2v^17;a b a 2;a 2 -2ab;-b,41:ba-c;8;c2v^17;b b a 2;b 2 -2ab,41:cab;8;c2v^17;b 2 c b;b -2ab 2,41:-cba;8;c2v^17;c 2 c b;c -2ac 2,41:bca;8;c2v^17;c c 2 a;c -2ac -2ac,41:a-cb;8;c2v^17;a c 2 a;a -2ab -2ab,42;16;c2v^18;f m m 2;f 2 -2,42:cab;16;c2v^18;f 2 m m;f -2 2,42:bca;16;c2v^18;f m 2 m;f -2 -2,43;16;c2v^19;f d d 2;f 2 -2d,43:cab;16;c2v^19;f 2 d d;f -2d 2,43:bca;16;c2v^19;f d 2 d;f -2d -2d,44;8;c2v^20;i m m 2;i 2 -2,44:cab;8;c2v^20;i 2 m m;i -2 2,44:bca;8;c2v^20;i m 2 m;i -2 -2,45;8;c2v^21;i b a 2;i 2 -2c,45:cab;8;c2v^21;i 2 c b;i -2a 2,45:bca;8;c2v^21;i c 2 a;i -2b -2b,46;8;c2v^22;i m a 2;i 2 -2a,46:ba-c;8;c2v^22;i b m 2;i 2 -2b,46:cab;8;c2v^22;i 2 m b;i -2b 2,46:-cba;8;c2v^22;i 2 c m;i -2c 2,46:bca;8;c2v^22;i c 2 m;i -2c -2c,46:a-cb;8;c2v^22;i m 2 a;i -2a -2a,47;8;d2h^1;p m m m;-p 2 2,48:1;8;d2h^2;p n n n:1;p 2 2 -1n;-b,48:2;8;d2h^2;p n n n:2;-p 2ab 2bc,49;8;d2h^3;p c c m;-p 2 2c,49:cab;8;d2h^3;p m a a;-p 2a 2,49:bca;8;d2h^3;p b m b;-p 2b 2b,50:1;8;d2h^4;p b a n:1;p 2 2 -1ab;-b,50:2;8;d2h^4;p b a n:2;-p 2ab 2b,50:1cab;8;d2h^4;p n c b:1;p 2 2 -1bc,50:2cab;8;d2h^4;p n c b:2;-p 2b 2bc,50:1bca;8;d2h^4;p c n a:1;p 2 2 -1ac,50:2bca;8;d2h^4;p c n a:2;-p 2a 2c,51;8;d2h^5;p m m a;-p 2a 2a,51:ba-c;8;d2h^5;p m m b;-p 2b 2,51:cab;8;d2h^5;p b m m;-p 2 2b,51:-cba;8;d2h^5;p c m m;-p 2c 2c,51:bca;8;d2h^5;p m c m;-p 2c 2,51:a-cb;8;d2h^5;p m a m;-p 2 2a,52;8;d2h^6;p n n a;-p 2a 2bc,52:ba-c;8;d2h^6;p n n b;-p 2b 2n,52:cab;8;d2h^6;p b n n;-p 2n 2b,52:-cba;8;d2h^6;p c n n;-p 2ab 2c,52:bca;8;d2h^6;p n c n;-p 2ab 2n,52:a-cb;8;d2h^6;p n a n;-p 2n 2bc,53;8;d2h^7;p m n a;-p 2ac 2,53:ba-c;8;d2h^7;p n m b;-p 2bc 2bc,53:cab;8;d2h^7;p b m n;-p 2ab 2ab,53:-cba;8;d2h^7;p c n m;-p 2 2ac,53:bca;8;d2h^7;p n c m;-p 2 2bc,53:a-cb;8;d2h^7;p m a n;-p 2ab 2,54;8;d2h^8;p c c a;-p 2a 2ac,54:ba-c;8;d2h^8;p c c b;-p 2b 2c,54:cab;8;d2h^8;p b a a;-p 2a 2b,54:-cba;8;d2h^8;p c a a;-p 2ac 2c,54:bca;8;d2h^8;p b c b;-p 2bc 2b,54:a-cb;8;d2h^8;p b a b;-p 2b 2ab,55;8;d2h^9;p b a m;-p 2 2ab,55:cab;8;d2h^9;p m c b;-p 2bc 2,55:bca;8;d2h^9;p c m a;-p 2ac 2ac,56;8;d2h^10;p c c n;-p 2ab 2ac,56:cab;8;d2h^10;p n a a;-p 2ac 2bc,56:bca;8;d2h^10;p b n b;-p 2bc 2ab,57;8;d2h^11;p b c m;-p 2c 2b,57:ba-c;8;d2h^11;p c a m;-p 2c 2ac,57:cab;8;d2h^11;p m c a;-p 2ac 2a,57:-cba;8;d2h^11;p m a b;-p 2b 2a,57:bca;8;d2h^11;p b m a;-p 2a 2ab,57:a-cb;8;d2h^11;p c m b;-p 2bc 2c,58;8;d2h^12;p n n m;-p 2 2n,58:cab;8;d2h^12;p m n n;-p 2n 2,58:bca;8;d2h^12;p n m n;-p 2n 2n,59:1;8;d2h^13;p m m n:1;p 2 2ab -1ab;-b,59:2;8;d2h^13;p m m n:2;-p 2ab 2a,59:1cab;8;d2h^13;p n m m:1;p 2bc 2 -1bc,59:2cab;8;d2h^13;p n m m:2;-p 2c 2bc,59:1bca;8;d2h^13;p m n m:1;p 2ac 2ac -1ac,59:2bca;8;d2h^13;p m n m:2;-p 2c 2a,60;8;d2h^14;p b c n;-p 2n 2ab,60:ba-c;8;d2h^14;p c a n;-p 2n 2c,60:cab;8;d2h^14;p n c a;-p 2a 2n,60:-cba;8;d2h^14;p n a b;-p 2bc 2n,60:bca;8;d2h^14;p b n a;-p 2ac 2b,60:a-cb;8;d2h^14;p c n b;-p 2b 2ac,61;8;d2h^15;p b c a;-p 2ac 2ab,61:ba-c;8;d2h^15;p c a b;-p 2bc 2ac,62;8;d2h^16;p n m a;-p 2ac 2n,62:ba-c;8;d2h^16;p m n b;-p 2bc 2a,62:cab;8;d2h^16;p b n m;-p 2c 2ab,62:-cba;8;d2h^16;p c m n;-p 2n 2ac,62:bca;8;d2h^16;p m c n;-p 2n 2a,62:a-cb;8;d2h^16;p n a m;-p 2c 2n,63;16;d2h^17;c m c m;-c 2c 2,63:ba-c;16;d2h^17;c c m m;-c 2c 2c,63:cab;16;d2h^17;a m m a;-a 2a 2a,63:-cba;16;d2h^17;a m a m;-a 2 2a,63:bca;16;d2h^17;b b m m;-b 2 2b,63:a-cb;16;d2h^17;b m m b;-b 2b 2,64;16;d2h^18;c m c e;-c 2ac 2,64;16;d2h^18;c m c a;-c 2ac 2,64:ba-c;16;d2h^18;c c m b;-c 2ac 2ac,64:cab;16;d2h^18;a b m a;-a 2ab 2ab,64:-cba;16;d2h^18;a c a m;-a 2 2ab,64:bca;16;d2h^18;b b c m;-b 2 2ab,64:a-cb;16;d2h^18;b m a b;-b 2ab 2,65;16;d2h^19;c m m m;-c 2 2,65:cab;16;d2h^19;a m m m;-a 2 2,65:bca;16;d2h^19;b m m m;-b 2 2,66;16;d2h^20;c c c m;-c 2 2c,66:cab;16;d2h^20;a m a a;-a 2a 2,66:bca;16;d2h^20;b b m b;-b 2b 2b,67;16;d2h^21;c m m e;-c 2a 2,67;16;d2h^21;c m m a;-c 2a 2,67:ba-c;16;d2h^21;c m m b;-c 2a 2a,67:cab;16;d2h^21;a b m m;-a 2b 2b,67:-cba;16;d2h^21;a c m m;-a 2 2b,67:bca;16;d2h^21;b m c m;-b 2 2a,67:a-cb;16;d2h^21;b m a m;-b 2a 2,68:1;16;d2h^22;c c c e:1;c 2 2 -1ac;-b,68:1;16;d2h^22;c c c a:1;c 2 2 -1ac;-b,68:2;16;d2h^22;c c c e:2;-c 2a 2ac,68:2;16;d2h^22;c c c a:2;-c 2a 2ac,68:1ba-c;16;d2h^22;c c c b:1;c 2 2 -1ac,68:2ba-c;16;d2h^22;c c c b:2;-c 2a 2c,68:1cab;16;d2h^22;a b a a:1;a 2 2 -1ab,68:2cab;16;d2h^22;a b a a:2;-a 2a 2b,68:1-cba;16;d2h^22;a c a a:1;a 2 2 -1ab,68:2-cba;16;d2h^22;a c a a:2;-a 2ab 2b,68:1bca;16;d2h^22;b b c b:1;b 2 2 -1ab,68:2bca;16;d2h^22;b b c b:2;-b 2ab 2b,68:1a-cb;16;d2h^22;b b a b:1;b 2 2 -1ab,68:2a-cb;16;d2h^22;b b a b:2;-b 2b 2ab,69;32;d2h^23;f m m m;-f 2 2,70:1;32;d2h^24;f d d d:1;f 2 2 -1d;-b,70:2;32;d2h^24;f d d d:2;-f 2uv 2vw,71;16;d2h^25;i m m m;-i 2 2,72;16;d2h^26;i b a m;-i 2 2c,72:cab;16;d2h^26;i m c b;-i 2a 2,72:bca;16;d2h^26;i c m a;-i 2b 2b,73;16;d2h^27;i b c a;-i 2b 2c,73:ba-c;16;d2h^27;i c a b;-i 2a 2b,74;16;d2h^28;i m m a;-i 2b 2,74:ba-c;16;d2h^28;i m m b;-i 2a 2a,74:cab;16;d2h^28;i b m m;-i 2c 2c,74:-cba;16;d2h^28;i c m m;-i 2 2b,74:bca;16;d2h^28;i m c m;-i 2 2a,74:a-cb;16;d2h^28;i m a m;-i 2c 2,75;4;c4^1;p 4;p 4,76;4;c4^2;p 41;p 4w,76*;4;c4^2;p 41*;p 41,77;4;c4^3;p 42;p 4c,77*;4;c4^3;p 42*;p 42,78;4;c4^4;p 43;p 4cw,78*;4;c4^4;p 43*;p 43,79;8;c4^5;i 4;i 4,80;8;c4^6;i 41;i 4bw,81;4;s4^1;p -4;p -4,82;8;s4^2;i -4;i -4,83;8;c4h^1;p 4/m;-p 4,84;8;c4h^2;p 42/m;-p 4c,84*;8;c4h^2;p 42/m*;-p 42,85:1;8;c4h^3;p 4/n:1;p 4ab -1ab;-b,85:2;8;c4h^3;p 4/n:2;-p 4a,86:1;8;c4h^4;p 42/n:1;p 4n -1n;-b,86:2;8;c4h^4;p 42/n:2;-p 4bc,87;16;c4h^5;i 4/m;-i 4,88:1;16;c4h^6;i 41/a:1;i 4bw -1bw;-b,88:2;16;c4h^6;i 41/a:2;-i 4ad,89;8;d4^1;p 4 2 2;p 4 2,90;8;d4^2;p 4 21 2;p 4ab 2ab,91;8;d4^3;p 41 2 2;p 4w 2c,91*;8;d4^3;p 41 2 2*;p 41 2c,92;8;d4^4;p 41 21 2;p 4abw 2nw,93;8;d4^5;p 42 2 2;p 4c 2,93*;8;d4^5;p 42 2 2*;p 42 2,94;8;d4^6;p 42 21 2;p 4n 2n,95;8;d4^7;p 43 2 2;p 4cw 2c,95*;8;d4^7;p 43 2 2*;p 43 2c,96;8;d4^8;p 43 21 2;p 4nw 2abw,97;16;d4^9;i 4 2 2;i 4 2,98;16;d4^10;i 41 2 2;i 4bw 2bw,99;8;c4v^1;p 4 m m;p 4 -2,100;8;c4v^2;p 4 b m;p 4 -2ab,101;8;c4v^3;p 42 c m;p 4c -2c,101*;8;c4v^3;p 42 c m*;p 42 -2c,102;8;c4v^4;p 42 n m;p 4n -2n,103;8;c4v^5;p 4 c c;p 4 -2c,104;8;c4v^6;p 4 n c;p 4 -2n,105;8;c4v^7;p 42 m c;p 4c -2,105*;8;c4v^7;p 42 m c*;p 42 -2,106;8;c4v^8;p 42 b c;p 4c -2ab,106*;8;c4v^8;p 42 b c*;p 42 -2ab,107;16;c4v^9;i 4 m m;i 4 -2,108;16;c4v^10;i 4 c m;i 4 -2c,109;16;c4v^11;i 41 m d;i 4bw -2,110;16;c4v^12;i 41 c d;i 4bw -2c,111;8;d2d^1;p -4 2 m;p -4 2,112;8;d2d^2;p -4 2 c;p -4 2c,113;8;d2d^3;p -4 21 m;p -4 2ab,114;8;d2d^4;p -4 21 c;p -4 2n,115;8;d2d^5;p -4 m 2;p -4 -2,116;8;d2d^6;p -4 c 2;p -4 -2c,117;8;d2d^7;p -4 b 2;p -4 -2ab,118;8;d2d^8;p -4 n 2;p -4 -2n,119;16;d2d^9;i -4 m 2;i -4 -2,120;16;d2d^10;i -4 c 2;i -4 -2c,121;16;d2d^11;i -4 2 m;i -4 2,122;16;d2d^12;i -4 2 d;i -4 2bw,123;16;d4h^1;p 4/m m m;-p 4 2,124;16;d4h^2;p 4/m c c;-p 4 2c,125:1;16;d4h^3;p 4/n b m:1;p 4 2 -1ab;-b,125:2;16;d4h^3;p 4/n b m:2;-p 4a 2b,126:1;16;d4h^4;p 4/n n c:1;p 4 2 -1n;-b,126:2;16;d4h^4;p 4/n n c:2;-p 4a 2bc,127;16;d4h^5;p 4/m b m;-p 4 2ab,128;16;d4h^6;p 4/m n c;-p 4 2n,129:1;16;d4h^7;p 4/n m m:1;p 4ab 2ab -1ab;-b,129:2;16;d4h^7;p 4/n m m:2;-p 4a 2a,130:1;16;d4h^8;p 4/n c c:1;p 4ab 2n -1ab;-b,130:2;16;d4h^8;p 4/n c c:2;-p 4a 2ac,131;16;d4h^9;p 42/m m c;-p 4c 2,132;16;d4h^10;p 42/m c m;-p 4c 2c,133:1;16;d4h^11;p 42/n b c:1;p 4n 2c -1n;-b,133:2;16;d4h^11;p 42/n b c:2;-p 4ac 2b,134:1;16;d4h^12;p 42/n n m:1;p 4n 2 -1n;-b,134:2;16;d4h^12;p 42/n n m:2;-p 4ac 2bc,135;16;d4h^13;p 42/m b c;-p 4c 2ab,135*;16;d4h^13;p 42/m b c*;-p 42 2ab,136;16;d4h^14;p 42/m n m;-p 4n 2n,137:1;16;d4h^15;p 42/n m c:1;p 4n 2n -1n;-b,137:2;16;d4h^15;p 42/n m c:2;-p 4ac 2a,138:1;16;d4h^16;p 42/n c m:1;p 4n 2ab -1n;-b,138:2;16;d4h^16;p 42/n c m:2;-p 4ac 2ac,139;32;d4h^17;i 4/m m m;-i 4 2,140;32;d4h^18;i 4/m c m;-i 4 2c,141:1;32;d4h^19;i 41/a m d:1;i 4bw 2bw -1bw;-b,141:2;32;d4h^19;i 41/a m d:2;-i 4bd 2,142:1;32;d4h^20;i 41/a c d:1;i 4bw 2aw -1bw;-b,142:2;32;d4h^20;i 41/a c d:2;-i 4bd 2c,143;3;c3^1;p 3;p 3,144;3;c3^2;p 31;p 31,145;3;c3^3;p 32;p 32,146:h;9;c3^4;r 3:h;r 3,146:r;3;c3^4;r 3:r;p 3*,147;6;c3i^1;p -3;-p 3,148:h;18;c3i^2;r -3:h;-r 3,148:r;6;c3i^2;r -3:r;-p 3*,149;6;d3^1;p 3 1 2;p 3 2,150;6;d3^2;p 3 2 1;p 3 2",151;6;d3^3;p 31 1 2;p 31 2 (0 0 4),152;6;d3^4;p 31 2 1;p 31 2",152:_2;6;d3^4;p 31 2 1;p 31 2" (0 0 -4);-b,153;6;d3^5;p 32 1 2;p 32 2 (0 0 2),154;6;d3^6;p 32 2 1;p 32 2",154:_2;6;d3^6;p 32 2 1;p 32 2" (0 0 4);-b,155:h;18;d3^7;r 3 2:h;r 3 2",155:r;6;d3^7;r 3 2:r;p 3* 2,156;6;c3v^1;p 3 m 1;p 3 -2",157;6;c3v^2;p 3 1 m;p 3 -2,158;6;c3v^3;p 3 c 1;p 3 -2"c,159;6;c3v^4;p 3 1 c;p 3 -2c,160:h;18;c3v^5;r 3 m:h;r 3 -2",160:r;6;c3v^5;r 3 m:r;p 3* -2,161:h;18;c3v^6;r 3 c:h;r 3 -2"c,161:r;6;c3v^6;r 3 c:r;p 3* -2n,162;12;d3d^1;p -3 1 m;-p 3 2,163;12;d3d^2;p -3 1 c;-p 3 2c,164;12;d3d^3;p -3 m 1;-p 3 2",165;12;d3d^4;p -3 c 1;-p 3 2"c,166:h;36;d3d^5;r -3 m:h;-r 3 2",166:r;12;d3d^5;r -3 m:r;-p 3* 2,167:h;36;d3d^6;r -3 c:h;-r 3 2"c,167:r;12;d3d^6;r -3 c:r;-p 3* 2n,168;6;c6^1;p 6;p 6,169;6;c6^2;p 61;p 61,170;6;c6^3;p 65;p 65,171;6;c6^4;p 62;p 62,172;6;c6^5;p 64;p 64,173;6;c6^6;p 63;p 6c,173*;6;c6^6;p 63*;p 63 ,174;6;c3h^1;p -6;p -6,175;12;c6h^1;p 6/m;-p 6,176;12;c6h^2;p 63/m;-p 6c,176*;12;c6h^2;p 63/m*;-p 63,177;12;d6^1;p 6 2 2;p 6 2,178;12;d6^2;p 61 2 2;p 61 2 (0 0 5),179;12;d6^3;p 65 2 2;p 65 2 (0 0 1),180;12;d6^4;p 62 2 2;p 62 2 (0 0 4),181;12;d6^5;p 64 2 2;p 64 2 (0 0 2),182;12;d6^6;p 63 2 2;p 6c 2c,182*;12;d6^6;p 63 2 2*;p 63 2c,183;12;c6v^1;p 6 m m;p 6 -2,184;12;c6v^2;p 6 c c;p 6 -2c,185;12;c6v^3;p 63 c m;p 6c -2,185*;12;c6v^3;p 63 c m*;p 63 -2,186;12;c6v^4;p 63 m c;p 6c -2c,186*;12;c6v^4;p 63 m c*;p 63 -2c,187;12;d3h^1;p -6 m 2;p -6 2,188;12;d3h^2;p -6 c 2;p -6c 2,189;12;d3h^3;p -6 2 m;p -6 -2,190;12;d3h^4;p -6 2 c;p -6c -2c,191;24;d6h^1;p 6/m m m;-p 6 2,192;24;d6h^2;p 6/m c c;-p 6 2c,193;24;d6h^3;p 63/m c m;-p 6c 2,193*;24;d6h^3;p 63/m c m*;-p 63 2,194;24;d6h^4;p 63/m m c;-p 6c 2c,194*;24;d6h^4;p 63/m m c*;-p 63 2c,195;12;t^1;p 2 3;p 2 2 3,196;48;t^2;f 2 3;f 2 2 3,197;24;t^3;i 2 3;i 2 2 3,198;12;t^4;p 21 3;p 2ac 2ab 3,199;24;t^5;i 21 3;i 2b 2c 3,200;24;th^1;p m -3;-p 2 2 3,201:1;24;th^2;p n -3:1;p 2 2 3 -1n;-b,201:2;24;th^2;p n -3:2;-p 2ab 2bc 3,202;96;th^3;f m -3;-f 2 2 3,203:1;96;th^4;f d -3:1;f 2 2 3 -1d;-b,203:2;96;th^4;f d -3:2;-f 2uv 2vw 3,204;48;th^5;i m -3;-i 2 2 3,205;24;th^6;p a -3;-p 2ac 2ab 3,206;48;th^7;i a -3;-i 2b 2c 3,207;24;o^1;p 4 3 2;p 4 2 3,208;24;o^2;p 42 3 2;p 4n 2 3,209;96;o^3;f 4 3 2;f 4 2 3,210;96;o^4;f 41 3 2;f 4d 2 3,211;48;o^5;i 4 3 2;i 4 2 3,212;24;o^6;p 43 3 2;p 4acd 2ab 3,213;24;o^7;p 41 3 2;p 4bd 2ab 3,214;48;o^8;i 41 3 2;i 4bd 2c 3,215;24;td^1;p -4 3 m;p -4 2 3,216;96;td^2;f -4 3 m;f -4 2 3,217;48;td^3;i -4 3 m;i -4 2 3,218;24;td^4;p -4 3 n;p -4n 2 3,219;96;td^5;f -4 3 c;f -4a 2 3,220;48;td^6;i -4 3 d;i -4bd 2c 3,221;48;oh^1;p m -3 m;-p 4 2 3,222:1;48;oh^2;p n -3 n:1;p 4 2 3 -1n;-b,222:2;48;oh^2;p n -3 n:2;-p 4a 2bc 3,223;48;oh^3;p m -3 n;-p 4n 2 3,224:1;48;oh^4;p n -3 m:1;p 4n 2 3 -1n;-b,224:2;48;oh^4;p n -3 m:2;-p 4bc 2bc 3,225;192;oh^5;f m -3 m;-f 4 2 3,226;192;oh^6;f m -3 c;-f 4a 2 3,227:1;192;oh^7;f d -3 m:1;f 4d 2 3 -1d;-b,227:2;192;oh^7;f d -3 m:2;-f 4vw 2vw 3,228:1;192;oh^8;f d -3 c:1;f 4d 2 3 -1ad;-b,228:2;192;oh^8;f d -3 c:2;-f 4ud 2vw 3,229;96;oh^9;i m -3 m;-i 4 2 3,230;96;oh^10;i a -3 d;-i 4bd 2c 3'.split(","))});
X("JS");ba(null,"JS.HallInfo",["JU.P3i","$.SB","JS.HallRotationTerm","$.HallTranslation","JU.Logger"],function(){var b=O(function(){this.primitiveHallSymbol=this.hallSymbol=null;this.latticeCode="\x00";this.latticeExtension=null;this.isCentrosymmetric=!1;this.nRotations=0;this.vectorCode=this.vector12ths=this.rotationTerms=null;aa(this,arguments)},JS,"HallInfo",null);la(b,function(){this.rotationTerms=Array(16)});ga(b,function(a){try{a.startsWith("Hall:")&&(a=a.substring(5).trim());var c=this.hallSymbol=
a.trim(),c=this.extractLatticeInfo(c);if(0!=JS.HallTranslation.getLatticeIndex(this.latticeCode)){this.latticeExtension=JS.HallTranslation.getLatticeExtension(this.latticeCode,this.isCentrosymmetric);c=this.extractVectorInfo(c)+this.latticeExtension;JU.Logger.debugging&&JU.Logger.debug("Hallinfo: "+a+" "+c);a=0;var b="\x00";for(this.primitiveHallSymbol="P";0<c.length&&16>this.nRotations;){var c=this.extractRotationInfo(c,a,b),d=this.rotationTerms[this.nRotations-1];a=d.order;b=d.axisType;this.primitiveHallSymbol+=
" "+d.primitiveCode}this.primitiveHallSymbol+=this.vectorCode}}catch(l){if(fa(l,Exception))JU.Logger.error("Invalid Hall symbol "+l),this.nRotations=0;else throw l;}},"~S");d(b,"dumpInfo",function(){var a=new JU.SB;a.append("\nHall symbol: ").append(this.hallSymbol).append("\nprimitive Hall symbol: ").append(this.primitiveHallSymbol).append("\nlattice type: ").append(this.getLatticeDesignation());for(var c=0;c<this.nRotations;c++)a.append("\n\nrotation term ").appendI(c+1).append(this.rotationTerms[c].dumpInfo(this.vectorCode));
return a.toString()});d(b,"getLatticeDesignation",function(){return JS.HallTranslation.getLatticeDesignation2(this.latticeCode,this.isCentrosymmetric)});d(b,"extractLatticeInfo",function(a){var c=a.indexOf(" ");if(0>c)return"";var b=a.substring(0,c).toUpperCase();this.latticeCode=b.charAt(0);"-"==this.latticeCode&&(this.isCentrosymmetric=!0,this.latticeCode=b.charAt(1));return a.substring(c+1).trim()},"~S");d(b,"extractVectorInfo",function(a){this.vector12ths=new JU.P3i;this.vectorCode="";var c=a.indexOf("("),
b=a.indexOf(")",c);0<c&&b>c&&(b=a.substring(c+1,b),this.vectorCode=" ("+b+")",a=a.substring(0,c).trim(),c=b.indexOf(" "),0<=c&&(this.vector12ths.x=Integer.parseInt(b.substring(0,c)),b=b.substring(c+1).trim(),c=b.indexOf(" "),0<=c&&(this.vector12ths.y=Integer.parseInt(b.substring(0,c)),b=b.substring(c+1).trim())),this.vector12ths.z=Integer.parseInt(b));return a},"~S");d(b,"extractRotationInfo",function(a,c,b){var d=a.indexOf(" "),l;0<=d?(l=a.substring(0,d),a=a.substring(d+1).trim()):(l=a,a="");this.rotationTerms[this.nRotations]=
new JS.HallRotationTerm(this,l,c,b);this.nRotations++;return a},"~S,~N,~S");n(b,"toString",function(){return this.hallSymbol})});X("JS");ba(["JU.M4"],"JS.HallRotationTerm",["JU.SB","JS.HallRotation","$.HallTranslation","$.SymmetryOperation","JU.Logger"],function(){var b=O(function(){this.seitzMatrix12ths=this.translation=this.rotation=this.translationString=this.lookupCode=this.primitiveCode=this.inputCode=null;this.isImproper=!1;this.order=0;this.diagonalReferenceAxis=this.axisType="\x00";this.allPositive=
!0;aa(this,arguments)},JS,"HallRotationTerm",null);la(b,function(){this.seitzMatrix12ths=new JU.M4});ga(b,function(a,c,b,d){this.inputCode=c;c+="   ";"-"==c.charAt(0)&&(this.isImproper=!0,c=c.substring(1));this.primitiveCode="";this.order=c.charAt(0).charCodeAt(0)-48;this.axisType=this.diagonalReferenceAxis="\x00";var l=2,e;switch((e=c.charAt(1)).charCodeAt(0)){case 120:case 121:case 122:switch(c.charAt(2).charCodeAt(0)){case 39:case 34:this.diagonalReferenceAxis=e,e=c.charAt(2),l++}case 42:this.axisType=
e;break;case 39:case 34:this.axisType=e;switch(c.charAt(2).charCodeAt(0)){case 120:case 121:case 122:this.diagonalReferenceAxis=c.charAt(2);l++;break;default:this.diagonalReferenceAxis=d}break;default:this.axisType=1==this.order?"_":0==a.nRotations?"z":2==a.nRotations?"*":2==b||4==b?"x":"'",c=c.substring(0,1)+this.axisType+c.substring(1)}this.primitiveCode+="_"==this.axisType?"1":c.substring(0,2);"\x00"!=this.diagonalReferenceAxis&&(c=c.substring(0,1)+this.diagonalReferenceAxis+this.axisType+c.substring(l),
this.primitiveCode+=this.diagonalReferenceAxis,l=3);this.lookupCode=c.substring(0,l);this.rotation=JS.HallRotation.lookup(this.lookupCode);if(null==this.rotation)JU.Logger.error("Rotation lookup could not find "+this.inputCode+" ? "+this.lookupCode);else{this.translation=new JS.HallTranslation("\x00",null);this.translationString="";for(b=c.length;l<b;l++)d=c.charAt(l),d=JS.HallTranslation.getHallTranslation(d,this.order),null!=d&&(this.translationString+=""+d.translationCode,this.translation.rotationShift12ths+=
d.rotationShift12ths,this.translation.vectorShift12ths.add(d.vectorShift12ths));this.primitiveCode=(this.isImproper?"-":"")+this.primitiveCode+this.translationString;this.seitzMatrix12ths.setM4(this.isImproper?this.rotation.seitzMatrixInv:this.rotation.seitzMatrix);this.seitzMatrix12ths.m03=this.translation.vectorShift12ths.x;this.seitzMatrix12ths.m13=this.translation.vectorShift12ths.y;this.seitzMatrix12ths.m23=this.translation.vectorShift12ths.z;switch(this.axisType.charCodeAt(0)){case 120:this.seitzMatrix12ths.m03+=
this.translation.rotationShift12ths;break;case 121:this.seitzMatrix12ths.m13+=this.translation.rotationShift12ths;break;case 122:this.seitzMatrix12ths.m23+=this.translation.rotationShift12ths}0<a.vectorCode.length&&(l=JU.M4.newM4(null),b=JU.M4.newM4(null),a=a.vector12ths,l.m03=a.x,l.m13=a.y,l.m23=a.z,b.m03=-a.x,b.m13=-a.y,b.m23=-a.z,this.seitzMatrix12ths.mul2(l,this.seitzMatrix12ths),this.seitzMatrix12ths.mul(b));JU.Logger.debugging&&JU.Logger.debug("code = "+c+"; primitive code ="+this.primitiveCode+
"\n Seitz Matrix(12ths):"+this.seitzMatrix12ths)}},"JS.HallInfo,~S,~N,~S");d(b,"dumpInfo",function(a){var c=new JU.SB;c.append("\ninput code: ").append(this.inputCode).append("; primitive code: ").append(this.primitiveCode).append("\norder: ").appendI(this.order).append(this.isImproper?" (improper axis)":"");"_"!=this.axisType&&(c.append("; axisType: ").appendC(this.axisType),"\x00"!=this.diagonalReferenceAxis&&c.appendC(this.diagonalReferenceAxis));0<this.translationString.length&&c.append("; translation: ").append(this.translationString);
0<a.length&&c.append("; vector offset: ").append(a);null!=this.rotation&&c.append("\noperator: ").append(this.getXYZ(this.allPositive)).append("\nSeitz matrix:\n").append(JS.SymmetryOperation.dumpSeitz(this.seitzMatrix12ths,!1));return c.toString()},"~S");d(b,"getXYZ",function(a){return JS.SymmetryOperation.getXYZFromMatrix(this.seitzMatrix12ths,!0,a,!0)},"~B")});X("JS");ba(["JU.M4"],"JS.HallRotation",null,function(){var b=O(function(){this.seitzMatrixInv=this.seitzMatrix=this.rotCode=null;aa(this,
arguments)},JS,"HallRotation",null);la(b,function(){this.seitzMatrix=new JU.M4;this.seitzMatrixInv=new JU.M4});ga(b,function(a,c){this.rotCode=a;var b=y(16,0),d=y(16,0);b[15]=d[15]=1;for(var l=0,e=0;11>e;l++){var g=0;switch(c.charAt(l).charCodeAt(0)){case 32:e++;continue;case 43:case 49:g=1;break;case 45:g=-1}b[e]=g;d[e]=-g;e++}this.seitzMatrix.setA(b);this.seitzMatrixInv.setA(d)},"~S,~S");b.lookup=d(b,"lookup",function(a){for(var c=JS.HallRotation.getHallTerms().length;0<=--c;)if(JS.HallRotation.hallRotationTerms[c].rotCode.equals(a))return JS.HallRotation.hallRotationTerms[c];
return null},"~S");b.getHallTerms=d(b,"getHallTerms",function(){return null==JS.HallRotation.hallRotationTerms?JS.HallRotation.hallRotationTerms=Q(-1,[new JS.HallRotation("1_","+00 0+0 00+"),new JS.HallRotation("2x","+00 0-0 00-"),new JS.HallRotation("2y","-00 0+0 00-"),new JS.HallRotation("2z","-00 0-0 00+"),new JS.HallRotation("2'","0-0 -00 00-"),new JS.HallRotation('2"',"0+0 +00 00-"),new JS.HallRotation("2x'","-00 00- 0-0"),new JS.HallRotation('2x"',"-00 00+ 0+0"),new JS.HallRotation("2y'","00- 0-0 -00"),
new JS.HallRotation('2y"',"00+ 0-0 +00"),new JS.HallRotation("2z'","0-0 -00 00-"),new JS.HallRotation('2z"',"0+0 +00 00-"),new JS.HallRotation("3x","+00 00- 0+-"),new JS.HallRotation("3y","-0+ 0+0 -00"),new JS.HallRotation("3z","0-0 +-0 00+"),new JS.HallRotation("3*","00+ +00 0+0"),new JS.HallRotation("4x","+00 00- 0+0"),new JS.HallRotation("4y","00+ 0+0 -00"),new JS.HallRotation("4z","0-0 +00 00+"),new JS.HallRotation("6x","+00 0+- 0+0"),new JS.HallRotation("6y","00+ 0+0 -0+"),new JS.HallRotation("6z",
"+-0 +00 00+")]):JS.HallRotation.hallRotationTerms});b.hallRotationTerms=null});X("JS");ba(null,"JS.HallTranslation",["JU.P3i"],function(){var b=O(function(){this.translationCode="\x00";this.rotationShift12ths=this.rotationOrder=0;this.vectorShift12ths=null;aa(this,arguments)},JS,"HallTranslation",null);ga(b,function(a,c){this.translationCode=a;if(null!=c){if(0<=c.z){this.vectorShift12ths=c;return}this.rotationOrder=c.x;this.rotationShift12ths=c.y}this.vectorShift12ths=new JU.P3i},"~S,JU.P3i");b.getHallLatticeEquivalent=
d(b,"getHallLatticeEquivalent",function(a){var c=JS.HallTranslation.getLatticeCode(a);return(0<a?"-":"")+c+" 1"},"~N");b.getLatticeIndex=d(b,"getLatticeIndex",function(a){for(var c=1,b=3;c<=JS.HallTranslation.nLatticeTypes;c++,b+=3)if(JS.HallTranslation.latticeTranslationData[b].charAt(0)==a)return c;return 0},"~S");b.getLatticeCode=d(b,"getLatticeCode",function(a){0>a&&(a=-a);return 0==a?"\x00":a>JS.HallTranslation.nLatticeTypes?JS.HallTranslation.getLatticeCode(JS.HallTranslation.getLatticeIndex(String.fromCharCode(a))):
JS.HallTranslation.latticeTranslationData[3*a].charAt(0)},"~N");b.getLatticeDesignation=d(b,"getLatticeDesignation",function(a){var c=0<a;0>a&&(a=-a);return 0==a||a>JS.HallTranslation.nLatticeTypes?"":(c?"-":"")+JS.HallTranslation.getLatticeCode(a)+": "+(c?"centrosymmetric ":"")+JS.HallTranslation.latticeTranslationData[3*a+1]},"~N");b.getLatticeDesignation2=d(b,"getLatticeDesignation2",function(a,c){var b=JS.HallTranslation.getLatticeIndex(a);c||(b=-b);return JS.HallTranslation.getLatticeDesignation(b)},
"~S,~B");b.getLatticeExtension=d(b,"getLatticeExtension",function(a,c){for(var b=1,d=3;b<=JS.HallTranslation.nLatticeTypes;b++,d+=3)if(JS.HallTranslation.latticeTranslationData[d].charAt(0)==a)return JS.HallTranslation.latticeTranslationData[d+2]+(c?" -1":"");return""},"~S,~B");b.getHallTerms=d(b,"getHallTerms",function(){return null==JS.HallTranslation.hallTranslationTerms?JS.HallTranslation.hallTranslationTerms=Q(-1,[new JS.HallTranslation("a",JU.P3i.new3(6,0,0)),new JS.HallTranslation("b",JU.P3i.new3(0,
6,0)),new JS.HallTranslation("c",JU.P3i.new3(0,0,6)),new JS.HallTranslation("n",JU.P3i.new3(6,6,6)),new JS.HallTranslation("u",JU.P3i.new3(3,0,0)),new JS.HallTranslation("v",JU.P3i.new3(0,3,0)),new JS.HallTranslation("w",JU.P3i.new3(0,0,3)),new JS.HallTranslation("d",JU.P3i.new3(3,3,3)),new JS.HallTranslation("1",JU.P3i.new3(2,6,-1)),new JS.HallTranslation("1",JU.P3i.new3(3,4,-1)),new JS.HallTranslation("2",JU.P3i.new3(3,8,-1)),new JS.HallTranslation("1",JU.P3i.new3(4,3,-1)),new JS.HallTranslation("3",
JU.P3i.new3(4,9,-1)),new JS.HallTranslation("1",JU.P3i.new3(6,2,-1)),new JS.HallTranslation("2",JU.P3i.new3(6,4,-1)),new JS.HallTranslation("4",JU.P3i.new3(6,8,-1)),new JS.HallTranslation("5",JU.P3i.new3(6,10,-1)),new JS.HallTranslation("r",JU.P3i.new3(4,8,8)),new JS.HallTranslation("s",JU.P3i.new3(8,8,4)),new JS.HallTranslation("t",JU.P3i.new3(8,4,8))]):JS.HallTranslation.hallTranslationTerms});b.getHallTranslation=d(b,"getHallTranslation",function(a,c){for(var b=null,d=JS.HallTranslation.getHallTerms().length;0<=
--d;){var l=JS.HallTranslation.hallTranslationTerms[d];if(l.translationCode==a&&(0==l.rotationOrder||l.rotationOrder==c)){b=new JS.HallTranslation(a,null);b.translationCode=a;b.rotationShift12ths=l.rotationShift12ths;b.vectorShift12ths=l.vectorShift12ths;break}}return b},"~S,~N");b.latticeTranslationData=Q(-1,"\x00;unknown;;P;primitive;;I;body-centered; 1n;R;rhombohedral; 1r 1r;F;face-centered; 1ab 1bc 1ac;A;A-centered; 1bc;B;B-centered; 1ac;C;C-centered; 1ab;S;rhombohedral(S); 1s 1s;T;rhombohedral(T); 1t 1t".split(";"));
b.nLatticeTypes=H(JS.HallTranslation.latticeTranslationData.length/3)-1;b.hallTranslationTerms=null});X("JS");ba(["JU.M4","$.P3"],"JS.SymmetryOperation","java.util.Hashtable JU.Lst $.Matrix $.Measure $.P4 $.PT $.SB $.V3 JU.BoxInfo $.Logger $.Parser".split(" "),function(){var b=O(function(){this.xyz=this.xyzCanonical=this.xyzOriginal=null;this.doNormalize=!0;this.isFinalized=!1;this.opId=0;this.info=this.centering=null;this.opType=-1;this.opOrder=0;this.opIsCCW=this.opPlane=this.opAxis=this.opPoint2=
this.opPoint=this.opTrans=null;this.isCoincident=this.isIrrelevant=!1;this.myLabels=null;this.modDim=0;this.rsvs=this.linearRotTrans=null;this.isBio=!1;this.sigma=null;this.number=0;this.subsystemCode=null;this.timeReversal=0;this.isCenteringOp=this.unCentered=!1;this.magOp=2147483647;this.divisor=12;this.opAxisCode=this.opX=null;this.opIsLong=!1;aa(this,arguments)},JS,"SymmetryOperation",JU.M4);ga(b,function(a,c,b){pa(this,JS.SymmetryOperation,[]);this.doNormalize=b;null==a?this.opId=c:(this.xyzOriginal=
a.xyzOriginal,this.xyz=a.xyz,this.divisor=a.divisor,this.opId=a.opId,this.modDim=a.modDim,this.myLabels=a.myLabels,this.number=a.number,this.linearRotTrans=a.linearRotTrans,this.sigma=a.sigma,this.subsystemCode=a.subsystemCode,this.timeReversal=a.timeReversal,this.setMatrix(!1),a.isFinalized||this.doFinalize())},"JS.SymmetryOperation,~N,~B");d(b,"getOpName",function(a){-1==this.opType&&this.setOpTypeAndOrder();switch(this.opType){case 0:return"I";case 1:return"Trans"+JS.SymmetryOperation.op48(this.opTrans);
case 2:return"Rot"+this.opOrder+JS.SymmetryOperation.op48(this.opPoint)+JS.SymmetryOperation.op48(this.opAxis)+this.opIsCCW;case 4:return"Inv"+JS.SymmetryOperation.op48(this.opPoint);case 8:return(0==a?"":"Plane")+this.opPlane;case 3:return"Screw"+this.opOrder+JS.SymmetryOperation.op48(this.opPoint)+JS.SymmetryOperation.op48(this.opAxis)+JS.SymmetryOperation.op48(this.opTrans)+this.opIsCCW;case 6:return"Nbar"+this.opOrder+JS.SymmetryOperation.op48(this.opPoint)+JS.SymmetryOperation.op48(this.opAxis)+
this.opIsCCW;case 9:return(0==a?"":"Glide")+this.opPlane+(2==a?JS.SymmetryOperation.op48(this.opTrans):"")}System.out.println("SymmetryOperation REJECTED TYPE FOR "+this);return""},"~N");d(b,"getOpTitle",function(){-1==this.opType&&this.setOpTypeAndOrder();switch(this.opType){case 0:return"identity ";case 1:return"translation "+JS.SymmetryOperation.opFrac(this.opTrans);case 2:return"rotation "+this.opOrder;case 4:return"inversion center "+JS.SymmetryOperation.opFrac(this.opPoint);case 8:return"reflection ";
case 3:return"screw rotation "+this.opOrder+(null==this.opIsCCW?"":this.opIsCCW===Boolean.TRUE?"(+) ":"(-) ")+JS.SymmetryOperation.opFrac(this.opTrans);case 6:return this.opOrder+"-bar "+(null==this.opIsCCW?"":this.opIsCCW===Boolean.TRUE?"(+) ":"(-) ")+JS.SymmetryOperation.opFrac(this.opPoint);case 9:return"glide reflection "+JS.SymmetryOperation.opFrac(this.opTrans)}return""});b.opFrac=d(b,"opFrac",function(a){return"{"+JS.SymmetryOperation.opF(a.x)+" "+JS.SymmetryOperation.opF(a.y)+" "+JS.SymmetryOperation.opF(a.z)+
"}"},"JU.T3");b.opF=d(b,"opF",function(a){var c=0>a;c&&(a=-a);var b=0;1<=a&&(b=v(a),a-=b);a=Math.round(48*a);var d;d=0==a%48?1:0==a%24?2:0==a%16?3:0==a%12?4:0==a%8?6:0==a%6?8:0==a%4?12:0==a%3?16:0==a%2?24:48;return(c?"-":"")+(b*d+H(a*d/48))+(1==d?"":"/"+d)},"~N");b.op48=d(b,"op48",function(a){return null==a?(System.err.println("SymmetryOperation.op48 null"),"(null)"):"{"+Math.round(48*a.x)+" "+Math.round(48*a.y)+" "+Math.round(48*a.z)+"}"},"JU.T3");d(b,"setSigma",function(a,c){this.subsystemCode=
a;this.sigma=c},"~S,JU.Matrix");d(b,"setGamma",function(a){for(var c=3+this.modDim,b=(this.rsvs=new JU.Matrix(null,c+1,c+1)).getArray(),d=qa(c,0),l=0,e=0;e<c;e++){for(var g=0;g<c;g++)b[e][g]=this.linearRotTrans[l++];d[e]=(a?-1:1)*this.linearRotTrans[l++]}b[c][c]=1;a&&(this.rsvs=this.rsvs.inverse());for(e=0;e<c;e++)b[e][c]=d[e];b=this.rsvs.getSubmatrix(0,0,3,3).getArray();for(e=0;3>e;e++)for(g=0;4>g;g++)this.setElement(e,g,3>g?b[e][g]:d[e]);this.setElement(3,3,1)},"~B");d(b,"doFinalize",function(){JS.SymmetryOperation.div12(this,
this.divisor);if(0<this.modDim)for(var a=this.rsvs.getArray(),c=a.length-1;0<=--c;)a[c][3+this.modDim]=JS.SymmetryOperation.finalizeD(a[c][3+this.modDim],this.divisor);this.isFinalized=!0});b.div12=d(b,"div12",function(a,c){a.m03=JS.SymmetryOperation.finalizeF(a.m03,c);a.m13=JS.SymmetryOperation.finalizeF(a.m13,c);a.m23=JS.SymmetryOperation.finalizeF(a.m23,c);return a},"JU.M4,~N");b.finalizeF=d(b,"finalizeF",function(a,c){if(0==c){if(0==a)return 0;var b=v(a);return 1*(b>>8)/(b&255)}return a/c},"~N,~N");
b.finalizeD=d(b,"finalizeD",function(a,c){if(0==c){if(0==a)return 0;var b=H(a);return 1*(b>>8)/(b&255)}return a/c},"~N,~N");d(b,"getXyz",function(a){return a&&0==this.modDim||null==this.xyzOriginal?this.xyz:this.xyzOriginal},"~B");d(b,"getxyzTrans",function(a){var c=JU.M4.newM4(this);c.add(a);return JS.SymmetryOperation.getXYZFromMatrix(c,!1,!1,!1)},"JU.T3");d(b,"dumpInfo",function(){return"\n"+this.xyz+"\ninternal matrix representation:\n"+this.toString()});b.dumpSeitz=d(b,"dumpSeitz",function(a,
c){for(var b=new JU.SB,d=y(4,0),l=0;3>l;l++){a.getRow(l,d);b.append("[\t");for(var e=0;3>e;e++)b.appendI(v(d[e])).append("\t");e=d[3];e!=v(e)&&(e*=12);b.append(JS.SymmetryOperation.twelfthsOf(c?JS.SymmetryOperation.normalizeTwelfths(e/12,12,!0):v(e))).append("\t]\n")}return b.toString()},"JU.M4,~B");d(b,"setMatrixFromXYZ",function(a,c,b){if(null==a)return!1;this.xyzOriginal=a;this.divisor=JS.SymmetryOperation.setDivisor(a);a=a.toLowerCase();this.setModDim(c);var d=!1,l=!0;a.startsWith("!")&&(a.startsWith("!nohalf!")?
(l=!1,this.xyzOriginal=a=a.substring(8)):(d=!1,a=a.substring(1)));if(0==a.indexOf("xyz matrix:"))return this.xyz=a,JU.Parser.parseStringInfestedFloatArray(a,null,this.linearRotTrans),this.setFromMatrix(null,d);if(0==a.indexOf("[[")){a=a.$replace("["," ").$replace("]"," ").$replace(","," ");JU.Parser.parseStringInfestedFloatArray(a,null,this.linearRotTrans);for(c=this.linearRotTrans.length;0<=--c;)if(Float.isNaN(this.linearRotTrans[c]))return!1;this.setMatrix(d);this.isFinalized=!0;this.xyz=(this.isBio=
0<=a.indexOf("bio"))?this.xyzOriginal=oa(this,JS.SymmetryOperation,"toString",[]):JS.SymmetryOperation.getXYZFromMatrix(this,!1,!1,!1);return!0}if(0==c&&0<=a.indexOf("x4"))for(c=14;4<=--c;)if(0<=a.indexOf("x"+c)){this.setModDim(c-3);break}c=null;a.endsWith("m")?(this.timeReversal=0<=a.indexOf("-m")?-1:1,b=!0):0<=a.indexOf("mz)")&&(b=a.indexOf("("),c=a.substring(b+1,a.length-1),a=a.substring(0,b),b=!1);l=JS.SymmetryOperation.getMatrixFromString(this,a,this.linearRotTrans,b,l,!0);if(null==l)return!1;
this.xyzCanonical=l;null!=c&&(b=1==JU.M4.newA16(this.linearRotTrans).determinant3(),this.timeReversal=0>a.indexOf("-x")==0>c.indexOf("-mx")==b?1:-1);this.setMatrix(d);this.xyz=d?JS.SymmetryOperation.getXYZFromMatrix(this,!0,!1,!1):this.doNormalize?l:a;0!=this.timeReversal&&(this.xyz+=1==this.timeReversal?",m":",-m");JU.Logger.debugging&&JU.Logger.debug(""+this);return!0},"~S,~N,~B");b.setDivisor=d(b,"setDivisor",function(a){for(var c=a.indexOf("/"),b=a.length;0<c&&c<b-1;){var d=a.charAt(c+1);if(0>
"2346".indexOf(d)||c<b-2&&Character.isDigit(a.charAt(c+2)))return 0;c=a.indexOf("/",c+1)}return 12},"~S");d(b,"setModDim",function(a){this.modDim=a;0<a&&(this.myLabels=JS.SymmetryOperation.labelsXn);this.linearRotTrans=y((a+4)*(a+4),0)},"~N");d(b,"setMatrix",function(a){16<this.linearRotTrans.length?this.setGamma(a):(this.setA(this.linearRotTrans),a&&(a=JU.P3.new3(this.m03,this.m13,this.m23),this.invert(),this.rotate(a),a.scale(-1),this.setTranslation(a)))},"~B");d(b,"setFromMatrix",function(a,c){var b=
0,d=0;this.myLabels=0==this.modDim?JS.SymmetryOperation.labelsXYZ:JS.SymmetryOperation.labelsXn;for(var l=0,e=3+this.modDim,g=0;l<e;g++){if(Float.isNaN(this.linearRotTrans[g]))return!1;b=this.linearRotTrans[g];1E-5>Math.abs(b)&&(b=0);if(0==(g+1)%(e+1)){var j=0==this.divisor?v(b)&255:this.divisor;0==j&&(j=12);b=JS.SymmetryOperation.finalizeF(b,this.divisor);null!=a&&d<a.length&&(b+=a[d++]);b=JS.SymmetryOperation.normalizeTwelfths((0>b?-1:1)*Math.abs(b*j)/j,j,this.doNormalize);0==this.divisor&&(b=JS.SymmetryOperation.toDivisor(b,
j));l++}this.linearRotTrans[g]=b}this.linearRotTrans[this.linearRotTrans.length-1]=this.divisor;this.setMatrix(c);this.isFinalized=null==a;this.xyz=JS.SymmetryOperation.getXYZFromMatrix(this,!0,!1,!1);return!0},"~A,~B");b.getMatrixFromXYZ=d(b,"getMatrixFromXYZ",function(a,c,b){null==c&&(c=y(16,0));a=JS.SymmetryOperation.getMatrixFromString(null,a,c,!1,b,!0);if(null==a)return null;b=new JU.M4;b.setA(c);return JS.SymmetryOperation.div12(b,JS.SymmetryOperation.setDivisor(a))},"~S,~A,~B");b.getJmolCanonicalXYZ=
d(b,"getJmolCanonicalXYZ",function(a){try{return JS.SymmetryOperation.getMatrixFromString(null,a,null,!1,!0,!0)}catch(c){if(fa(c,Exception))return null;throw c;}},"~S");b.getMatrixFromString=d(b,"getMatrixFromString",function(a,c,b,d,l,e){var g=!1,j=!1,m=!1;c=JU.PT.rep(c,"[bio[","");var k=null==a?0:a.modDim,q=4+k,p=null==a?JS.SymmetryOperation.setDivisor(c):a.divisor,r=l&&(null==a?!c.startsWith("!"):a.doNormalize),n=0<k?3:0;if(null!=b){for(var t=b.length-1,s=t;0<=--s;)b[s]=0;b[t]=1}t=c.indexOf(";")+
1;0!=t&&(d=!0,t==c.length&&(c+="0,0,0"));var H=-1;a=null==a||0==k?null:a.myLabels;null==a&&(a=JS.SymmetryOperation.labelsXYZ);c=c.toLowerCase()+",";c=c.$replace("(",",");0<k&&(c=JS.SymmetryOperation.replaceXn(c,k+3));for(var x=0,u=0,R=0,y,B=0,z=0,F=0,N=1,w="",A=e?"":null,D=M(1,0),C=c.length,s=0;s<C;s++){switch((y=c.charAt(s)).charCodeAt(0)){case 59:break;case 39:case 32:case 123:case 125:case 33:continue;case 45:m=!0;continue;case 43:m=!1;continue;case 47:z=0;g=!0;continue;case 120:case 121:case 122:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:u=
R*q;g="x"<=y?y.charCodeAt(0)-120:y.charCodeAt(0)-97+n;x=u+g;m=m?-1:1;d&&0!=B?(null!=b&&(b[x]=B),m=v(B),B=0):null!=b&&(b[x]=m);null!=A&&(w+=JS.SymmetryOperation.plusMinus(w,m,a[g],!1));break;case 44:if(0!=t){if(0<t){H=s;s=t-1;t=-s;z=B=0;continue}t=s+1;s=H}B=JS.SymmetryOperation.normalizeTwelfths(B,0==z?12:0==p?z:p,r);null!=b&&(b[u+q-1]=0==p&&0<z?B=JS.SymmetryOperation.toDivisor(F,z):B);null!=A&&(w+=JS.SymmetryOperation.xyzFraction12(B,0==p?z:p,!1,l),A+=(""===A?"":",")+w);if(R==q-2)return e?A:"ok";
z=F=B=0;w="";u+=4;if(2<R++&&0==k)return JU.Logger.warn("Symmetry Operation? "+c),null;break;case 46:j=!0;N=1;continue;case 48:if(!j&&12==p&&(g||!d))continue;default:var S=y.charCodeAt(0)-48;if(0<=S&&9>=S){if(j){N/=10;0>B&&(m=!0);B+=N*S*(m?-1:1);continue}if(g){D[0]=s;z=JU.PT.parseIntNext(c,D);if(0>z)return null;s=D[0]-1;0==B?null!=b&&(b[x]/=z):(F=v(B),B/=z)}else B=10*B+(m?-1:1)*S}else JU.Logger.warn("symmetry character?"+y)}j=g=m=!1}return null},"JS.SymmetryOperation,~S,~A,~B,~B,~B");b.replaceXn=d(b,
"replaceXn",function(a,c){for(var b=c;0<=--b;)a=JU.PT.rep(a,JS.SymmetryOperation.labelsXn[b],JS.SymmetryOperation.labelsXnSub[b]);return a},"~S,~N");b.toDivisor=d(b,"toDivisor",function(a,c){var b=v(a);b!=a&&(b=a-b,c=v(Math.abs(c/b)),b=v(Math.abs(a)/b));return(b<<8)+c},"~N,~N");b.xyzFraction12=d(b,"xyzFraction12",function(a,c,b,d){if(0==a)return"";12!=c&&(a=v(a),c=a&255,a>>=8);var l=H(c/2);if(b)for(;0>a;)a+=c;else if(d){for(;a>l;)a-=c;for(;a<-l;)a+=c}c=12==c?JS.SymmetryOperation.twelfthsOf(a):0==
a?"0":a+"/"+c;return"0"==c.charAt(0)?"":0<a?"+"+c:c},"~N,~N,~B,~B");b.twelfthsOf=d(b,"twelfthsOf",function(a){var c="";0>a&&(a=-a,c="-");var b=12,d=Math.round(a);if(0.01<Math.abs(d-a)){a/=12;for(b=3;20>b;b++){var l=a*b,d=Math.round(l);if(0.01>Math.abs(d-l))break}if(20==b)return c+a}else{if(12==d)return c+"1";if(12>d)return c+JS.SymmetryOperation.twelfths[d%12];switch(d%12){case 0:return c+H(d/12);case 2:case 10:b=6;break;case 3:case 9:b=4;break;case 4:case 8:b=3;break;case 6:b=2}d=H(d*b/12)}return c+
d+"/"+b},"~N");b.plusMinus=d(b,"plusMinus",function(a,c,b,d){var l;return(0==c?"":(0>c?"-":0==a.length?"":"+")+(1==c||-1==c?"":1>(l=Math.abs(c))&&d?JS.SymmetryOperation.twelfthsOf(12*l):""+v(l)))+b},"~S,~N,~S,~B");b.normalizeTwelfths=d(b,"normalizeTwelfths",function(a,c,b){a*=c;var d=H(c/2);if(b){for(;a>d;)a-=c;for(;a<=-d;)a+=c}return a},"~N,~N,~B");b.getXYZFromMatrix=d(b,"getXYZFromMatrix",function(a,c,b,d){return JS.SymmetryOperation.getXYZFromMatrixFrac(a,c,b,d,!1)},"JU.M4,~B,~B,~B");b.getXYZFromMatrixFrac=
d(b,"getXYZFromMatrixFrac",function(a,c,b,d,l){var e="",g=W(a,"JS.SymmetryOperation")?a:null;if(null!=g&&0<g.modDim)return JS.SymmetryOperation.getXYZFromRsVs(g.rsvs.getRotation(),g.rsvs.getTranslation(),c);var g=y(4,0),j=v(a.getElement(3,3));1==j?j=12:a.setElement(3,3,1);for(var m=0;3>m;m++){var k=3>m?0:3;a.getRow(m,g);for(var q="",p=0;3>p;p++){var r=g[p];0!=JS.SymmetryOperation.approx(r)&&(q+=JS.SymmetryOperation.plusMinus(q,r,JS.SymmetryOperation.labelsXYZ[p+k],l))}if(0!=(c?g[3]:JS.SymmetryOperation.approx(g[3])))q+=
JS.SymmetryOperation.xyzFraction12(c?g[3]:g[3]*j,j,b,d);e+=","+q}return e.substring(1)},"JU.M4,~B,~B,~B,~B");d(b,"rotateAxes",function(a,c,b,d){var l=Array(3);this.getRotationScale(d);for(var e=a.length;0<=--e;)b.setT(a[e]),c.toFractional(b,!0),d.rotate(b),c.toCartesian(b,!0),l[e]=JU.V3.newV(b);return l},"~A,JS.UnitCell,JU.P3,JU.M3");d(b,"fcoord2",function(a){return 12==this.divisor?JS.SymmetryOperation.fcoord(a):this.fc2(v(this.linearRotTrans[3]))+" "+this.fc2(v(this.linearRotTrans[7]))+" "+this.fc2(v(this.linearRotTrans[11]))},
"JU.T3");d(b,"fc2",function(a){var c=a&255;a>>=8;return 0==a?"0":a+"/"+c},"~N");b.fcoord=d(b,"fcoord",function(a){return JS.SymmetryOperation.fc(a.x)+" "+JS.SymmetryOperation.fc(a.y)+" "+JS.SymmetryOperation.fc(a.z)},"JU.T3");b.fc=d(b,"fc",function(a){var c=Math.abs(a);a=0>a?"-":"";c=v(JS.SymmetryOperation.approx(24*c));return c/24==v(c/24)?a+H(c/24):0!=c%8?a+JS.SymmetryOperation.twelfthsOf(c>>1):0==c?"0":24==c?a+"1":a+H(c/8)+"/3"},"~N");b.approx=d(b,"approx",function(a){return JU.PT.approx(a,100)},
"~N");b.approx6=d(b,"approx6",function(a){return JU.PT.approx(a,1E6)},"~N");b.getXYZFromRsVs=d(b,"getXYZFromRsVs",function(a,c,b){a=a.getArray();c=c.getArray();for(var d=a.length,l="",e=0;e<d;e++){for(var l=l+",",g=0;g<d;g++){var j=a[e][g];0!=j&&(l+=(0>j?"-":l.endsWith(",")?"":"+")+(1==Math.abs(j)?"":""+H(Math.abs(j)))+"x"+(g+1))}l+=JS.SymmetryOperation.xyzFraction12(H(c[e][0]*(b?1:12)),12,!1,!0)}return JU.PT.rep(l.substring(1),",+",",")},"JU.Matrix,JU.Matrix,~B");d(b,"toString",function(){return null==
this.rsvs?oa(this,JS.SymmetryOperation,"toString",[]):oa(this,JS.SymmetryOperation,"toString",[])+" "+this.rsvs.toString()});d(b,"getMagneticOp",function(){return 2147483647==this.magOp?this.magOp=v(this.determinant3()*this.timeReversal):this.magOp});d(b,"setTimeReversal",function(a){this.timeReversal=a;0<=this.xyz.indexOf("m")&&(this.xyz=this.xyz.substring(0,this.xyz.indexOf("m")));0!=a&&(this.xyz+=1==a?",m":",-m")},"~N");d(b,"getCentering",function(){this.isFinalized||this.doFinalize();null==this.centering&&
!this.unCentered&&(0==this.modDim&&1==this.m00&&1==this.m11&&1==this.m22&&0==this.m01&&0==this.m02&&0==this.m10&&0==this.m12&&0==this.m20&&0==this.m21&&(0!=this.m03||0!=this.m13||0!=this.m23)?(this.isCenteringOp=!0,this.centering=JU.V3.new3(this.m03,this.m13,this.m23)):(this.unCentered=!0,this.centering=null));return this.centering});d(b,"fixMagneticXYZ",function(a,c,b){if(0==this.timeReversal)return c;var d=c.indexOf("m"),d=d-H((3-this.timeReversal)/2);c=0>d?c:c.substring(0,d);if(!b)return c+(0<
this.timeReversal?" +1":" -1");a=JU.M4.newM4(a);a.m03=a.m13=a.m23=0;0>this.getMagneticOp()&&a.scale(-1);return c+="("+JU.PT.rep(JU.PT.rep(JU.PT.rep(JS.SymmetryOperation.getXYZFromMatrix(a,!1,!1,!1),"x","mx"),"y","my"),"z","mz")+")"},"JU.M4,~S,~B");d(b,"getInfo",function(){null==this.info&&(this.info=new java.util.Hashtable,this.info.put("xyz",this.xyz),null!=this.centering&&this.info.put("centering",this.centering),this.info.put("index",Integer.$valueOf(this.number-1)),this.info.put("isCenteringOp",
Boolean.$valueOf(this.isCenteringOp)),null!=this.linearRotTrans&&this.info.put("linearRotTrans",this.linearRotTrans),this.info.put("modulationDimension",Integer.$valueOf(this.modDim)),this.info.put("matrix",JU.M4.newM4(this)),3.4028235E38!=this.magOp&&this.info.put("magOp",Float.$valueOf(this.magOp)),this.info.put("id",Integer.$valueOf(this.opId)),this.info.put("timeReversal",Integer.$valueOf(this.timeReversal)),null!=this.xyzOriginal&&this.info.put("xyzOriginal",this.xyzOriginal));return this.info});
b.normalizeOperationToCentroid=d(b,"normalizeOperationToCentroid",function(a,c,b,d,l){if(!(0>=l)){var e=0,g=0,j=0;null==JS.SymmetryOperation.atomTest&&(JS.SymmetryOperation.atomTest=new JU.P3);for(var m=d+l;d<m;d++)c.rotTrans2(b[d],JS.SymmetryOperation.atomTest),e+=JS.SymmetryOperation.atomTest.x,g+=JS.SymmetryOperation.atomTest.y,j+=JS.SymmetryOperation.atomTest.z;e/=l;g/=l;for(j/=l;-0.001>e||1.001<=e;)c.m03+=0>e?1:-1,e+=0>e?1:-1;if(1<a)for(;-0.001>g||1.001<=g;)c.m13+=0>g?1:-1,g+=0>g?1:-1;if(2<a)for(;-0.001>
j||1.001<=j;)c.m23+=0>j?1:-1,j+=0>j?1:-1}},"~N,JU.M4,~A,~N,~N");b.getLatticeCentering=d(b,"getLatticeCentering",function(a){for(var c=new JU.Lst,b=0;b<a.length;b++){var d=null==a[b]?null:a[b].getCentering();null!=d&&c.addLast(JU.P3.newP(d))}return c},"~A");d(b,"getOpIsCCW",function(){-1==this.opType&&this.setOpTypeAndOrder();return this.opIsCCW});d(b,"getOpType",function(){-1==this.opType&&this.setOpTypeAndOrder();return this.opType});d(b,"getOpOrder",function(){-1==this.opType&&this.setOpTypeAndOrder();
return this.opOrder});d(b,"getOpPoint",function(){-1==this.opType&&this.setOpTypeAndOrder();return this.opPoint});d(b,"getOpAxis",function(){-1==this.opType&&this.setOpTypeAndOrder();return this.opAxis});d(b,"getOpPoint2",function(){return this.opPoint2});d(b,"getOpTrans",function(){-1==this.opType&&this.setOpTypeAndOrder();return null==this.opTrans?this.opTrans=new JU.V3:this.opTrans});b.opGet3code=d(b,"opGet3code",function(a){for(var c=0,b=y(4,0),d=0;3>d;d++){a.getRow(d,b);for(var l=0;3>l;l++)switch(v(b[l])){case 1:c|=
l+1<<(2-d<<3);break;case -1:c|=16+l+1<<(2-d<<3)}}return c},"JU.M4");b.opGet3x=d(b,"opGet3x",function(a){if(0!=a.m22)return JS.SymmetryOperation.x;a=JS.SymmetryOperation.opGet3code(a);for(var c=0;8>c;c++)if(a==JS.SymmetryOperation.C3codes[c])return null==JS.SymmetryOperation.xneg&&(JS.SymmetryOperation.xneg=JU.V3.newV(JS.SymmetryOperation.x),JS.SymmetryOperation.xneg.scale(-1)),JS.SymmetryOperation.xneg;return JS.SymmetryOperation.x},"JU.M4");d(b,"setOpTypeAndOrder",function(){this.clearOp();var a=
Math.round(this.determinant3()),c=Math.round(this.m00+this.m11+this.m22),b=0,d=0,l=JS.SymmetryOperation.x;switch(c){case 3:JS.SymmetryOperation.hasTrans(this)?(this.opType=1,this.opTrans=new JU.V3,this.getTranslation(this.opTrans),this.opOrder=2):(this.opType=0,this.opOrder=1);return;case -3:this.opType=4;b=2;break;default:b=c*a+3,5==b&&(b=6),0<a?(this.opType=2,d=H(180*Math.acos((c-1)/2)/3.141592653589793),120==d&&(null==this.opX&&(this.opX=JS.SymmetryOperation.opGet3x(this)),l=this.opX)):2==b?this.opType=
8:(this.opType=6,3==b&&(b=6),d=H(180*Math.acos((-c-1)/2)/3.141592653589793),120==d&&(null==this.opX&&(this.opX=JS.SymmetryOperation.opGet3x(this)),l=this.opX))}this.opOrder=b;var e=new JU.M4,a=new JU.P3,c=JU.P3.newP(l);e.setM4(this);for(var g=new JU.P3,j=JU.P3.newP(c),m=new JU.P3,k=JU.P3.newP(c),q=new JU.P3,p=1;p<b;p++)e.mul(this),this.rotTrans(a),this.rotTrans(c),1==p&&q.setT(c),g.add(a),j.add(c),6==this.opType&&(0==p%2?k.add(c):m.add(c));this.opTrans=new JU.V3;e.getTranslation(this.opTrans);this.opTrans.scale(1/
b);e=JS.SymmetryOperation.approx6(this.opTrans.length());p=1;this.opPoint=new JU.P3;var r=null,n=!0;switch(this.opType){case 4:j.add2(c,l);j.scale(0.5);this.opPoint=JU.P3.newP(JS.SymmetryOperation.opClean6(j));n=JS.SymmetryOperation.checkOpPoint(this.opPoint);break;case 6:m.scale(2/b);k.scale(2/b);r=JU.V3.newVsub(m,k);r.normalize();this.opAxis=JS.SymmetryOperation.opClean6(r);g.add2(m,k);j.scale(1/b);this.opPoint.setT(JS.SymmetryOperation.opClean6(j));n=JS.SymmetryOperation.checkOpPoint(this.opPoint);
180!=d&&(c.cross(l,c),this.opIsCCW=Boolean.$valueOf(0>c.dot(r)));break;case 2:r=JU.V3.newVsub(j,g);r.normalize();this.opAxis=JS.SymmetryOperation.opClean6(r);g.scale(1/b);a.setT(g);0<e&&g.sub(this.opTrans);this.opPoint.setT(g);JS.SymmetryOperation.opClean6(this.opPoint);180!=d&&(c.cross(l,c),this.opIsCCW=Boolean.$valueOf(0>c.dot(r)));if(n=(new Boolean(n&JS.SymmetryOperation.checkOpAxis(a,0==e?this.opAxis:this.opTrans,g,new JU.V3,new JU.V3,null))).valueOf())this.opPoint.setT(g),JS.SymmetryOperation.checkOpAxis(this.opPoint,
this.opAxis,c,new JU.V3,new JU.V3,this.opPoint)&&(this.opPoint2=JU.P3.newP(c)),0<e&&(g.scaleAdd2(0.5,this.opTrans,this.opPoint),n=JS.SymmetryOperation.checkOpPoint(g),null!=this.opPoint2&&(g.scaleAdd2(0.5,this.opTrans,this.opPoint2),JS.SymmetryOperation.checkOpPoint(g)||(this.opPoint2=null)));0>r.dot(a)&&(n=!1);0<e&&0==this.opTrans.z&&1.25==this.opTrans.lengthSquared()?(p=1.25,this.opIsLong=!0):p=1;break;case 8:a.sub(this.opTrans),a.scale(0.5),this.opPoint.setT(a),q.sub(this.opTrans),this.opAxis=
JU.V3.newVsub(q,l),c.scaleAdd2(0.5,this.opAxis,l),this.opAxis.normalize(),this.opPlane=new JU.P4,a.set(l.x+1.1,l.y+1.7,l.z+2.1),a.scale(0.5),this.rotTrans(a),a.sub(this.opTrans),a.scaleAdd2(0.5,l,a),a.scale(0.5),r=new JU.V3,n=JS.SymmetryOperation.checkOpPlane(this.opPoint,a,c,this.opAxis,this.opPlane,r,new JU.V3),JS.SymmetryOperation.opClean6(this.opPlane),0==JS.SymmetryOperation.approx6(this.opPlane.w)&&(this.opPlane.w=0),JS.SymmetryOperation.approx6Pt(this.opAxis),JS.SymmetryOperation.normalizePlane(this.opPlane),
0<e&&(0==this.opTrans.z&&1.25==this.opTrans.lengthSquared()||0.5==this.opTrans.z&&1.5==this.opTrans.lengthSquared())?(p=1.25,this.opIsLong=!0):p=0.78}if(0<e){JS.SymmetryOperation.opClean6(this.opTrans);if(8==this.opType&&(1==this.opTrans.x||1==this.opTrans.y||1==this.opTrans.z)&&-1==this.m22)n=!1;this.opType|=1;if(Math.abs(JS.SymmetryOperation.approx(this.opTrans.x))>=p||Math.abs(JS.SymmetryOperation.approx(this.opTrans.y))>=p||Math.abs(JS.SymmetryOperation.approx(this.opTrans.z))>=p)n=!1}else this.opTrans=
null;n||(this.isIrrelevant=!0)});b.normalizePlane=d(b,"normalizePlane",function(a){JS.SymmetryOperation.approx6Pt(a);a.w=JS.SymmetryOperation.approx6(a.w);(0<a.w||0==a.w&&(0>a.x||0==a.x&&0>a.y||0==a.y&&0>a.z))&&a.scale4(-1);JS.SymmetryOperation.opClean6(a);a.w=JS.SymmetryOperation.approx6(a.w)},"JU.P4");b.isCoaxial=d(b,"isCoaxial",function(a){return 1==Math.abs(JS.SymmetryOperation.approx(a.x))||1==Math.abs(JS.SymmetryOperation.approx(a.y))||1==Math.abs(JS.SymmetryOperation.approx(a.z))},"JU.T3");
d(b,"clearOp",function(){this.isFinalized||this.doFinalize();this.isIrrelevant=!1;this.opIsCCW=this.opPlane=this.opPoint=this.opPoint2=this.opTrans=null;this.opIsLong=!1});b.hasTrans=d(b,"hasTrans",function(a){return 0!=JS.SymmetryOperation.approx6(a.m03)||0!=JS.SymmetryOperation.approx6(a.m13)||0!=JS.SymmetryOperation.approx6(a.m23)},"JU.M4");b.checkOpAxis=d(b,"checkOpAxis",function(a,c,b,d,l,e){null==JS.SymmetryOperation.opPlanes&&(JS.SymmetryOperation.opPlanes=JU.BoxInfo.getBoxFacesFromOABC(null));
for(var g=JU.BoxInfo.faceOrder,j=null==e?1:-1,m=0;6>m;m++){var k=JU.Measure.getIntersection(a,c,JS.SymmetryOperation.opPlanes[g[m]],b,d,l);if(null!=k&&JS.SymmetryOperation.checkOpPoint(k)&&0>c.dot(d)*j&&(null==e||0<=JS.SymmetryOperation.approx(e.distance(k)-0.5)))return!0}return!1},"JU.P3,JU.V3,JU.P3,JU.V3,JU.V3,JU.P3");b.opClean6=d(b,"opClean6",function(a){0==JS.SymmetryOperation.approx6(a.x)&&(a.x=0);0==JS.SymmetryOperation.approx6(a.y)&&(a.y=0);0==JS.SymmetryOperation.approx6(a.z)&&(a.z=0);return a},
"JU.T3");b.checkOpPoint=d(b,"checkOpPoint",function(a){return JS.SymmetryOperation.checkOK(a.x,0)&&JS.SymmetryOperation.checkOK(a.y,0)&&JS.SymmetryOperation.checkOK(a.z,0)},"JU.T3");b.checkOK=d(b,"checkOK",function(a,c){return 0!=c||0<=JS.SymmetryOperation.approx(a)&&1>=JS.SymmetryOperation.approx(a)},"~N,~N");b.checkOpPlane=d(b,"checkOpPlane",function(a,c,b,d,l,e,g){JU.Measure.getPlaneThroughPoints(a,c,b,e,g,l);c=JU.BoxInfo.unitCubePoints;d=b=0;for(g=8;0<=--g;){var j=JU.Measure.getPlaneProjection(c[g],
l,a,e);switch(v(Math.signum(JS.SymmetryOperation.approx6(j)))){case 1:if(0<d)return!0;b++;break;case -1:if(0<b)return!0;d++}}return!(8==d||8==b)},"JU.P3,JU.P3,JU.P3,JU.V3,JU.P4,JU.V3,JU.V3");b.getAdditionalOperations=d(b,"getAdditionalOperations",function(a){for(var c=a.length,b=new JU.Lst,d=new JU.SB,l=new java.util.Hashtable,e=0;e<c;e++){var g=a[e];b.addLast(g);var j=g.getOpName(1);d.append(j).appendC(";");0!=(g.getOpType()&8)&&JS.SymmetryOperation.addPlaneMap(l,g)}for(e=1;e<c;e++)a[e].addOps(d,
b,l,c,e);return b.toArray(Array(b.size()))},"~A");d(b,"addOps",function(a,c,b,d,l){var e=new JU.V3;this.getTranslation(e);for(var g=8==(this.getOpType()&8),j=new JU.V3,m=null,k=3;-3<=--k;)for(var q=3;-3<=--q;)for(var p=3;-3<=--p;)null==m&&(m=new JS.SymmetryOperation(null,0,!1)),j.set(k,q,p),!this.checkOpSimilar(j)&&m.opCheckAdd(this,e,d,j,a,c,l+1)&&(g&&JS.SymmetryOperation.addPlaneMap(b,m),m=null)},"JU.SB,JU.Lst,java.util.Map,~N,~N");b.addPlaneMap=d(b,"addPlaneMap",function(a,c){var b=c.getOpName(0),
d=a.get(b);c.isCoincident=!1;var l=8==c.opType;if(null==d)a.put(b,d=new JU.Lst);else if(b=d.get(0),b.isCoincident)c.isCoincident=!0;else if(l||8==b.opType){c.isCoincident=!0;for(l=d.size();0<=--l;)d.get(l).isCoincident=!0}d.addLast(c)},"java.util.Map,JS.SymmetryOperation");d(b,"checkOpSimilar",function(a){switch(this.getOpType()&-2){default:return!1;case 0:return!0;case 2:return 0==JS.SymmetryOperation.approx6(a.dot(this.opAxis)-a.length());case 8:return 0==JS.SymmetryOperation.approx6(a.dot(this.opAxis))}},
"JU.V3");d(b,"opCheckAdd",function(a,c,b,d,l,e){this.setM4(a);a=JU.V3.newV(d);a.add(c);this.setTranslation(a);this.isFinalized=!0;this.setOpTypeAndOrder();return!this.isIrrelevant&&(0!=this.opType&&1!=this.opType)&&(c=this.getOpName(1)+";",0>l.indexOf(c))?(l.append(c),e.addLast(this),this.isFinalized=!0,this.xyz=JS.SymmetryOperation.getXYZFromMatrix(this,!1,!1,!1),!0):!1},"JS.SymmetryOperation,JU.V3,~N,JU.V3,JU.SB,JU.Lst,~N");b.approx6Pt=d(b,"approx6Pt",function(a){null!=a&&(a.x=JS.SymmetryOperation.approx6(a.x),
a.y=JS.SymmetryOperation.approx6(a.y),a.z=JS.SymmetryOperation.approx6(a.z))},"JU.T3");b.normalize12ths=d(b,"normalize12ths",function(a){a.x=JU.PT.approx(a.x,12);a.y=JU.PT.approx(a.y,12);a.z=JU.PT.approx(a.z,12)},"JU.V3");d(b,"getCode",function(){if(null!=this.opAxisCode)return this.opAxisCode;var a=this.getOpName(2).charAt(0),c=this.opOrder,b=null==this.opIsCCW?0:this.opIsCCW===Boolean.TRUE?1:2;switch(a.charCodeAt(0)){case 71:a=JS.SymmetryOperation.getGlideFromTrans(this.opTrans,this.opPlane);case 80:JS.SymmetryOperation.isCoaxial(this.opAxis)||
(a="P"==a?"p":String.fromCharCode(a.charCodeAt(0)-32));break;case 83:var d=this.opTrans.length();if(null!=this.opIsCCW&&d<(1<d?6:0.5)==(this.opIsCCW===Boolean.TRUE))a="w";break;case 82:JS.SymmetryOperation.isCoaxial(this.opAxis)||(a="o"),0==this.opPoint.length()&&(a="o"==a?"q":"Q")}return this.opAxisCode=""+a+"."+String.fromCharCode(48+c)+"."+b+"."});b.getGlideFromTrans=d(b,"getGlideFromTrans",function(a,c){var b=Math.abs(JS.SymmetryOperation.approx(12*a.x)),d=Math.abs(JS.SymmetryOperation.approx(12*
a.y)),l=Math.abs(JS.SymmetryOperation.approx(12*a.z));9==b&&(b=3);9==d&&(d=3);9==l&&(l=3);return 0!=b&&0!=d&&0!=l?3==b&&3==d&&3==l?"d":6==b&&6==d&&6==l?"n":"g":0!=b&&0!=d||0!=d&&0!=l||0!=l&&0!=b?3==b&&3==d||3==b&&3==l||3==d&&3==l?"d":6==b&&6==d||6==b&&6==l||6==d&&6==l?0==b&&0==c.x||0==d&&0==c.y||0==l&&0==c.z?"g":"n":"g":0!=b?"a":0!=d?"b":"c"},"JU.T3,JU.T3");b.rotateAndTranslatePoint=d(b,"rotateAndTranslatePoint",function(a,c,b,d,l,e){a.rotTrans2(c,e);e.add3(b,d,l)},"JU.M4,JU.P3,~N,~N,~N,JU.P3");b.atomTest=
null;b.twelfths=Q(-1,"0 1/12 1/6 1/4 1/3 5/12 1/2 7/12 2/3 3/4 5/6 11/12".split(" "));b.labelsXYZ=Q(-1,["x","y","z"]);b.labelsXn=Q(-1,"x1 x2 x3 x4 x5 x6 x7 x8 x9 x10 x11 x12 x13".split(" "));b.labelsXnSub=Q(-1,"xyzabcdefghij".split(""));b.x=JU.P3.new3(3.141592653589793,2.718281828459045,8.539734222673566);b.C3codes=M(-1,[200978,1184513,1245458,135953,1245442,131857,200962,1180417]);b.xneg=null;b.opPlanes=null});X("JS");ba(null,"JS.SymmetryInfo",["JU.PT","JS.SpaceGroup","$.SymmetryOperation","JU.SimpleUnitCell"],
function(){var b=O(function(){this.isMultiCell=this.coordinatesAreFractional=!1;this.cellRange=this.infoStr=this.additionalOperations=this.symmetryOperations=this.sgTitle=this.sgName=null;this.latticeType="P";this.intlTableNoFull=this.intlTableNo=null;this.spaceGroupIndex=0;this.sgDerived=this.strSUPERCELL=this.spaceGroupF2CParams=this.spaceGroupF2CTitle=this.spaceGroupF2C=null;this.isActive=!0;aa(this,arguments)},JS,"SymmetryInfo",null);d(b,"setSymmetryInfo",function(a,c,b){var d;if(null==b){this.spaceGroupIndex=
a.get("spaceGroupIndex").intValue();this.cellRange=a.get("unitCellRange");this.sgName=a.get("spaceGroup");this.spaceGroupF2C=a.get("f2c");this.spaceGroupF2CTitle=a.get("f2cTitle");this.spaceGroupF2CParams=a.get("f2cParams");this.sgTitle=a.get("spaceGroupTitle");this.strSUPERCELL=a.get("supercell");if(null==this.sgName||""===this.sgName)this.sgName="spacegroup unspecified";this.intlTableNo=a.get("intlTableNo");this.intlTableNoFull=a.get("intlTableNoFull");b=a.get("latticeType");this.latticeType=null==
b?"P":b.charAt(0);d=a.containsKey("symmetryCount")?a.get("symmetryCount").intValue():0;this.symmetryOperations=a.remove("symmetryOps");this.isMultiCell=(this.coordinatesAreFractional=a.containsKey("coordinatesAreFractional")?a.get("coordinatesAreFractional").booleanValue():!1)&&null!=this.symmetryOperations}else this.cellRange=null,this.sgName=b.getName(),this.intlTableNoFull=b.intlTableNumberFull,this.intlTableNo=b.intlTableNumber,this.latticeType=b.latticeType,d=b.getOperationCount(),this.symmetryOperations=
b.finalOperations,this.coordinatesAreFractional=!0;this.infoStr="Spacegroup: "+this.sgName;if(null!=this.symmetryOperations){var l="";b="\nNumber of symmetry operations: "+(0==d?1:d)+"\nSymmetry Operations:";for(var e=0;e<d;e++){var g=this.symmetryOperations[e];b+="\n"+g.fixMagneticXYZ(g,g.xyz,!0);g.isCenteringOp&&(l+=" ("+JU.PT.rep(JU.PT.replaceAllCharacters(g.xyz,"xyz","0"),"0+","")+")")}0<l.length&&(this.infoStr+="\nCentering: "+l);this.infoStr+=b;this.infoStr+="\n"}null==c&&(c=a.get("unitCellParams"));
c=JU.SimpleUnitCell.isValid(c)?c:null;null==c&&(this.coordinatesAreFractional=!1,this.cellRange=this.symmetryOperations=null,this.infoStr="",a.remove("unitCellParams"));return c},"java.util.Map,~A,JS.SpaceGroup");d(b,"getAdditionalOperations",function(){null==this.additionalOperations&&null!=this.symmetryOperations&&(this.additionalOperations=JS.SymmetryOperation.getAdditionalOperations(this.symmetryOperations));return this.additionalOperations});d(b,"getDerivedSpaceGroup",function(){null==this.sgDerived&&
(this.sgDerived=JS.SpaceGroup.getSpaceGroupFromIndex(this.spaceGroupIndex));return this.sgDerived});d(b,"setIsActiveCell",function(a){return this.isActive!=a&&!0==(this.isActive=a)},"~B");d(b,"getSpaceGroupTitle",function(){return this.isActive&&null!=this.spaceGroupF2CTitle?this.spaceGroupF2CTitle:this.sgName.startsWith("cell=")?this.sgName:this.sgTitle})});X("JS");ba(["JU.P3","$.V3"],"JS.SymmetryDesc","java.util.Hashtable JU.BS $.Lst $.M4 $.Measure $.P4 $.PT $.Quat $.SB JS.T JS.SpaceGroup $.Symmetry $.SymmetryOperation JU.Escape $.Logger".split(" "),
function(){var b=O(function(){this.modelSet=null;aa(this,arguments)},JS,"SymmetryDesc",null);d(b,"set",function(a){this.modelSet=a;return this},"JM.ModelSet");b.getType=d(b,"getType",function(a){var c;if(null==a)return 1073742001;if(a.equalsIgnoreCase("matrix"))return 12;if(a.equalsIgnoreCase("description"))return 1825200146;if(a.equalsIgnoreCase("axispoint"))return 134217751;if(a.equalsIgnoreCase("time"))return 268441089;if(a.equalsIgnoreCase("info"))return 1275068418;if(a.equalsIgnoreCase("element"))return 1086326789;
if(a.equalsIgnoreCase("invariant"))return 36868;c=JS.T.getTokFromName(a);if(0!=c)return c;c=JS.SymmetryDesc.getKeyType(a);return 0>c?c:1073742327},"~S");b.getKeyType=d(b,"getKeyType",function(a){"type".equals(a)&&(a="_type");for(var c=0;c<JS.SymmetryDesc.keys.length;c++)if(a.equalsIgnoreCase(JS.SymmetryDesc.keys[c]))return-1-c;return 0},"~S");b.nullReturn=d(b,"nullReturn",function(a){switch(a){case 135176:return";draw ID sym* delete;draw ID sg* delete;";case 1073741961:case 1825200146:case 1073741974:case 1145047050:case 1145047053:case 11:case 1073742078:return"";
case 1153433601:return new JU.BS;default:return null}},"~N");b.getInfo=d(b,"getInfo",function(a,c){if(0==a.length)return"";if(0>c&&-c<=JS.SymmetryDesc.keys.length&&-c<=a.length)return a[-1-c];switch(c){case 1073742327:case 1073741982:return a;case 1275068418:for(var b=new java.util.Hashtable,d=0,l=a.length;d<l;d++){var e=3==d?"draw":7==d?"axispoint":JS.SymmetryDesc.keys[d];null!=a[d]&&b.put(e,a[d])}return b;case 1073741961:return a[0]+"  \t"+a[2];case 1145047050:return a[0];case 1145047053:return a[19];
case 1073742078:return a[1];default:case 1825200146:return a[2];case 134217764:if(!JU.Logger.debugging)return a[3];case 135176:return a[3]+"\nprint "+JU.PT.esc(a[0]+" "+a[2]);case 1145047051:return a[4];case 1073742178:return a[5];case 12289:return a[6];case 134217751:return a[7];case 1073741854:return a[8];case 134217729:return a[9];case 12:return a[10];case 1814695966:return a[11];case 4160:return a[12];case 268441089:return a[13];case 134217750:return a[14];case 1140850696:return a[15];case 1073741974:return a[16];
case 1086326789:return Q(-1,[a[6],a[7],a[8],a[14],a[5]]);case 36868:return null!=a[6]?a[6]:null!=a[8]?Q(-1,[a[7],a[8],a[5]]):null!=a[5]?"none":null!=a[14]?a[14]:"identity"}},"~A,~N");b.getInfoBS=d(b,"getInfoBS",function(a){var c=new JU.BS;if(0>a&&-a<=JS.SymmetryDesc.keys.length)return c.set(-1-a),c;switch(a){case 0:case 1153433601:case 1073742001:case 1073742327:case 1073741982:case 1275068418:c.setBits(0,JS.SymmetryDesc.keys.length);break;case 1073741961:c.set(0);c.set(2);break;case 1145047050:c.set(0);
break;case 1145047053:c.set(19);break;case 1073742078:c.set(1);break;default:case 1825200146:c.set(2);break;case 135176:c.set(0);c.set(2);c.set(3);break;case 1145047051:c.set(4);break;case 1073742178:c.set(5);break;case 12289:c.set(6);break;case 134217751:c.set(7);break;case 1073741854:c.set(8);break;case 134217729:c.set(9);break;case 12:c.set(10);break;case 1814695966:c.set(11);break;case 4160:c.set(12);break;case 268441089:c.set(13);break;case 134217750:c.set(14);break;case 1140850696:c.set(15);
break;case 1073741974:c.set(16);break;case 1086326789:case 36868:c.set(5),c.set(6),c.set(7),c.set(8),c.set(14),c.set(22)}return c},"~N");d(b,"createInfoArray",function(a,c,b,d,l,e,g,j,m,k,q){a.isFinalized||a.doFinalize();var p=1==m.cardinality()&&m.get(10),r=-1==a.timeReversal;0==e&&(e=1);JS.SymmetryDesc.vtrans.set(0,0,0);var n=null,t=null==b||Double.isNaN(b.x)?c.getCartesianOffset():b;if(null!=d){JS.SymmetryDesc.pta01.setT(t);JS.SymmetryDesc.pta02.setT(d);c.toFractional(JS.SymmetryDesc.pta01,!1);
c.toFractional(JS.SymmetryDesc.pta02,!1);a.rotTrans(JS.SymmetryDesc.pta01);JS.SymmetryDesc.ptemp.setT(JS.SymmetryDesc.pta01);c.unitize(JS.SymmetryDesc.pta01);JS.SymmetryDesc.vtrans.setT(JS.SymmetryDesc.pta02);c.unitize(JS.SymmetryDesc.pta02);if(1.96E-6<=JS.SymmetryDesc.pta01.distanceSquared(JS.SymmetryDesc.pta02))return null;JS.SymmetryDesc.vtrans.sub(JS.SymmetryDesc.ptemp)}var s=JU.M4.newM4(a);s.add(JS.SymmetryDesc.vtrans);m.get(10)&&(null!=d&&t.equals(d))&&(s.m00=Math.round(s.m00),s.m01=Math.round(s.m01),
s.m02=Math.round(s.m02),s.m03=Math.round(s.m03),s.m10=Math.round(s.m10),s.m11=Math.round(s.m11),s.m12=Math.round(s.m12),s.m13=Math.round(s.m13),s.m20=Math.round(s.m20),s.m21=Math.round(s.m21),s.m22=Math.round(s.m22),s.m23=Math.round(s.m23));var y=0!=a.timeReversal;if(p&&!y)return a=JS.SymmetryDesc.getKeyType("matrix"),c=Array(-a),c[-1-a]=s,c;p=new JU.V3;JS.SymmetryDesc.pta01.set(1,0,0);JS.SymmetryDesc.pta02.set(0,1,0);var x=JU.P3.new3(0,0,1);JS.SymmetryDesc.pta01.add(t);JS.SymmetryDesc.pta02.add(t);
x.add(t);var u=JS.SymmetryDesc.rotTransCart(a,c,t,JS.SymmetryDesc.vtrans),R=JS.SymmetryDesc.rotTransCart(a,c,JS.SymmetryDesc.pta01,JS.SymmetryDesc.vtrans),Q=JS.SymmetryDesc.rotTransCart(a,c,JS.SymmetryDesc.pta02,JS.SymmetryDesc.vtrans),B=JS.SymmetryDesc.rotTransCart(a,c,x,JS.SymmetryDesc.vtrans),z=JU.V3.newVsub(R,u),F=JU.V3.newVsub(Q,u),N=JU.V3.newVsub(B,u);JS.SymmetryOperation.approx6Pt(JS.SymmetryDesc.vtrans);var w=new JU.V3;w.cross(z,F);var A=0>w.dot(N);A&&(R.sub2(u,z),Q.sub2(u,F),B.sub2(u,N));
var D=JU.Quat.getQuaternionFrame(u,R,Q).div(JU.Quat.getQuaternionFrame(t,JS.SymmetryDesc.pta01,JS.SymmetryDesc.pta02)),D=JU.Quat.new4(D.q1,D.q2,D.q3,D.q0),C=JU.Measure.computeHelicalAxis(t,u,D),D=JU.P3.newP(C[0]),S=JU.P3.newP(C[1]),ca=v(Math.abs(JU.PT.approx(C[3].x,1))),M=JS.SymmetryOperation.approx(C[3].y);A&&(R.add2(u,z),Q.add2(u,F),B.add2(u,N));C=JU.V3.newVsub(u,t);0.1>C.length()&&(C=null);var O=null,P=null,Z=null,da=0,V=0,aa=0==ca,ha=!aa,ia=!1,T=!1,ea=!ha&&!A;if(ha||A)C=null;if(A&&aa)P=JU.P3.newP(t),
P.add(u),P.scale(0.5),O=u,ia=!0;else if(A){var G=0==M?new JU.V3:S,I=0;switch(ca){case 60:I=0.6666667;break;case 120:I=2;break;case 90:I=1;break;case 180:Z=JU.P3.newP(t);Z.add(G);D.scaleAdd2(0.5,G,t);0.1<Z.distance(u)?(C=JU.V3.newVsub(u,Z),p.setT(C),c.toFractional(p,!0)):C=null;w.setT(S);w.normalize();da=-w.x*D.x-w.y*D.y-w.z*D.z;n=JU.P4.new4(w.x,w.y,w.z,da);V=0.01>Math.abs(da)&&0.4<w.x*w.y?1.3:1.05;A=ha=!1;T=!0;break;default:A=!1}0!=I&&(w.sub2(t,D),w.add(u),w.sub(D),w.sub(G),w.scale(I),D.add(w),P=
new JU.P3,P.scaleAdd2(0.5,G,D),O=new JU.P3,O.scaleAdd2(-2,P,u),O.scale(-1))}else null!=C&&(JS.SymmetryDesc.ptemp.setT(C),c.toFractional(JS.SymmetryDesc.ptemp,!1),p.setT(JS.SymmetryDesc.ptemp),c.toCartesian(JS.SymmetryDesc.ptemp,!1),C.setT(JS.SymmetryDesc.ptemp));var X=ca;JS.SymmetryDesc.approx0(S);if(ha){var U=new JU.P3;w.setT(S);I=ca;A?(U.setT(O),I=O):0==M?(I=u,U.setT(D)):(I=u,U.scaleAdd2(0.5,w,D));JS.SymmetryDesc.ptemp.add2(D,w);I=Math.round(JU.Measure.computeTorsion(t,D,JS.SymmetryDesc.ptemp,I,
!0));0!=JS.SymmetryOperation.approx(I)&&(ca=I,0>ca&&(ca=360+ca))}var da=I=null,$=String.fromCharCode(0),Y=a.getOpOrder(),ja=a.getOpIsCCW();if(m.get(2)||m.get(15)){I=da="identity";if(ia)JS.SymmetryDesc.ptemp.setT(P),c.toFractional(JS.SymmetryDesc.ptemp,!1),I="Ci: "+JS.SymmetryDesc.strCoord(a,JS.SymmetryDesc.ptemp,a.isBio),da="inversion center";else if(ha)I=null==ja?"":ja===Boolean.TRUE?"(+)":"(-)",A?I=H(360/X)+"-bar"+I+" axis":0!=M?(JS.SymmetryDesc.ptemp.setT(S),c.toFractional(JS.SymmetryDesc.ptemp,
!1),I=H(360/X)+I+" ("+JS.SymmetryDesc.strCoord(a,JS.SymmetryDesc.ptemp,a.isBio)+") screw axis"):I="C"+H(360/X)+I+" axis",da=I;else if(null!=C){var ba=" "+JS.SymmetryDesc.strCoord(a,p,a.isBio);aa?(da=I="translation",I+=":"+ba):T&&(k&&(JS.SymmetryDesc.fixGlideTrans(p),C.setT(p),c.toCartesian(C,!0)),ba=" "+JS.SymmetryDesc.strCoord(a,p,a.isBio),$=JS.SymmetryOperation.getGlideFromTrans(p,S),da=I=$+"-glide plane",I+="|translation:"+ba)}else T&&(da=I="mirror plane");A&&!ia&&(JS.SymmetryDesc.ptemp.setT(P),
c.toFractional(JS.SymmetryDesc.ptemp,!1),I+="|at "+JS.SymmetryDesc.strCoord(a,JS.SymmetryDesc.ptemp,a.isBio));r&&(I+="|time-reversed",da+=" (time-reversed)")}var ga=!0,ba=ha&&!A&&0!=M;ba||(ga=JS.SymmetryDesc.checkHandedness(c,S),ga||(ca=-ca,0>ca&&(ca=360+ca),S.scale(-1)));var fa=!1,L=null;if(null!=l&&m.get(3))if(0==a.getOpType()||q&&a.isIrrelevant)System.out.println("!!SD irrelevent "+a.getOpTitle()+a.getOpPoint()),L="";else{var ka=null,L="\ndraw ID "+l+"_",E=new JU.SB;E.append(L).append("* delete");
k||(JS.SymmetryDesc.drawLine(E,L+"frame1X",0.15,t,JS.SymmetryDesc.pta01,"red"),JS.SymmetryDesc.drawLine(E,L+"frame1Y",0.15,t,JS.SymmetryDesc.pta02,"green"),JS.SymmetryDesc.drawLine(E,L+"frame1Z",0.15,t,x,"blue"));var x=null,la=0,na=0.2>t.distance(u);l=k?"<hover>"+l+": "+a.xyz+"\n"+I+"</hover>":null;if(ha){var $="red",X=ca,ma=1;w.setT(S);A&&($="purple");V="";k&&(D.setT(a.getOpPoint()),c.toCartesian(D,!1));U=new JU.P3;0!=M&&!A?(ka=L+"screw",$=ja===Boolean.TRUE?"orange":ja===Boolean.FALSE?"yellow":4==
Y?"lightgray":"grey",k||(JS.SymmetryDesc.drawLine(E,L+"rotLine1",0.1,t,D,"red"),JS.SymmetryDesc.ptemp.add2(D,w),JS.SymmetryDesc.drawLine(E,L+"rotLine2",0.1,u,JS.SymmetryDesc.ptemp,"red"),U.scaleAdd2(0.5,w,D))):(U.setT(D),ga||!na&&!k&&D.sub2(D,w),A?(ka=L+"rotinv",k?(w.normalize(),ja===Boolean.TRUE&&w.scale(-1)):0==M?(U.setT(P),w.scale(3*e),na?(JS.SymmetryDesc.ptemp.scaleAdd2(0.25,w,D),D.scaleAdd2(-0.24,w,D),U.scaleAdd2(0.31,w,U),$="cyan"):(JS.SymmetryDesc.ptemp.scaleAdd2(-1,w,D),JS.SymmetryDesc.drawLine(E,
L+"rotLine1",0.1,t,P,"red"),JS.SymmetryDesc.drawLine(E,L+"rotLine2",0.1,O,P,"red"))):na||(ma=t.distance(U),JS.SymmetryDesc.drawLine(E,L+"rotLine1",0.1,t,U,"red"),JS.SymmetryDesc.drawLine(E,L+"rotLine2",0.1,O,U,"red"))):(ka=L+"rot",w.scale(3*e),!na&&!k&&(JS.SymmetryDesc.drawLine(E,L+"rotLine1",0.1,t,U,"red"),JS.SymmetryDesc.drawLine(E,L+"rotLine2",0.1,u,U,"red")),U.setT(D),0==M&&na&&U.scaleAdd2(0.25,w,U)));k||(180<X&&(X=180-X),JS.SymmetryDesc.ptemp.add2(U,w),E.append(L).append("rotRotArrow arrow width 0.1 scale "+
JU.PT.escF(ma)+" arc ").append(JU.Escape.eP(U)).append(JU.Escape.eP(JS.SymmetryDesc.ptemp)),JS.SymmetryDesc.ptemp.setT(t),0.1>JS.SymmetryDesc.ptemp.distance(u)&&JS.SymmetryDesc.ptemp.set(Math.random(),Math.random(),Math.random()),E.append(JU.Escape.eP(JS.SymmetryDesc.ptemp)),JS.SymmetryDesc.ptemp.set(0,X-5*Math.signum(X),0),E.append(JU.Escape.eP(JS.SymmetryDesc.ptemp)).append(" color red"));(fa=fa||!a.opIsLong&&q&&0<M&&!A&&a.getOpTrans().length()>(2==Y?0.71:3==Y?0.578:4==Y?0.51:0.3))&&System.out.println("SD ignoring "+
a.getOpTrans().length()+" "+a.getOpTitle()+a.xyz);e=null;if(0==M&&!A){JS.SymmetryDesc.ptemp.scaleAdd2(0.5,w,D);D.scaleAdd2(k?-0.5:-0.45,w,D);if(q&&null!=(e=a.getOpPoint2()))U.setT(e),c.toCartesian(U,!1),U.scaleAdd2(-0.5,w,U);k&&this.scaleByOrder(w,Y,ja)}else q&&0!=M&&!A&&0.4<(G=a.getOpTrans().length())?ja!==Boolean.TRUE&&null!=ja&&0.5==G&&(fa=!0):k&&A&&(e=R,w.scale(-1),this.scaleByOrder(w,Y,ja),V="80");0<M&&!A&&(V=""+(90-v(90*(1*w.length()/M))));fa||(q=ka+Y+"rotVector1",JS.SymmetryDesc.drawVector(E,
L,q,"vector","0.1"+V,D,w,r?"gray":$,l),null!=e&&JS.SymmetryDesc.drawVector(E,L,q+"b","vector","0.1"+V,U,w,r?"gray":$,l))}else if(T){JS.SymmetryDesc.ptemp.sub2(Z,t);!k&&0.2<t.distance(Z)&&JS.SymmetryDesc.drawVector(E,L,"planeVector","vector","0.05",t,JS.SymmetryDesc.ptemp,r?"gray":"cyan",null);G=JU.P4.newPt(n);if(null==C)$="green";else{ka=L+"glide";switch($.charCodeAt(0)){case 103:$="gold";break;case 97:$="magenta";break;case 98:$="violet";break;case 99:$="blue";break;case 110:$="orange";break;case 100:$=
"grey";break;default:$="grey"}G.w+=0.01;k||(JS.SymmetryDesc.drawFrameLine("X",Z,z,0.15,JS.SymmetryDesc.ptemp,E,ka,"red"),JS.SymmetryDesc.drawFrameLine("Y",Z,F,0.15,JS.SymmetryDesc.ptemp,E,ka,"green"),JS.SymmetryDesc.drawFrameLine("Z",Z,N,0.15,JS.SymmetryDesc.ptemp,E,ka,"blue"))}G=this.modelSet.vwr.getTriangulator().intersectPlane(G,c.getCanonicalCopy(V,!0),3);if(null!=G){M=k&&a.isCoincident;x=new JU.P3;for(e=G.size();0<=--e;)V=G.get(e),E.append(L).append(null==C?"m":"g").append("planep").appendI(e).append(" ").append(JU.Escape.eP(V[0])).append(JU.Escape.eP(V[1])),
3==V.length?(!M||0==e%2!=(null==C))&&E.append(JU.Escape.eP(V[2])):(x.add(V[0]),x.add(V[1]),la+=2),E.append(" color translucent ").append($),null!=l&&E.append(" ").append(JU.PT.esc(l))}if(null==G||0==G.size())q?fa=!0:(JS.SymmetryDesc.ptemp.add2(D,S),E.append(L).append("planeCircle scale 2.0 circle ").append(JU.Escape.eP(D)).append(JU.Escape.eP(JS.SymmetryDesc.ptemp)).append(" color translucent ").append($).append(" mesh fill"),null!=l&&E.append(" ").append(JU.PT.esc(l)))}A&&(ka=L+"inv",ia?(E.append(L).append("invPoint diameter 0.4 ").append(JU.Escape.eP(P)),
null!=l&&E.append(" ").append(JU.PT.esc(l)),JS.SymmetryDesc.ptemp.sub2(O,t),k||JS.SymmetryDesc.drawVector(E,L,"Arrow","vector","0.05",t,JS.SymmetryDesc.ptemp,r?"gray":"cyan",null)):(4==Y&&(E.append(L).append("RotPoint diameter 0.3 color red").append(JU.Escape.eP(P)),null!=l&&E.append(" ").append(JU.PT.esc(l))),k||(E.append(" color cyan"),na||(JS.SymmetryDesc.ptemp.sub2(u,O),JS.SymmetryDesc.drawVector(E,L,"Arrow","vector","0.05",O,JS.SymmetryDesc.ptemp,r?"gray":"cyan",null)),1073742066!=g&&(w.setT(z),
w.scale(-1),JS.SymmetryDesc.drawFrameLine("X",O,w,0.15,JS.SymmetryDesc.ptemp,E,ka,"red"),w.setT(F),w.scale(-1),JS.SymmetryDesc.drawFrameLine("Y",O,w,0.15,JS.SymmetryDesc.ptemp,E,ka,"green"),w.setT(N),w.scale(-1),JS.SymmetryDesc.drawFrameLine("Z",O,w,0.15,JS.SymmetryDesc.ptemp,E,ka,"blue")))));null!=C&&(T&&k?null!=x&&(Z=x,Z.scale(1/la),Z.scaleAdd2(-0.5,C,Z)):null==Z&&(Z=k?t:JU.P3.newP(t)),null!=Z&&!fa&&JS.SymmetryDesc.drawVector(E,L,"transVector","vector",ea?"0.1":"0.05",Z,C,r&&!A&&!T&&!ha?"darkGray":
"gold",l));k||(JS.SymmetryDesc.ptemp2.setT(u),JS.SymmetryDesc.ptemp.sub2(R,u),JS.SymmetryDesc.ptemp.scaleAdd2(0.9,JS.SymmetryDesc.ptemp,JS.SymmetryDesc.ptemp2),JS.SymmetryDesc.drawLine(E,L+"frame2X",0.2,JS.SymmetryDesc.ptemp2,JS.SymmetryDesc.ptemp,"red"),JS.SymmetryDesc.ptemp.sub2(Q,u),JS.SymmetryDesc.ptemp.scaleAdd2(0.9,JS.SymmetryDesc.ptemp,JS.SymmetryDesc.ptemp2),JS.SymmetryDesc.drawLine(E,L+"frame2Y",0.2,JS.SymmetryDesc.ptemp2,JS.SymmetryDesc.ptemp,"green"),JS.SymmetryDesc.ptemp.sub2(B,u),JS.SymmetryDesc.ptemp.scaleAdd2(0.9,
JS.SymmetryDesc.ptemp,JS.SymmetryDesc.ptemp2),JS.SymmetryDesc.drawLine(E,L+"frame2Z",0.2,JS.SymmetryDesc.ptemp2,JS.SymmetryDesc.ptemp,"purple"),E.append("\nsym_point = "+JU.Escape.eP(t)),E.append("\nvar p0 = "+JU.Escape.eP(JS.SymmetryDesc.ptemp2)),W(t,"JM.Atom")?(E.append("\nvar set2 = within(0.2,p0);if(!set2){set2 = within(0.2,p0.uxyz.xyz)}"),E.append("\n set2 &= {_"+t.getElementSymbol()+"}")):E.append("\nvar set2 = p0.uxyz"),E.append("\nsym_target = set2;if (set2) {"),!na&&(1073742066!=g&&null==
d&&!j)&&(E.append(L).append("offsetFrameX diameter 0.20 @{set2.xyz} @{set2.xyz + ").append(JU.Escape.eP(z)).append("*0.9} color red"),E.append(L).append("offsetFrameY diameter 0.20 @{set2.xyz} @{set2.xyz + ").append(JU.Escape.eP(F)).append("*0.9} color green"),E.append(L).append("offsetFrameZ diameter 0.20 @{set2.xyz} @{set2.xyz + ").append(JU.Escape.eP(N)).append("*0.9} color purple")),E.append("\n}\n"));L=E.toString();JU.Logger.debugging&&JU.Logger.info(L)}null==C&&(p=null);ba&&(C=JU.V3.newV(S),
JS.SymmetryDesc.ptemp.setT(C),c.toFractional(JS.SymmetryDesc.ptemp,!1),p=JU.V3.newV(JS.SymmetryDesc.ptemp));T&&(ca=0);A?ia&&(p=C=S=D=null):aa&&(S=D=null);null!=S&&S.normalize();g=null;if(m.get(0)||m.get(17))g=a.isBio?s.toString():0<a.modDim?a.xyzOriginal:JS.SymmetryOperation.getXYZFromMatrix(s,!1,!1,!1),y&&(g=a.fixMagneticXYZ(s,g,!0));j=Array(20);for(e=m.nextSetBit(0);0<=e;e=m.nextSetBit(e+1))switch(e){case 0:j[e]=g;break;case 19:null!=b&&(null==d&&!a.isBio&&0==a.modDim)&&(JS.SymmetryDesc.pta02.setT(b),
c.toFractional(JS.SymmetryDesc.pta02,!0),s.rotTrans(JS.SymmetryDesc.pta02),JS.SymmetryDesc.ptemp.setT(JS.SymmetryDesc.pta02),c.unitize(JS.SymmetryDesc.pta02),JS.SymmetryDesc.vtrans.sub2(JS.SymmetryDesc.pta02,JS.SymmetryDesc.ptemp),s=JU.M4.newM4(a),s.add(JS.SymmetryDesc.vtrans),k=JS.SymmetryOperation.getXYZFromMatrix(s,!1,!1,!1),y&&(k=a.fixMagneticXYZ(s,k,!0)),j[e]=k);break;case 1:j[e]=a.xyzOriginal;break;case 2:j[e]=I;break;case 3:j[e]=L;break;case 4:j[e]=JS.SymmetryDesc.approx0(p);break;case 5:j[e]=
JS.SymmetryDesc.approx0(C);break;case 6:j[e]=JS.SymmetryDesc.approx0(P);break;case 7:j[e]=JS.SymmetryDesc.approx0(null!=D&&m.get(22)?t:D);break;case 8:j[e]=null==n?JS.SymmetryDesc.approx0(S):null;break;case 9:j[e]=0!=ca?Integer.$valueOf(ca):null;break;case 10:j[e]=s;break;case 11:j[e]=0<JS.SymmetryDesc.vtrans.lengthSquared()?JS.SymmetryDesc.vtrans:null;break;case 12:j[e]=a.getCentering();break;case 13:j[e]=Integer.$valueOf(a.timeReversal);break;case 14:null!=n&&m.get(22)&&(G=JU.Measure.distanceToPlane(n,
t),n.w-=G);j[e]=n;break;case 15:j[e]=da;break;case 16:j[e]=Integer.$valueOf(a.number);break;case 17:k=null;!a.isBio&&!g.equals(a.xyzOriginal)&&0<a.number&&(r=JS.SymmetryOperation.getMatrixFromXYZ(a.xyzOriginal,null,!1),r.sub(s),k=new JU.P3,r.getTranslation(k));j[e]=(0>a.number?0:a.number)+(null==k?" [0 0 0]":" ["+v(-k.x)+" "+v(-k.y)+" "+v(-k.z)+"]");break;case 18:j[e]=a.xyzCanonical}return j},"JS.SymmetryOperation,J.api.SymmetryInterface,JU.P3,JU.P3,~S,~N,~N,~B,JU.BS,~B,~B");b.fixGlideTrans=d(b,"fixGlideTrans",
function(a){a.x=JS.SymmetryDesc.fixGlideX(a.x);a.y=JS.SymmetryDesc.fixGlideX(a.y);a.z=JS.SymmetryDesc.fixGlideX(a.z)},"JU.V3");b.fixGlideX=d(b,"fixGlideX",function(a){switch(Math.round(12.001*a)){case 9:return-0.25;case -9:return 0.25;default:return a}},"~N");b.checkHandedness=d(b,"checkHandedness",function(a,c){var b,d,l;JS.SymmetryDesc.ptemp.set(1,0,0);a.toCartesian(JS.SymmetryDesc.ptemp,!1);b=JS.SymmetryDesc.approx0d(JS.SymmetryDesc.ptemp.dot(c));JS.SymmetryDesc.ptemp.set(0,1,0);a.toCartesian(JS.SymmetryDesc.ptemp,
!1);d=JS.SymmetryDesc.approx0d(JS.SymmetryDesc.ptemp.dot(c));JS.SymmetryDesc.ptemp.set(0,0,1);a.toCartesian(JS.SymmetryDesc.ptemp,!1);l=JS.SymmetryDesc.approx0d(JS.SymmetryDesc.ptemp.dot(c));return 0==b?0==d?0<l:0<d:0==l?0<b:0==d?0<l:0<b*d*l},"J.api.SymmetryInterface,JU.P3");d(b,"scaleByOrder",function(a,c,b){a.scale(1+0.3/c+(null==b?0:b===Boolean.TRUE?0.02:-0.02))},"JU.V3,~N,Boolean");b.drawLine=d(b,"drawLine",function(a,c,b,d,l,e){a.append(c).append(" diameter ").appendF(b).append(JU.Escape.eP(d)).append(JU.Escape.eP(l)).append(" color ").append(e)},
"JU.SB,~S,~N,JU.P3,JU.P3,~S");b.drawFrameLine=d(b,"drawFrameLine",function(a,c,b,d,l,e,g,j){l.setT(c);l.add(b);JS.SymmetryDesc.drawLine(e,g+"Pt"+a,d,c,l,"translucent "+j)},"~S,JU.P3,JU.V3,~N,JU.P3,JU.SB,~S,~S");b.drawVector=d(b,"drawVector",function(a,c,b,d,l,e,g,j,m){d.equals("vline")&&(JS.SymmetryDesc.ptemp2.add2(e,g),d="",g=JS.SymmetryDesc.ptemp2);a.append(c).append(b).append(" diameter ").append(l+" ").append(d).append(JU.Escape.eP(e)).append(JU.Escape.eP(g)).append(" color ").append(j);null!=
m&&a.append(' "'+m+'"')},"JU.SB,~S,~S,~S,~S,JU.T3,JU.T3,~S,~S");b.rotTransCart=d(b,"rotTransCart",function(a,b,d,h){d=JU.P3.newP(d);b.toFractional(d,!1);a.rotTrans(d);d.add(h);b.toCartesian(d,!1);return d},"JS.SymmetryOperation,J.api.SymmetryInterface,JU.P3,JU.V3");b.strCoord=d(b,"strCoord",function(a,b,d){JS.SymmetryDesc.approx0(b);return d?b.x+" "+b.y+" "+b.z:a.fcoord2(b)},"JS.SymmetryOperation,JU.T3,~B");b.approx0=d(b,"approx0",function(a){null!=a&&(a.x=JS.SymmetryDesc.approx0d(a.x),a.y=JS.SymmetryDesc.approx0d(a.y),
a.z=JS.SymmetryDesc.approx0d(a.z));return a},"JU.T3");b.approx0d=d(b,"approx0d",function(a){return 1E-4>Math.abs(a)?0:a},"~N");d(b,"getSymmetryInfo",function(a,b,d,h,l,e,g,j,m,k,q,p,n,K){var t=0,s=JS.SymmetryDesc.nullReturn(k);switch(k){case 1073741994:return""+d.getLatticeType();case 1073742001:t=1825200146;break;case 135176:t=135176;break;case 1275068418:switch(t=JS.SymmetryDesc.getType(m),t){case 1153433601:case 1073741961:case 1073742001:case 134217751:case 1086326789:case 36868:k=t;break;default:t=
JS.SymmetryDesc.getKeyType(m)}}var v=JS.SymmetryDesc.getInfoBS(t),x=-2==p,u=l,y=1073742066==n&&(1153433601==k||134217751==k)?j:null;null!=y&&(j=null);var H=u=null,B=null;if(null==j){if(null==h){B=x?d.getAdditionalOperations():d.getSymmetryOperations();if(null==B||Math.abs(l)>B.length||0==l)return s;u=Math.abs(l)-1;h=null==e?B[u].xyz:B[u].getxyzTrans(e);H=B[u].xyzOriginal}else u=l=0;var z=new JS.Symmetry;z.setSpaceGroup(!1);var F=null!=d&&d.isBio();j=F?z.addBioMoleculeOperation(d.getSpaceGroup().finalOperations[u],
0>l):z.addSpaceGroupOperation((0>l?"!":"=")+h,Math.abs(l));if(0>j)return s;var N=z.getSpaceGroupOperation(j);K&&(N.isCoincident=B[u].isCoincident);null!=H&&(N.xyzOriginal=H);N.number=l;F||N.getCentering();null==g&&0<=b&&(g=this.modelSet.at[b]);if(134217751==k||1153433601==k){if(F||null==g)return s;z.setUnitCell(d);JS.SymmetryDesc.ptemp.setT(g);d.toFractional(JS.SymmetryDesc.ptemp,!1);if(Float.isNaN(JS.SymmetryDesc.ptemp.x))return s;t=new JU.P3;z.newSpaceGroupPoint(JS.SymmetryDesc.ptemp,j,null,0,0,
0,t);1073742066==n&&(d.unitize(t),t.add(y));z.toCartesian(t,!1);return 1153433601==k?this.getAtom(d,a,b,t):t}u=this.createInfoArray(N,d,g,null,null==m?"sym":m,q,n,null!=e,v,K,x);1275068418==k&&null!=m&&(t=JS.SymmetryDesc.getKeyType(m))}else{x="info";y=!1;switch(k){case 1275068418:t=JS.SymmetryDesc.getKeyType(m);m=x=null;0==p&&(p=-1);break;case 1073742001:m=x=null;0==p&&(p=-1);y=!0;v.set(21);v.set(0);v.set(19);break;case 135176:null==m&&(m=K?"sg":"sym");x="all";y=!0;break;case 1153433601:m=x=null;
default:0==p&&(p=1)}n=this.getSymopInfoForPoints(d,a,l,e,g,j,m,x,q,p,n,v);if(y)return n;if("string"==typeof n)return s;u=n;if(1153433601==k)return!W(g,"JM.Atom")&&!W(j,"JM.Atom")&&(b=-1),null==u?s:this.getAtom(d,a,b,u[7])}if(null==u)return s;a=0<u.length&&W(u[0],Array);if(0>p&&0>=l&&null==h&&(1275068418==k||a)){1275068418==k&&(0<u.length&&!W(u[0],Array))&&(u=Q(-1,[u]));a=new JU.Lst;for(j=0;j<u.length;j++)a.addLast(JS.SymmetryDesc.getInfo(u[j],0>t?t:k));return a}if(0>t&&(0<=p||0<l||null!=h))k=t;0<
p&&a&&(u=u[0]);135176==k&&(K&&-2==p)&&(k=134217764);return JS.SymmetryDesc.getInfo(u,k)},"~N,~N,J.api.SymmetryInterface,~S,~N,JU.P3,JU.P3,JU.P3,~S,~N,~N,~N,~N,~B");d(b,"getAtom",function(a,b,d,h){var l=null;0<=d&&this.modelSet.getAtomBitsMDa(1094715402,Integer.$valueOf(this.modelSet.at[d].getElementNumber()),l=new JU.BS);d=new JU.BS;this.modelSet.getAtomsWithin(0.02,h,d,b);null!=l&&d.and(l);d.isEmpty()&&(h=JU.P3.newP(h),a.toUnitCell(h,null),a.toCartesian(h,!1),this.modelSet.getAtomsWithin(0.02,h,
d,b),null!=l&&d.and(l));return d},"J.api.SymmetryInterface,~N,~N,JU.T3");d(b,"getSymopInfoForPoints",function(a,b,d,h,l,e,g,j,m,k,q,p){h=p.get(21)||p.get(3)&&3==p.cardinality();p.clear(21);var n=h?"":null;e=this.getSpaceGroupInfo(a,b,null,d,l,e,g,m,k,!1,!0,q,null,p);if(null==e)return n;a=e.get("operations");if(null==a)return n;b=h?new JU.SB:null;d--;l=!h&&0>d;e=e.get("symmetryInfo");k="label".equals(j);for(m=j=0;m<a.length;m++)if(!(null==a[m]||0<=d&&d!=m))if(h){if(null!=g)return a[m][3]+"\nprint "+
JU.PT.esc(e);0<b.length()&&b.appendC("\n");k||(0>d&&b.appendI(m+1).appendC("\t"),b.append(a[m][0]).appendC("\t"));b.append(a[m][2])}else{if(!l)return a[m];a[j++]=a[m]}if(!h){d=Array(j);for(m=0;m<j;m++)d[m]=a[m];return d}return 0==b.length()?null!=g?"draw "+g+"* delete":n:b.toString()},"J.api.SymmetryInterface,~N,~N,JU.P3,JU.P3,JU.P3,~S,~S,~N,~N,~N,JU.BS");d(b,"getSymopInfo",function(a,b,d,h,l,e,g,j,m,k,q,p){0==j&&(j=JS.SymmetryDesc.getType(g));var n=1153433601==j?new JU.BS:"",v=0<=a?this.modelSet.at[a].mi:
this.modelSet.vwr.am.cmi;if(0>v)return n;var t=this.modelSet.am[v].biosymmetry;if(null==t&&null==(t=this.modelSet.getUnitCell(v)))t=(new JS.Symmetry).setUnitCellFromParams(null,!1,NaN);if(135176!=j||2147483647!=d&&null==p)return this.getSymmetryInfo(v,a,t,b,d,h,l,e,g,j,m,k,q,!1);if(null==t)return n;j="";d=null==b&&(0>k&&null==p)&&-2==k?t.getAdditionalOperations():t.getSymmetryOperations();if(null!=d)if(null==g&&(g="sg"),n=d.length,null!=l&&null==e||null!=p){null==p&&(p=t.getInvariantSymops(l,null));
for(var n=p.length,s=0;s<n;s++)0<k&&k!=s+1||(d=p[s],j+=this.getSymmetryInfo(v,a,t,b,d,h,l,e,g+d,135176,m,k,q,null==l))}else for(d=1;d<=n;d++)j+=this.getSymmetryInfo(v,a,t,b,d,h,l,e,g+d,135176,m,k,q,!0);return j},"~N,~S,~N,JU.P3,JU.P3,JU.P3,~S,~N,~N,~N,~N,~A");d(b,"getSpaceGroupInfo",function(a,b,d,h,l,e,g,j,m,k,q,p,n,v){null==v&&(v=new JU.BS,v.setBits(0,JS.SymmetryDesc.keys.length),v.clear(19));var t=1==v.cardinality()&&v.get(10),s=null,y=!t&&null==l&&null==g&&0>=m&&v.cardinality()>=JS.SymmetryDesc.keys.length,
x=!1,u=null,H=null!=d&&0<d.length,M=H&&0<=d.indexOf("[--]");if(q||!H){var B=y&&0==h;if(t)n=a;else{0>b&&(b=W(l,"JM.Atom")?l.mi:this.modelSet.vwr.am.cmi);if(0>b)u="no single current model";else if(null==n&&!(x=null!=(n=this.modelSet.am[b].biosymmetry))&&null==(n=this.modelSet.getUnitCell(b)))u="not applicable";null!=u?(s=new java.util.Hashtable,s.put("spaceGroupInfo",""),s.put("spaceGroupNote",u),s.put("symmetryInfo","")):y&&(s=this.modelSet.getInfo(b,"spaceGroupInfo"));if(null!=s)return s;d=n.getSpaceGroupName()}var s=
new java.util.Hashtable,u=n.getSymmetryOperations(),z=x?n.spaceGroup:null,y=M?"":null,F=0;if(null!=u){t||(x?a.setSpaceGroupTo(JS.SpaceGroup.getNull(!1,!1,!1)):a.setSpaceGroup(!1));0!=u[0].timeReversal&&(a.getSpaceGroupOperation(0).timeReversal=1);for(var N=Array(u.length),w="",A=null==g||null==l||null==e&&0>m?0:1,D=0;A<u.length&&D!=m;A++){var C=u[A],O=C.xyzOriginal,Q;if(t)Q=A;else{Q=!(0==A&&0<=C.xyz.indexOf("x4"))&&null!=a.getSpaceGroupOperation(A)?A:x?a.addBioMoleculeOperation(z.finalOperations[A],
!1):a.addSpaceGroupOperation("="+C.xyz,A+1);if(0>Q)continue;C=a.getSpaceGroupOperation(A);if(null==C)continue;C.xyzOriginal=O}null!=y&&(y+=";"+C.xyz);C=0<h&&h-1!=Q?null:this.createInfoArray(C,n,l,e,g,j,p,!1,v,!1,!1);if(null!=C&&!(0<m&&++D!=m)&&(N[A]=C,t||(w+="\n"+(A+1)+"\t"+C[v.get(19)?19:0]+"\t  "+C[2]),F++,0<h))break}s.put("operations",N);t||s.put("symmetryInfo",0==w.length?"":w.substring(1))}if(t)return s;u=0==F?"\n no symmetry operations":0>=m&&0>=h?"\n"+F+" symmetry operation"+(1==F?":\n":"s:\n"):
"";null!=y&&(d=y.substring(y.indexOf(";")+1));B&&this.modelSet.setInfo(b,"spaceGroupInfo",s)}else s=new java.util.Hashtable;s.put("spaceGroupName",d);s.put("spaceGroupNote",null==u?"":u);if(x)a=d;else if(H&&!M&&a.setSpaceGroupName(d),a=a.getSpaceGroupInfoObj(d,null==n?null:n.getUnitCellParams(),k,!q),null==a||a.equals("?"))a="?",s.put("spaceGroupNote","could not identify space group from name: "+d+'\nformat: show spacegroup "2" or "P 2c" or "C m m m" or "x, y, z;-x ,-y, -z"');s.put("spaceGroupInfo",
a);return s},"J.api.SymmetryInterface,~N,~S,~N,JU.P3,JU.P3,~S,~N,~N,~B,~B,~N,J.api.SymmetryInterface,JU.BS");d(b,"getTransform",function(a,b,d,h,l){null==JS.SymmetryDesc.pta01&&(JS.SymmetryDesc.pta01=new JU.P3,JS.SymmetryDesc.pta02=new JU.P3,JS.SymmetryDesc.ptemp=new JU.P3,JS.SymmetryDesc.vtrans=new JU.V3);JS.SymmetryDesc.pta02.setT(h);JS.SymmetryDesc.vtrans.setT(JS.SymmetryDesc.pta02);a.unitize(JS.SymmetryDesc.pta02);h=3.4028235E38;for(var e=-1,g=0,j=b.length;g<j;g++){var m=b[g];JS.SymmetryDesc.pta01.setT(d);
m.rotTrans(JS.SymmetryDesc.pta01);JS.SymmetryDesc.ptemp.setT(JS.SymmetryDesc.pta01);a.unitize(JS.SymmetryDesc.pta01);var k=JS.SymmetryDesc.pta01.distanceSquared(JS.SymmetryDesc.pta02);if(1.96E-6>k){JS.SymmetryDesc.vtrans.sub(JS.SymmetryDesc.ptemp);JS.SymmetryOperation.normalize12ths(JS.SymmetryDesc.vtrans);m=JU.M4.newM4(m);m.add(JS.SymmetryDesc.vtrans);JS.SymmetryDesc.pta01.setT(d);m.rotTrans(JS.SymmetryDesc.pta01);a.unitize(JS.SymmetryDesc.pta01);k=JS.SymmetryDesc.pta01.distanceSquared(JS.SymmetryDesc.pta02);
if(1.96E-6<=k)continue;return m}k<h&&(h=k,e=g)}l&&(m=b[e],JS.SymmetryDesc.pta01.setT(d),m.rotTrans(JS.SymmetryDesc.pta01),a.unitize(JS.SymmetryDesc.pta01),System.err.println(""+e+" "+JS.SymmetryDesc.pta01.distance(JS.SymmetryDesc.pta02)+" "+JS.SymmetryDesc.pta01+" "+JS.SymmetryDesc.pta02+" "+JU.V3.newVsub(JS.SymmetryDesc.pta02,JS.SymmetryDesc.pta01)));return null},"JS.UnitCell,~A,JU.P3,JU.P3,~B");b.keys=Q(-1,["xyz","xyzOriginal","label",null,"fractionalTranslation","cartesianTranslation","inversionCenter",
null,"axisVector","rotationAngle","matrix","unitTranslation","centeringVector","timeReversal","plane","_type","id","cif2","xyzCanonical","xyzNormalized"]);b.ptemp=new JU.P3;b.ptemp2=new JU.P3;b.pta01=new JU.P3;b.pta02=new JU.P3;b.vtrans=new JU.V3});X("JS");ba(["JU.SimpleUnitCell","JU.P3","JV.JC"],"JS.UnitCell","java.util.Hashtable JU.AU $.Lst $.M3 $.M4 $.P4 $.PT $.Quat $.V3 J.api.Interface JS.Symmetry JU.BoxInfo $.Escape".split(" "),function(){var b=O(function(){this.moreInfo=null;this.name="";this.fractionalOffset=
this.vertices=null;this.allFractionalRelative=!1;this.f2c=this.unitCellMultiplied=this.unitCellMultiplier=this.cartesianOffset=null;aa(this,arguments)},JS,"UnitCell",JU.SimpleUnitCell,Cloneable);la(b,function(){this.cartesianOffset=new JU.P3});b.checkDuplicate=d(b,"checkDuplicate",function(a,b,d,h){for(0>h&&(h=a.size());b<h;b++)for(var l=a.get(b),e=Math.max(b+1,d);e<h;e++)1.96E-6>a.get(e).distanceSquared(l)&&(a.removeItemAt(e),h--,e--)},"JU.Lst,~N,~N,~N");b.cloneUnitCell=d(b,"cloneUnitCell",function(a){var b=
null;try{b=a.clone()}catch(d){if(!fa(d,"CloneNotSupportedException"))throw d;}return b},"JS.UnitCell");b.fromOABC=d(b,"fromOABC",function(a,b){var d=new JS.UnitCell;3==a.length&&(a=Q(-1,[new JU.P3,a[0],a[1],a[2]]));var h=y(-1,[-1,0,0,0,0,0,a[1].x,a[1].y,a[1].z,a[2].x,a[2].y,a[2].z,a[3].x,a[3].y,a[3].z]);d.init(h);d.allFractionalRelative=b;d.initUnitcellVertices();d.setCartesianOffset(a[0]);return d},"~A,~B");b.fromParams=d(b,"fromParams",function(a,b,d){var h=new JS.UnitCell;h.init(a);h.initUnitcellVertices();
h.allFractionalRelative=b;h.setPrecision(d);26<a.length&&(a[26]=d);return h},"~A,~B,~N");d(b,"checkDistance",function(a,b,d,h,l,e,g,j){a=JU.P3.newP(a);this.toCartesian(a,!0);for(var m=-l;m<=l;m++)for(var k=-e;k<=e;k++)for(var n=-g;n<=g;n++){j.set(b.x+m,b.y+k,b.z+n);this.toCartesian(j,!0);var p=a.distance(j);if(0<h?Math.abs(p-d)<=h:p<=d&&0.1<p)return j.set(m,k,n),!0}return!1},"JU.P3,JU.P3,~N,~N,~N,~N,~N,JU.P3");d(b,"checkPeriodic",function(a){switch(this.dimension){case 3:if(a.z<-this.slop||a.z>1-
this.slop)return!1;case 2:if(a.y<-this.slop||a.y>1-this.slop)return!1;case 1:if(a.x<-this.slop||a.x>1-this.slop)return!1}return!0},"JU.P3");d(b,"dumpInfo",function(a,b){var d=b?this.getUnitCellMultiplied():this;return d!==this?d.dumpInfo(a,!1):"a="+this.a+", b="+this.b+", c="+this.c+", alpha="+this.alpha+", beta="+this.beta+", gamma="+this.gamma+"\noabc="+JU.Escape.eAP(this.getUnitCellVectors())+"\nvolume="+this.volume+(a?"\nfractional to cartesian: "+this.matrixFractionalToCartesian+"\ncartesian to fractional: "+
this.matrixCartesianToFractional:"")},"~B,~B");d(b,"fix000",function(a){return 0.001>Math.abs(a)?0:a},"~N");d(b,"fixFloor",function(a){return 1==a?0:a},"~N");d(b,"getCanonicalCopy",function(a,b){var d=this.getScaledCell(b);return JU.BoxInfo.getCanonicalCopy(d,a)},"~N,~B");d(b,"getCartesianOffset",function(){return this.cartesianOffset});d(b,"getCellWeight",function(a){var b=1;if(a.x<=this.slop||a.x>=1-this.slop)b/=2;if(a.y<=this.slop||a.y>=1-this.slop)b/=2;if(a.z<=this.slop||a.z>=1-this.slop)b/=2;
return b},"JU.P3");d(b,"getConventionalUnitCell",function(a,b){var d=this.getUnitCellVectors();(!a.equals("P")||null!=b)&&this.toFromPrimitive(!1,a.charAt(0),d,b);return d},"~S,JU.M3");d(b,"getEquivPoints",function(a,b,d,h,l,e){var g=0<=b.indexOf("fromfractional"),j=0<=b.indexOf("tofractional");b=0<=b.indexOf("packed");null==h&&(h=new JU.Lst);a=JU.P3.newP(a);g||this.toFractional(a,!0);for(var g=h.size(),m=0,k=d.length;m<k;m++){var n=JU.P3.newP(a);d[m].rotTrans(n);n.x=this.fixFloor(n.x-Math.floor(n.x));
n.y=this.fixFloor(n.y-Math.floor(n.y));n.z=this.fixFloor(n.z-Math.floor(n.z));h.addLast(n);g++}if(b)for(m=e;m<g;m++)a.setT(h.get(m)),this.unitizeRnd(a),0==a.x&&(h.addLast(JU.P3.new3(0,a.y,a.z)),h.addLast(JU.P3.new3(1,a.y,a.z)),0==a.y&&(h.addLast(JU.P3.new3(1,1,a.z)),h.addLast(JU.P3.new3(0,0,a.z)),0==a.z&&(h.addLast(JU.P3.new3(1,1,1)),h.addLast(JU.P3.new3(0,0,0))))),0==a.y&&(h.addLast(JU.P3.new3(a.x,0,a.z)),h.addLast(JU.P3.new3(a.x,1,a.z)),0==a.z&&(h.addLast(JU.P3.new3(a.x,0,0)),h.addLast(JU.P3.new3(a.x,
1,1)))),0==a.z&&(h.addLast(JU.P3.new3(a.x,a.y,0)),h.addLast(JU.P3.new3(a.x,a.y,1)),0==a.x&&(h.addLast(JU.P3.new3(0,a.y,0)),h.addLast(JU.P3.new3(1,a.y,1))));JS.UnitCell.checkDuplicate(h,l,e,-1);if(!j)for(m=h.size();--m>=e;)this.toCartesian(h.get(m),!0);return h},"JU.P3,~S,~A,JU.Lst,~N,~N");d(b,"getFractionalOffset",function(){return this.fractionalOffset});d(b,"getInfo",function(){var a=this.getUnitCellMultiplied();if(a!==this)return a.getInfo();a=new java.util.Hashtable;a.put("params",this.unitCellParams);
a.put("oabc",this.getUnitCellVectors());a.put("volume",Double.$valueOf(this.volume));a.put("matFtoC",this.matrixFractionalToCartesian);a.put("matCtoF",this.matrixCartesianToFractional);return a});d(b,"getQuaternionRotation",function(a){var b=JU.V3.newVsub(this.vertices[4],this.vertices[0]),d=JU.V3.newVsub(this.vertices[2],this.vertices[0]),h=JU.V3.newVsub(this.vertices[1],this.vertices[0]),l=new JU.V3,e=new JU.V3,g="-"==a.charAt(0)?-1:1;0>g&&(a=a.substring(1));var j=a;a=JU.PT.rep(JU.PT.rep(JU.PT.rep(JU.PT.rep(JU.PT.rep(JU.PT.rep(a,
"ab","A"),"bc","B"),"ca","C"),"ba","D"),"cb","E"),"ac","F");var m=(j=!j.equals(a))?1:0;2==a.length&&(m=a.charAt(1).charCodeAt(0)-48,a=a.substring(0,1));var k=0==m%2;switch("abcABCDEF".indexOf(a)){case 7:g=-g;case 4:b.cross(h,d),m=(5-m)%4+1;default:a=b;b=h;break;case 8:g=-g;case 5:g=-g,d.cross(h,b),m=(2+m)%4+1;case 1:a=d;d=h;g=-g;break;case 3:g=-g;case 6:h.cross(b,d),k&&(m=6-m);case 2:a=h,!j&&0<m&&(m=5-m)}0<m&&0<g!=k&&(b=d,a.scale(-1));switch(m){case 2:a.scale(-1);b.scale(-1);break;case 3:b.scale(-1);
break;case 4:a.scale(-1)}l.cross(a,b);e.cross(l,a);return JU.Quat.getQuaternionFrame(null,e,l).inv()},"~S");d(b,"getScaledCell",function(a){var b=Array(8),d=null,h=null;a&&(null!=this.unitCellMultiplier&&0==this.unitCellMultiplier.z)&&(d=new JU.P3,h=new JU.P3,JU.SimpleUnitCell.ijkToPoint3f(v(this.unitCellMultiplier.x),d,0,0),JU.SimpleUnitCell.ijkToPoint3f(v(this.unitCellMultiplier.y),h,0,0),h.sub(d));for(var l=null==this.unitCellMultiplier||0==this.unitCellMultiplier.z?1:Math.abs(this.unitCellMultiplier.z),
e=0;8>e;e++){var g=b[e]=JU.P3.newP(JU.BoxInfo.unitCubePoints[e]);null!=d&&b[e].add3(d.x+h.x*g.x,d.y+h.y*g.y,d.z+h.z*g.z);b[e].scale(l);this.matrixFractionalToCartesian.rotTrans(g);a||g.sub(this.cartesianOffset)}return b},"~B");d(b,"getState",function(){var a="";null!=this.fractionalOffset&&0!=this.fractionalOffset.lengthSquared()&&(a+="  unitcell offset "+JU.Escape.eP(this.fractionalOffset)+";\n");null!=this.unitCellMultiplier&&(a+="  unitcell range "+JU.SimpleUnitCell.escapeMultiplier(this.unitCellMultiplier)+
";\n");return a});d(b,"getTensor",function(a,b){var d=J.api.Interface.getUtil("Tensor",a,"file");if(0==b[0]&&0==b[1]&&0==b[2]){var h=b[7],l=y(-1,[h,h,h]);return d.setFromEigenVectors(JS.UnitCell.unitVectors,l,"iso","Uiso="+h,null)}d.parBorU=b;var h=qa(6,0),e=v(b[6]);if(12==e)h[0]=19.739208802178716*b[0],h[1]=19.739208802178716*b[1],h[2]=19.739208802178716*b[2],h[3]=39.47841760435743*b[3],h[4]=39.47841760435743*b[4],h[5]=39.47841760435743*b[5],b[7]=(b[0]+b[1]+b[3])/3;else{var l=4==e||5==e||8==e||9==
e,g=2-e%2,j=8==e||9==e||10==e?19.739208802178716:4==e||5==e?0.25:2==e||3==e?Math.log(2):1,e=b[0]*j*(l?this.a_*this.a_:1),m=b[1]*j*(l?this.b_*this.b_:1),k=b[2]*j*(l?this.c_*this.c_:1),n=b[3]*j*(l?this.a_*this.b_:1)*g,p=b[4]*j*(l?this.a_*this.c_:1)*g,l=b[5]*j*(l?this.b_*this.c_:1)*g;b[7]=Math.pow(e/19.739208802178716/this.a_/this.a_*m/19.739208802178716/this.b_/this.b_*k/19.739208802178716/this.c_/this.c_,0.3333);h[0]=this.a*this.a*e+this.b*this.b*this.cosGamma*this.cosGamma*m+this.c*this.c*this.cosBeta*
this.cosBeta*k+this.a*this.b*this.cosGamma*n+this.b*this.c*this.cosGamma*this.cosBeta*l+this.a*this.c*this.cosBeta*p;h[1]=this.b*this.b*this.sinGamma*this.sinGamma*m+this.c*this.c*this.cA_*this.cA_*k+this.b*this.c*this.cA_*this.sinGamma*l;h[2]=this.c*this.c*this.cB_*this.cB_*k;h[3]=2*this.b*this.b*this.cosGamma*this.sinGamma*m+2*this.c*this.c*this.cA_*this.cosBeta*k+this.a*this.b*this.sinGamma*n+this.b*this.c*(this.cA_*this.cosGamma+this.sinGamma*this.cosBeta)*l+this.a*this.c*this.cA_*p;h[4]=2*this.c*
this.c*this.cB_*this.cosBeta*k+this.b*this.c*this.cosGamma*l+this.a*this.c*this.cB_*p;h[5]=2*this.c*this.c*this.cA_*this.cB_*k+this.b*this.c*this.cB_*this.sinGamma*l}return d.setFromThermalEquation(h,JU.Escape.eAF(b))},"JV.Viewer,~A");d(b,"getUnitCellMultiplied",function(){if(null==this.unitCellMultiplier||0<this.unitCellMultiplier.z&&this.unitCellMultiplier.z==v(this.unitCellMultiplier.z))return this;if(null==this.unitCellMultiplied){var a=JU.BoxInfo.toOABC(this.getScaledCell(!0),null);this.unitCellMultiplied=
JS.UnitCell.fromOABC(a,!1)}return this.unitCellMultiplied});d(b,"getUnitCellMultiplier",function(){return this.unitCellMultiplier});d(b,"getUnitCellVectors",function(){var a=this.matrixFractionalToCartesian;return Q(-1,[JU.P3.newP(this.cartesianOffset),JU.P3.new3(this.fix000(a.m00),this.fix000(a.m10),this.fix000(a.m20)),JU.P3.new3(this.fix000(a.m01),this.fix000(a.m11),this.fix000(a.m21)),JU.P3.new3(this.fix000(a.m02),this.fix000(a.m12),this.fix000(a.m22))])});b.getMatrixAndUnitCell=d(b,"getMatrixAndUnitCell",
function(a,b,d){null==b&&(b="a,b,c");if(null==d?null==a:"string"!=typeof b)return null;var h,l=!1,e=Array(4),g=e[0]=JU.V3.new3(0,0,0);e[1]=JU.V3.new3(1,0,0);e[2]=JU.V3.new3(0,1,0);e[3]=JU.V3.new3(0,0,1);var j=new JU.M3;if(JU.AU.isAF(b))return JU.SimpleUnitCell.setAbcFromParams(b,e);if("string"==typeof b){var m="0,0,0";if(0==b.indexOf("a="))return JU.SimpleUnitCell.setAbc(b,null,e);l=b.indexOf(";");0<=l&&(m=b.substring(l+1),b=b.substring(0,l));for(b+=";0,0,0";b.startsWith("!!");)b=b.substring(2);(l=
b.startsWith("!"))&&(b=b.substring(1));h=new JS.Symmetry;h.setSpaceGroup(!1);var k=h.addSpaceGroupOperation("="+b,0);if(0>k)return null;h=h.getSpaceGroupOperation(k);h.doFinalize();if(null!=m){m=JU.PT.split(m,",");k=y(3,0);if(3==m.length)for(var n=0;3>n;n++){var p=m[n],r=p.indexOf("/");k[n]=0<=r?JU.PT.parseFloat(p.substring(0,r))/JU.PT.parseFloat(p.substring(r+1)):JU.PT.parseFloat(p)}h.setTranslation(JU.P3.new3(k[0],k[1],k[2]));0<=b.indexOf("a")&&h.transpose33()}null!=d&&d.setM4(h);if(null==a)return e}else if(W(b,
"JU.M3"))h=JU.M4.newMV(b,new JU.P3);else if(W(b,"JU.M4"))h=b;else{h=b[0];h.getRotationScale(j);a.toCartesian(g,!1);h.rotTrans(g);for(k=1;4>k;k++)a.toCartesian(e[k],!0),j.rotate(e[k]);return e}h.getRotationScale(j);h.getTranslation(g);l?(j.invert(),j.transpose(),j.rotate(g),g.scale(-1)):j.transpose();a.toCartesian(g,!1);for(k=1;4>k;k++)j.rotate(e[k]),a.toCartesian(e[k],!0);return e},"JU.SimpleUnitCell,~O,JU.M4");d(b,"getVertices",function(){return this.vertices});d(b,"hasOffset",function(){return null!=
this.fractionalOffset&&0!=this.fractionalOffset.lengthSquared()});d(b,"initOrientation",function(a){if(null!=a){var b=new JU.M4;b.setToM3(a);this.matrixFractionalToCartesian.mul2(b,this.matrixFractionalToCartesian);this.matrixCartesianToFractional.setM4(this.matrixFractionalToCartesian).invert();this.initUnitcellVertices()}},"JU.M3");d(b,"initUnitcellVertices",function(){if(null!=this.matrixFractionalToCartesian){this.matrixCtoFNoOffset=JU.M4.newM4(this.matrixCartesianToFractional);this.matrixFtoCNoOffset=
JU.M4.newM4(this.matrixFractionalToCartesian);this.vertices=Array(8);for(var a=8;0<=--a;)this.vertices[a]=this.matrixFractionalToCartesian.rotTrans2(JU.BoxInfo.unitCubePoints[a],new JU.P3)}});d(b,"isSameAs",function(a){for(var b=this.getF2C(),d=0;3>d;d++)for(var h=0;4>h;h++)if(!JU.SimpleUnitCell.approx0(b[d][h]-a[d][h]))return!1;return!0},"~A");d(b,"getF2C",function(){if(null==this.f2c){this.f2c=y(3,4,0);for(var a=0;3>a;a++)this.matrixFractionalToCartesian.getRow(a,this.f2c[a])}return this.f2c});
d(b,"isWithinUnitCell",function(a,b,d,h){switch(this.dimension){case 3:if(h.z<d-1-this.slop||h.z>d+this.slop)return!1;case 2:if(h.y<b-1-this.slop||h.y>b+this.slop)return!1;case 1:if(h.x<a-1-this.slop||h.x>a+this.slop)return!1}return!0},"~N,~N,~N,JU.P3");d(b,"setCartesianOffset",function(a){this.cartesianOffset.setT(a);this.matrixFractionalToCartesian.m03=this.cartesianOffset.x;this.matrixFractionalToCartesian.m13=this.cartesianOffset.y;this.matrixFractionalToCartesian.m23=this.cartesianOffset.z;a=
this.hasOffset();this.fractionalOffset=JU.P3.newP(this.cartesianOffset);this.matrixCartesianToFractional.m03=0;this.matrixCartesianToFractional.m13=0;this.matrixCartesianToFractional.m23=0;this.matrixCartesianToFractional.rotTrans(this.fractionalOffset);this.matrixCartesianToFractional.m03=-this.fractionalOffset.x;this.matrixCartesianToFractional.m13=-this.fractionalOffset.y;this.matrixCartesianToFractional.m23=-this.fractionalOffset.z;this.allFractionalRelative&&(this.matrixCtoFNoOffset.setM4(this.matrixCartesianToFractional),
this.matrixFtoCNoOffset.setM4(this.matrixFractionalToCartesian));!a&&0==this.fractionalOffset.lengthSquared()&&(this.fractionalOffset=null);this.f2c=null},"JU.T3");d(b,"setOffset",function(a){if(null!=a){this.unitCellMultiplied=null;var b=W(a,"JU.T4")?a:null,d=null==b?1.4E-45:b.w,h=999999<d;if(null!=b?0>=d||h:100<=a.x||100<=a.y)if(this.unitCellMultiplier=0==a.z&&a.x==a.y&&!h?null:h?JU.P4.newPt(b):JU.P3.newP(a),this.unitCellMultiplied=null,null==b||0==b.w||h)return;if(this.hasOffset()||0<a.lengthSquared())this.fractionalOffset=
JU.P3.newP(a);this.matrixCartesianToFractional.m03=-a.x;this.matrixCartesianToFractional.m13=-a.y;this.matrixCartesianToFractional.m23=-a.z;this.cartesianOffset.setT(a);this.matrixFractionalToCartesian.m03=0;this.matrixFractionalToCartesian.m13=0;this.matrixFractionalToCartesian.m23=0;this.matrixFractionalToCartesian.rotTrans(this.cartesianOffset);this.matrixFractionalToCartesian.m03=this.cartesianOffset.x;this.matrixFractionalToCartesian.m13=this.cartesianOffset.y;this.matrixFractionalToCartesian.m23=
this.cartesianOffset.z;this.allFractionalRelative&&(this.matrixCtoFNoOffset.setM4(this.matrixCartesianToFractional),this.matrixFtoCNoOffset.setM4(this.matrixFractionalToCartesian));this.f2c=null}},"JU.T3");d(b,"toFromPrimitive",function(a,b,d,h){var l=d.length-3,e=null;if("r"==b||null==h){switch(b.charCodeAt(0)){default:return!1;case 114:return JU.SimpleUnitCell.getReciprocal(d,d,1),!0;case 80:a=!0;e=JU.M3.newA9(y(-1,[1,0,0,0,1,0,0,0,1]));break;case 65:e=JU.M3.newA9(y(-1,[1,0,0,0,0.5,0.5,0,-0.5,0.5]));
break;case 66:e=JU.M3.newA9(y(-1,[0.5,0,0.5,0,1,0,-0.5,0,0.5]));break;case 67:e=JU.M3.newA9(y(-1,[0.5,0.5,0,-0.5,0.5,0,0,0,1]));break;case 82:e=JU.M3.newA9(y(-1,[0.6666667,-0.33333334,-0.33333334,0.33333334,0.33333334,-0.6666667,0.33333334,0.33333334,0.33333334]));break;case 73:e=JU.M3.newA9(y(-1,[-0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5]));break;case 70:e=JU.M3.newA9(y(-1,[0,0.5,0.5,0.5,0,0.5,0.5,0.5,0]))}a||e.invert()}else e=JU.M3.newM3(h),a&&e.invert();for(a=d.length;--a>=l;)b=d[a],this.toFractional(b,
!0),e.rotate(b),this.toCartesian(b,!0);return!0},"~B,~S,~A,JU.M3");d(b,"toUnitCell",function(a,b){null!=this.matrixCartesianToFractional&&(null==b?(this.matrixCartesianToFractional.rotTrans(a),this.unitize(a),this.matrixFractionalToCartesian.rotTrans(a)):(this.matrixCtoFNoOffset.rotTrans(a),this.unitize(a),a.add(b),this.matrixFtoCNoOffset.rotTrans(a)))},"JU.T3,JU.T3");d(b,"toUnitCellRnd",function(a,b){null!=this.matrixCartesianToFractional&&(null==b?(this.matrixCartesianToFractional.rotTrans(a),this.unitizeRnd(a),
this.matrixFractionalToCartesian.rotTrans(a)):(this.matrixCtoFNoOffset.rotTrans(a),this.unitizeRnd(a),a.add(b),this.matrixFtoCNoOffset.rotTrans(a)))},"JU.T3,JU.T3");d(b,"unitize",function(a){this.unitizeDim(this.dimension,a)},"JU.T3");d(b,"unitizeRnd",function(a){JU.SimpleUnitCell.unitizeDimRnd(this.dimension,a,this.slop)},"JU.T3");b.createCompatibleUnitCell=d(b,"createCompatibleUnitCell",function(a,b,d,h){null==d&&(d=b);var l=b[0],e=b[1],g=b[2],j=b[3],m=b[4],k=b[5],n=null==a||null==a.intlTableNumber?
0:JU.PT.parseInt(a.intlTableNumber),p=0!=n&&JS.UnitCell.isHexagonalSG(n,null),r=p&&JS.UnitCell.isHexagonalSG(-1,b),v=0!=n&&"r"==a.axisChoice,t=v&&JU.SimpleUnitCell.isRhombohedral(b);if(p&&r||v&&t)h=!0;if(n>(h?2:0)){var s=JU.SimpleUnitCell.approx0(l-e),s=JU.SimpleUnitCell.approx0(e-g),s=JU.SimpleUnitCell.approx0(g-l),y=JU.SimpleUnitCell.approx0(j-m),x=JU.SimpleUnitCell.approx0(m-k),u=JU.SimpleUnitCell.approx0(k-j);h||(l>e&&(y=l,l=e,e=y),(s=JU.SimpleUnitCell.approx0(e-g))&&(g=1.5*e),(s=JU.SimpleUnitCell.approx0(l-
e))&&(e=1.2*l),(s=JU.SimpleUnitCell.approx0(g-l))&&(g=1.1*l),JU.SimpleUnitCell.approx0(j-90)&&(j=80),JU.SimpleUnitCell.approx0(m-90)&&(m=100),JU.SimpleUnitCell.approx0(k-90)&&(k=110),j>m&&(y=j,j=m,m=y),y=JU.SimpleUnitCell.approx0(j-m),x=JU.SimpleUnitCell.approx0(m-k),u=JU.SimpleUnitCell.approx0(k-j),y&&(m=1.2*j),x&&(k=1.3*m),u&&(k=1.4*j));if(p){if(e=l,!(v?t:r))"r"==a.axisChoice?(g=e=l,!h&&(85<j&&95>j)&&(j=80),k=m=j):(j=m=90,k=120)}else if(195<=n)g=e=l,j=m=k=90;else if(75<=n)e=l,s&&!h&&(g=1.5*l),j=
m=k=90;else if(16<=n)j=m=k=90;else if(3<=n)switch(a.uniqueAxis.charCodeAt(0)){case 97:m=k=90;break;case 98:j=k=90;break;case 99:j=m=90}}a=!(l==b[0]&&e==b[1]&&g==b[2]&&j==b[3]&&m==b[4]&&k==b[5]);d[0]=l;d[1]=e;d[2]=g;d[3]=j;d[4]=m;d[5]=k;return a},"JS.SpaceGroup,~A,~A,~B");b.isHexagonalSG=d(b,"isHexagonalSG",function(a,b){return 1>a?JU.SimpleUnitCell.isHexagonal(b):143<=a&&194>=a},"~N,~A");b.unitVectors=Q(-1,[JV.JC.axisX,JV.JC.axisY,JV.JC.axisZ])})})(Clazz,Clazz.getClassName,Clazz.newLongArray,Clazz.doubleToByte,
Clazz.doubleToInt,Clazz.doubleToLong,Clazz.declarePackage,Clazz.instanceOf,Clazz.load,Clazz.instantialize,Clazz.decorateAsClass,Clazz.floatToInt,Clazz.floatToLong,Clazz.makeConstructor,Clazz.defineEnumConstant,Clazz.exceptionOf,Clazz.newIntArray,Clazz.newFloatArray,Clazz.declareType,Clazz.prepareFields,Clazz.superConstructor,Clazz.newByteArray,Clazz.declareInterface,Clazz.newShortArray,Clazz.innerTypeInstance,Clazz.isClassDefined,Clazz.prepareCallback,Clazz.newArray,Clazz.castNullAs,Clazz.floatToShort,
Clazz.superCall,Clazz.decorateAsType,Clazz.newBooleanArray,Clazz.newCharArray,Clazz.implementOf,Clazz.newDoubleArray,Clazz.overrideConstructor,Clazz.clone,Clazz.doubleToShort,Clazz.getInheritedLevel,Clazz.getParamsType,Clazz.isAF,Clazz.isAB,Clazz.isAI,Clazz.isAS,Clazz.isASS,Clazz.isAP,Clazz.isAFloat,Clazz.isAII,Clazz.isAFF,Clazz.isAFFF,Clazz.tryToSearchAndExecute,Clazz.getStackTrace,Clazz.inheritArgs,Clazz.alert,Clazz.defineMethod,Clazz.overrideMethod,Clazz.declareAnonymous,Clazz.cloneFinals);
